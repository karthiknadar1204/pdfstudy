"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/uploadthing";
exports.ids = ["vendor-chunks/uploadthing"];
exports.modules = {

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/config.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/config.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ApiUrl: () => (/* binding */ ApiUrl),\n/* harmony export */   IngestUrl: () => (/* binding */ IngestUrl),\n/* harmony export */   IsDevelopment: () => (/* binding */ IsDevelopment),\n/* harmony export */   UPLOADTHING_VERSION: () => (/* binding */ version),\n/* harmony export */   UTToken: () => (/* binding */ UTToken),\n/* harmony export */   UfsHost: () => (/* binding */ UfsHost),\n/* harmony export */   UtfsHost: () => (/* binding */ UtfsHost),\n/* harmony export */   configProvider: () => (/* binding */ configProvider)\n/* harmony export */ });\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/ConfigProvider */ \"(rsc)/./node_modules/effect/dist/esm/ConfigProvider.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _shared_schemas_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./shared-schemas.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\");\n\n\n\n\n\n\n\nvar version = \"7.5.2\";\n\n/**\n * Merge in `import.meta.env` to the built-in `process.env` provider\n * Prefix keys with `UPLOADTHING_` so we can reference just the name.\n * @example\n * process.env.UPLOADTHING_TOKEN = \"foo\"\n * Config.string(\"token\"); // Config<\"foo\">\n */ const envProvider = effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromEnv().pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(()=>effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromMap(new Map(Object.entries((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.filterDefinedObjectValues)(// fuck this I give up. import.meta is a mistake, someone else can fix it\n     null ?? {}))), {\n        pathDelim: \"_\"\n    })), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.nested(\"uploadthing\"), effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.constantCase);\n/**\n * Config provider that merges the options from the object\n * and environment variables prefixed with `UPLOADTHING_`.\n * @remarks Options take precedence over environment variables.\n */ const configProvider = (options)=>effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.fromJson(options ?? {}).pipe(effect_ConfigProvider__WEBPACK_IMPORTED_MODULE_0__.orElse(()=>envProvider));\nconst IsDevelopment = effect_Config__WEBPACK_IMPORTED_MODULE_2__.boolean(\"isDev\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.orElse(()=>effect_Config__WEBPACK_IMPORTED_MODULE_2__.succeed(typeof process !== \"undefined\" ? \"development\" : undefined).pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((_)=>_ === \"development\"))), effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(false));\nconst UTToken = effect_Schema__WEBPACK_IMPORTED_MODULE_3__.Config(\"token\", _shared_schemas_js__WEBPACK_IMPORTED_MODULE_4__.UploadThingToken).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_5__.catchTags({\n    ConfigError: (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n            code: e._op === \"InvalidData\" ? \"INVALID_SERVER_CONFIG\" : \"MISSING_ENV\",\n            message: e._op === \"InvalidData\" ? \"Invalid token. A token is a base64 encoded JSON object matching { apiKey: string, appId: string, regions: string[] }.\" : \"Missing token. Please set the `UPLOADTHING_TOKEN` environment variable or provide a token manually through config.\",\n            cause: e\n        })\n}));\nconst ApiUrl = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"apiUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"https://api.uploadthing.com\"), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_)=>new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url)=>url.href.replace(/\\/$/, \"\")));\nconst IngestUrl = effect_Effect__WEBPACK_IMPORTED_MODULE_5__.gen(function*() {\n    const { regions, ingestHost } = yield* UTToken;\n    const region = regions[0]; // Currently only support 1 region per app\n    return yield* effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ingestUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(`https://${region}.${ingestHost}`), effect_Config__WEBPACK_IMPORTED_MODULE_2__.mapAttempt((_)=>new URL(_)), effect_Config__WEBPACK_IMPORTED_MODULE_2__.map((url)=>url.href.replace(/\\/$/, \"\")));\n});\nconst UtfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"utfsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"utfs.io\"));\nconst UfsHost = effect_Config__WEBPACK_IMPORTED_MODULE_2__.string(\"ufsHost\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_2__.withDefault(\"ufs.sh\"));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ2dCO0FBQ2hCO0FBQ0w7QUFDK0M7QUFDM0I7O0FBRXZEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0Isd0JBQXdCLDBEQUFzQixRQUFRLHlEQUFxQixLQUFLLDBEQUFzQix3QkFBd0IsOEVBQXlCO0FBQ3ZKLElBQUksS0FBZ0IsTUFBTTtBQUMxQjtBQUNBLEtBQUssSUFBSSx5REFBcUIsaUJBQWlCLCtEQUEyQjtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQywyREFBdUIsY0FBYyxPQUFPLHlEQUFxQjtBQUN2RyxzQkFBc0Isa0RBQWMsZUFBZSxpREFBYSxLQUFLLGtEQUFjLGtDQUFrQyxhQUFvQixtQkFBbUIsOENBQVUsOEJBQThCLHNEQUFrQjtBQUN0TixnQkFBZ0IsaURBQVEsVUFBVSxnRUFBZ0IsT0FBTyxvREFBZ0I7QUFDekUsMEJBQTBCLGlFQUFnQjtBQUMxQztBQUNBLGtIQUFrSCxrREFBa0Q7QUFDcEs7QUFDQSxTQUFTO0FBQ1QsQ0FBQztBQUNELGVBQWUsaURBQWEsZ0JBQWdCLHNEQUFrQixpQ0FBaUMscURBQWlCLG1CQUFtQiw4Q0FBVTtBQUM3SSxrQkFBa0IsOENBQVU7QUFDNUIsWUFBWSxzQkFBc0I7QUFDbEMsK0JBQStCO0FBQy9CLGtCQUFrQixpREFBYSxtQkFBbUIsc0RBQWtCLFlBQVksT0FBTyxHQUFHLFdBQVcsSUFBSSxxREFBaUIsbUJBQW1CLDhDQUFVO0FBQ3ZKLENBQUM7QUFDRCxpQkFBaUIsaURBQWEsa0JBQWtCLHNEQUFrQjtBQUNsRSxnQkFBZ0IsaURBQWEsaUJBQWlCLHNEQUFrQjs7QUFFd0QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENvbmZpZyBmcm9tICdlZmZlY3QvQ29uZmlnJztcbmltcG9ydCAqIGFzIENvbmZpZ1Byb3ZpZGVyIGZyb20gJ2VmZmVjdC9Db25maWdQcm92aWRlcic7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgKiBhcyBTIGZyb20gJ2VmZmVjdC9TY2hlbWEnO1xuaW1wb3J0IHsgZmlsdGVyRGVmaW5lZE9iamVjdFZhbHVlcywgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdUb2tlbiB9IGZyb20gJy4vc2hhcmVkLXNjaGVtYXMuanMnO1xuXG52YXIgdmVyc2lvbiA9IFwiNy41LjJcIjtcblxuLyoqXG4gKiBNZXJnZSBpbiBgaW1wb3J0Lm1ldGEuZW52YCB0byB0aGUgYnVpbHQtaW4gYHByb2Nlc3MuZW52YCBwcm92aWRlclxuICogUHJlZml4IGtleXMgd2l0aCBgVVBMT0FEVEhJTkdfYCBzbyB3ZSBjYW4gcmVmZXJlbmNlIGp1c3QgdGhlIG5hbWUuXG4gKiBAZXhhbXBsZVxuICogcHJvY2Vzcy5lbnYuVVBMT0FEVEhJTkdfVE9LRU4gPSBcImZvb1wiXG4gKiBDb25maWcuc3RyaW5nKFwidG9rZW5cIik7IC8vIENvbmZpZzxcImZvb1wiPlxuICovIGNvbnN0IGVudlByb3ZpZGVyID0gQ29uZmlnUHJvdmlkZXIuZnJvbUVudigpLnBpcGUoQ29uZmlnUHJvdmlkZXIub3JFbHNlKCgpPT5Db25maWdQcm92aWRlci5mcm9tTWFwKG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZmlsdGVyRGVmaW5lZE9iamVjdFZhbHVlcygvLyBmdWNrIHRoaXMgSSBnaXZlIHVwLiBpbXBvcnQubWV0YSBpcyBhIG1pc3Rha2UsIHNvbWVvbmUgZWxzZSBjYW4gZml4IGl0XG4gICAgaW1wb3J0Lm1ldGE/LmVudiA/PyB7fSkpKSwge1xuICAgICAgICBwYXRoRGVsaW06IFwiX1wiXG4gICAgfSkpLCBDb25maWdQcm92aWRlci5uZXN0ZWQoXCJ1cGxvYWR0aGluZ1wiKSwgQ29uZmlnUHJvdmlkZXIuY29uc3RhbnRDYXNlKTtcbi8qKlxuICogQ29uZmlnIHByb3ZpZGVyIHRoYXQgbWVyZ2VzIHRoZSBvcHRpb25zIGZyb20gdGhlIG9iamVjdFxuICogYW5kIGVudmlyb25tZW50IHZhcmlhYmxlcyBwcmVmaXhlZCB3aXRoIGBVUExPQURUSElOR19gLlxuICogQHJlbWFya3MgT3B0aW9ucyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXG4gKi8gY29uc3QgY29uZmlnUHJvdmlkZXIgPSAob3B0aW9ucyk9PkNvbmZpZ1Byb3ZpZGVyLmZyb21Kc29uKG9wdGlvbnMgPz8ge30pLnBpcGUoQ29uZmlnUHJvdmlkZXIub3JFbHNlKCgpPT5lbnZQcm92aWRlcikpO1xuY29uc3QgSXNEZXZlbG9wbWVudCA9IENvbmZpZy5ib29sZWFuKFwiaXNEZXZcIikucGlwZShDb25maWcub3JFbHNlKCgpPT5Db25maWcuc3VjY2VlZCh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiA/IHByb2Nlc3MuZW52Lk5PREVfRU5WIDogdW5kZWZpbmVkKS5waXBlKENvbmZpZy5tYXAoKF8pPT5fID09PSBcImRldmVsb3BtZW50XCIpKSksIENvbmZpZy53aXRoRGVmYXVsdChmYWxzZSkpO1xuY29uc3QgVVRUb2tlbiA9IFMuQ29uZmlnKFwidG9rZW5cIiwgVXBsb2FkVGhpbmdUb2tlbikucGlwZShFZmZlY3QuY2F0Y2hUYWdzKHtcbiAgICBDb25maWdFcnJvcjogKGUpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICBjb2RlOiBlLl9vcCA9PT0gXCJJbnZhbGlkRGF0YVwiID8gXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIiA6IFwiTUlTU0lOR19FTlZcIixcbiAgICAgICAgICAgIG1lc3NhZ2U6IGUuX29wID09PSBcIkludmFsaWREYXRhXCIgPyBcIkludmFsaWQgdG9rZW4uIEEgdG9rZW4gaXMgYSBiYXNlNjQgZW5jb2RlZCBKU09OIG9iamVjdCBtYXRjaGluZyB7IGFwaUtleTogc3RyaW5nLCBhcHBJZDogc3RyaW5nLCByZWdpb25zOiBzdHJpbmdbXSB9LlwiIDogXCJNaXNzaW5nIHRva2VuLiBQbGVhc2Ugc2V0IHRoZSBgVVBMT0FEVEhJTkdfVE9LRU5gIGVudmlyb25tZW50IHZhcmlhYmxlIG9yIHByb3ZpZGUgYSB0b2tlbiBtYW51YWxseSB0aHJvdWdoIGNvbmZpZy5cIixcbiAgICAgICAgICAgIGNhdXNlOiBlXG4gICAgICAgIH0pXG59KSk7XG5jb25zdCBBcGlVcmwgPSBDb25maWcuc3RyaW5nKFwiYXBpVXJsXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KFwiaHR0cHM6Ly9hcGkudXBsb2FkdGhpbmcuY29tXCIpLCBDb25maWcubWFwQXR0ZW1wdCgoXyk9Pm5ldyBVUkwoXykpLCBDb25maWcubWFwKCh1cmwpPT51cmwuaHJlZi5yZXBsYWNlKC9cXC8kLywgXCJcIikpKTtcbmNvbnN0IEluZ2VzdFVybCA9IEVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgIGNvbnN0IHsgcmVnaW9ucywgaW5nZXN0SG9zdCB9ID0geWllbGQqIFVUVG9rZW47XG4gICAgY29uc3QgcmVnaW9uID0gcmVnaW9uc1swXTsgLy8gQ3VycmVudGx5IG9ubHkgc3VwcG9ydCAxIHJlZ2lvbiBwZXIgYXBwXG4gICAgcmV0dXJuIHlpZWxkKiBDb25maWcuc3RyaW5nKFwiaW5nZXN0VXJsXCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KGBodHRwczovLyR7cmVnaW9ufS4ke2luZ2VzdEhvc3R9YCksIENvbmZpZy5tYXBBdHRlbXB0KChfKT0+bmV3IFVSTChfKSksIENvbmZpZy5tYXAoKHVybCk9PnVybC5ocmVmLnJlcGxhY2UoL1xcLyQvLCBcIlwiKSkpO1xufSk7XG5jb25zdCBVdGZzSG9zdCA9IENvbmZpZy5zdHJpbmcoXCJ1dGZzSG9zdFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChcInV0ZnMuaW9cIikpO1xuY29uc3QgVWZzSG9zdCA9IENvbmZpZy5zdHJpbmcoXCJ1ZnNIb3N0XCIpLnBpcGUoQ29uZmlnLndpdGhEZWZhdWx0KFwidWZzLnNoXCIpKTtcblxuZXhwb3J0IHsgQXBpVXJsLCBJbmdlc3RVcmwsIElzRGV2ZWxvcG1lbnQsIHZlcnNpb24gYXMgVVBMT0FEVEhJTkdfVkVSU0lPTiwgVVRUb2tlbiwgVWZzSG9zdCwgVXRmc0hvc3QsIGNvbmZpZ1Byb3ZpZGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js":
/*!*****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/deprecations.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logDeprecationWarning: () => (/* binding */ logDeprecationWarning)\n/* harmony export */ });\nconst logDeprecationWarning = (message)=>{\n    // eslint-disable-next-line no-console\n    console.warn(`⚠️ [uploadthing][deprecated] ${message}`);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZGVwcmVjYXRpb25zLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0EsaURBQWlELFFBQVE7QUFDekQ7O0FBRWlDIiwic291cmNlcyI6WyIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3Qvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL2RlcHJlY2F0aW9ucy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBsb2dEZXByZWNhdGlvbldhcm5pbmcgPSAobWVzc2FnZSk9PntcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgIGNvbnNvbGUud2Fybihg4pqg77iPIFt1cGxvYWR0aGluZ11bZGVwcmVjYXRlZF0gJHttZXNzYWdlfWApO1xufTtcblxuZXhwb3J0IHsgbG9nRGVwcmVjYXRpb25XYXJuaW5nIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js":
/*!********************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/error-formatter.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defaultErrorFormatter: () => (/* binding */ defaultErrorFormatter),\n/* harmony export */   formatError: () => (/* binding */ formatError)\n/* harmony export */ });\nfunction defaultErrorFormatter(error) {\n    return {\n        message: error.message\n    };\n}\nfunction formatError(error, router) {\n    const firstSlug = Object.keys(router)[0];\n    const errorFormatter = firstSlug ? router[firstSlug]?.errorFormatter ?? defaultErrorFormatter : defaultErrorFormatter;\n    return errorFormatter(error);\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvZXJyb3ItZm9ybWF0dGVyLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThDIiwic291cmNlcyI6WyIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3Qvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL2Vycm9yLWZvcm1hdHRlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgfTtcbn1cbmZ1bmN0aW9uIGZvcm1hdEVycm9yKGVycm9yLCByb3V0ZXIpIHtcbiAgICBjb25zdCBmaXJzdFNsdWcgPSBPYmplY3Qua2V5cyhyb3V0ZXIpWzBdO1xuICAgIGNvbnN0IGVycm9yRm9ybWF0dGVyID0gZmlyc3RTbHVnID8gcm91dGVyW2ZpcnN0U2x1Z10/LmVycm9yRm9ybWF0dGVyID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlciA6IGRlZmF1bHRFcnJvckZvcm1hdHRlcjtcbiAgICByZXR1cm4gZXJyb3JGb3JtYXR0ZXIoZXJyb3IpO1xufVxuXG5leHBvcnQgeyBkZWZhdWx0RXJyb3JGb3JtYXR0ZXIsIGZvcm1hdEVycm9yIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/handler.js":
/*!************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/handler.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AdapterArguments: () => (/* binding */ AdapterArguments),\n/* harmony export */   createRequestHandler: () => (/* binding */ createRequestHandler),\n/* harmony export */   makeAdapterHandler: () => (/* binding */ makeAdapterHandler)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpApp.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerResponse.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpServerRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpRouter.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientResponse.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpBody.js\");\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_Context__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Context */ \"(rsc)/./node_modules/effect/dist/esm/Context.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Match__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Match */ \"(rsc)/./node_modules/effect/dist/esm/Match.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _deprecations_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./deprecations.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\");\n/* harmony import */ var _error_formatter_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./error-formatter.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\");\n/* harmony import */ var _jsonl_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./jsonl.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n/* harmony import */ var _parser_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./parser.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/parser.js\");\n/* harmony import */ var _route_config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./route-config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\");\n/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./runtime.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\");\n/* harmony import */ var _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./shared-schemas.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\");\n/* harmony import */ var _types_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar version = \"7.5.2\";\n\nclass AdapterArguments extends effect_Context__WEBPACK_IMPORTED_MODULE_0__.Tag(\"uploadthing/AdapterArguments\")() {\n}\nconst makeAdapterHandler = (makeAdapterArgs, toRequest, opts, beAdapter)=>{\n    const managed = (0,_runtime_js__WEBPACK_IMPORTED_MODULE_1__.makeRuntime)(opts.config?.fetch, opts.config);\n    const handle = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.promise(()=>managed.runtime().then(_effect_platform__WEBPACK_IMPORTED_MODULE_3__.toWebHandlerRuntime));\n    const app = (...args)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.promise(()=>managed.runPromise(createRequestHandler(opts, beAdapter))), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.provideServiceEffect(AdapterArguments, makeAdapterArgs(...args)));\n    return async (...args)=>{\n        const result = await handle.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ap(app(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ap(toRequest(...args)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"requestHandler\"), managed.runPromise);\n        return result;\n    };\n};\nconst createRequestHandler = (opts, beAdapter)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const isDevelopment = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IsDevelopment;\n        const routerConfig = yield* (0,_route_config_js__WEBPACK_IMPORTED_MODULE_5__.extractRouterConfig)(opts.router);\n        const handleDaemon = (()=>{\n            if (opts.config?.handleDaemonPromise) {\n                return opts.config.handleDaemonPromise;\n            }\n            return isDevelopment ? \"void\" : \"await\";\n        })();\n        if (isDevelopment && handleDaemon === \"await\") {\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"INVALID_SERVER_CONFIG\",\n                message: 'handleDaemonPromise: \"await\" is forbidden in development.'\n            });\n        }\n        const GET = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json(routerConfig);\n        });\n        const POST = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            const { \"uploadthing-hook\": uploadthingHook, \"x-uploadthing-package\": fePackage, \"x-uploadthing-version\": clientVersion } = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaHeaders(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                \"uploadthing-hook\": _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadThingHook.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optional),\n                \"x-uploadthing-package\": effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optionalWith({\n                    default: ()=>\"unknown\"\n                })),\n                \"x-uploadthing-version\": effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optionalWith({\n                    default: ()=>version\n                }))\n            }));\n            if (clientVersion !== version) {\n                const serverVersion = version;\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logWarning(\"Client version mismatch. Things may not work as expected, please sync your versions to ensure compatibility.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs({\n                    clientVersion,\n                    serverVersion\n                }));\n            }\n            const { slug, actionType } = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_11__.schemaParams(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                actionType: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.ActionType.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.optional),\n                slug: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String\n            }));\n            const uploadable = opts.router[slug];\n            if (!uploadable) {\n                const msg = `No file route found for slug ${slug}`;\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(msg);\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"NOT_FOUND\",\n                    message: msg\n                });\n            }\n            const { body, fiber } = yield* effect_Match__WEBPACK_IMPORTED_MODULE_12__.value({\n                actionType,\n                uploadthingHook\n            }).pipe(effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: \"upload\",\n                uploadthingHook: undefined\n            }, ()=>handleUploadAction({\n                    uploadable,\n                    fePackage,\n                    beAdapter,\n                    slug\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: undefined,\n                uploadthingHook: \"callback\"\n            }, ()=>handleCallbackRequest({\n                    uploadable,\n                    fePackage,\n                    beAdapter\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.when({\n                actionType: undefined,\n                uploadthingHook: \"error\"\n            }, ()=>handleErrorRequest({\n                    uploadable\n                })), effect_Match__WEBPACK_IMPORTED_MODULE_12__.orElse(()=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.succeed({\n                    body: null,\n                    fiber: null\n                })));\n            if (fiber) {\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Running fiber as daemon\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"handleDaemon\", handleDaemon));\n                if (handleDaemon === \"void\") ; else if (handleDaemon === \"await\") {\n                    yield* fiber.await;\n                } else if (typeof handleDaemon === \"function\") {\n                    handleDaemon(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.runPromise(fiber.await));\n                }\n            }\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Sending response\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"body\", body));\n            return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json(body);\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTags({\n            ParseError: (e)=>_effect_platform__WEBPACK_IMPORTED_MODULE_7__.json((0,_error_formatter_js__WEBPACK_IMPORTED_MODULE_13__.formatError)(new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid input\",\n                    cause: e.message\n                }), opts.router), {\n                    status: 400\n                }),\n            UploadThingError: (e)=>// eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n                _effect_platform__WEBPACK_IMPORTED_MODULE_7__.json((0,_error_formatter_js__WEBPACK_IMPORTED_MODULE_13__.formatError)(e, opts.router), {\n                    status: (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.getStatusCodeFromError)(e)\n                })\n        }));\n        const appendResponseHeaders = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map(_effect_platform__WEBPACK_IMPORTED_MODULE_7__.setHeader(\"x-uploadthing-version\", version));\n        return _effect_platform__WEBPACK_IMPORTED_MODULE_11__.empty.pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_11__.get(\"*\", GET), _effect_platform__WEBPACK_IMPORTED_MODULE_11__.post(\"*\", POST), _effect_platform__WEBPACK_IMPORTED_MODULE_11__.use(appendResponseHeaders));\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"createRequestHandler\"));\nconst handleErrorRequest = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { uploadable } = opts;\n        const request = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const { apiKey } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.verifySignature)((yield* request.text), request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(`Signature verified: ${verified}`);\n        if (!verified) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Invalid signature\");\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid signature\"\n            });\n        }\n        const requestInput = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n            fileKey: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n            error: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String\n        }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling error callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", requestInput));\n        const adapterArgs = yield* AdapterArguments;\n        const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: async ()=>uploadable.onUploadError({\n                    ...adapterArgs,\n                    error: new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                        code: \"UPLOAD_FAILED\",\n                        message: `Upload failed for ${requestInput.fileKey}: ${requestInput.error}`\n                    }),\n                    fileKey: requestInput.fileKey\n                }),\n            catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to run onUploadError\",\n                    cause: error\n                })\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapError((error)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Failed to run onUploadError. You probably shouldn't be throwing errors here.\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"error\", error)))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        return {\n            body: null,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleErrorRequest\"));\nconst handleCallbackRequest = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { uploadable, fePackage, beAdapter } = opts;\n        const request = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const { apiKey } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const verified = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.verifySignature)((yield* request.text), request.headers[\"x-uploadthing-signature\"] ?? null, apiKey);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(`Signature verified: ${verified}`);\n        if (!verified) {\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Invalid signature\");\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid signature\"\n            });\n        }\n        const requestInput = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n            status: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n            file: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadedFileData,\n            metadata: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Record({\n                key: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.String,\n                value: effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Unknown\n            })\n        }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling callback request with input:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", requestInput));\n        /**\n     * Run `.onUploadComplete` as a daemon to prevent the\n     * request from UT to potentially timeout.\n     */ const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n            const adapterArgs = yield* AdapterArguments;\n            const serverData = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n                try: async ()=>uploadable.onUploadComplete({\n                        ...adapterArgs,\n                        file: {\n                            ...requestInput.file,\n                            get url () {\n                                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_14__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                                return requestInput.file.url;\n                            },\n                            get appUrl () {\n                                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_14__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                                return requestInput.file.appUrl;\n                            }\n                        },\n                        metadata: requestInput.metadata\n                    }),\n                catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                        code: \"INTERNAL_SERVER_ERROR\",\n                        message: \"Failed to run onUploadComplete. You probably shouldn't be throwing errors here.\",\n                        cause: error\n                    })\n            });\n            const payload = {\n                fileKey: requestInput.file.key,\n                callbackData: serverData ?? null\n            };\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"'onUploadComplete' callback finished. Sending response to UploadThing:\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"callbackData\", payload));\n            const baseUrl = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IngestUrl;\n            const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_15__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_15__.filterStatusOk);\n            yield* _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(`/callback-result`).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(baseUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n                \"x-uploadthing-version\": version,\n                \"x-uploadthing-be-adapter\": beAdapter,\n                \"x-uploadthing-fe-package\": fePackage\n            }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson(payload), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapError((0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register callback result\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_19__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.CallbackResultResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tap(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.log(\"Sent callback result to UploadThing\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped);\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        return {\n            body: null,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleCallbackRequest\"));\nconst runRouteMiddleware = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const { json: { files, input }, uploadable } = opts;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Running middleware\");\n        const adapterArgs = yield* AdapterArguments;\n        const metadata = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: async ()=>uploadable.middleware({\n                    ...adapterArgs,\n                    input,\n                    files\n                }),\n            catch: (error)=>error instanceof _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError ? error : new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"INTERNAL_SERVER_ERROR\",\n                    message: \"Failed to run middleware\",\n                    cause: error\n                })\n        });\n        if (metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles] && metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles].length !== files.length) {\n            const msg = `Expected files override to have the same length as original files, got ${metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles].length} but expected ${files.length}`;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(msg);\n            return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Files override must have the same length as files\",\n                cause: msg\n            });\n        }\n        // Attach customIds from middleware to the files\n        const filesWithCustomIds = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(files, (file, idx)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n                const theirs = metadata[_types_js__WEBPACK_IMPORTED_MODULE_20__.UTFiles]?.[idx];\n                if (theirs && theirs.size !== file.size) {\n                    yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logWarning(\"File size mismatch. Reverting to original size\");\n                }\n                return {\n                    name: theirs?.name ?? file.name,\n                    size: file.size,\n                    type: file.type,\n                    customId: theirs?.customId,\n                    lastModified: theirs?.lastModified ?? Date.now()\n                };\n            }));\n        return {\n            metadata,\n            filesWithCustomIds\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"runRouteMiddleware\"));\nconst handleUploadAction = (opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_15__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_15__.filterStatusOk);\n        const { uploadable, fePackage, beAdapter, slug } = opts;\n        const json = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadActionPayload);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Handling upload request\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"json\", json));\n        // validate the input\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Parsing user input\");\n        const parsedInput = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tryPromise({\n            try: ()=>(0,_parser_js__WEBPACK_IMPORTED_MODULE_21__.getParseFn)(uploadable.inputParser)(json.input),\n            catch: (error)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid input\",\n                    cause: error\n                })\n        });\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Input parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"input\", parsedInput));\n        const { metadata, filesWithCustomIds } = yield* runRouteMiddleware({\n            json: {\n                input: parsedInput,\n                files: json.files\n            },\n            uploadable\n        });\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Parsing route config\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"routerConfig\", uploadable.routerConfig));\n        const parsedConfig = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.fillInputRouteConfig)(uploadable.routerConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"InvalidRouteConfig\", (err)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: \"Invalid route config\",\n                cause: err\n            })));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Route config parsed successfully\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"routeConfig\", parsedConfig));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Validating files meet the config requirements\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"files\", json.files));\n        yield* (0,_route_config_js__WEBPACK_IMPORTED_MODULE_5__.assertFilesMeetConfig)(json.files, parsedConfig).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.mapError((e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.UploadThingError({\n                code: \"BAD_REQUEST\",\n                message: `Invalid config: ${e._tag}`,\n                cause: \"reason\" in e ? e.reason : e.message\n            })));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Files validated.\");\n        const fileUploadRequests = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(filesWithCustomIds, (file)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.objectKeys)(parsedConfig)), (type)=>({\n                    name: file.name,\n                    size: file.size,\n                    type: file.type || type,\n                    lastModified: file.lastModified,\n                    customId: file.customId,\n                    contentDisposition: parsedConfig[type]?.contentDisposition ?? \"inline\",\n                    acl: parsedConfig[type]?.acl\n                }))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTags({\n            /** Shouldn't happen since config is validated above so just dying is fine I think */ InvalidFileType: (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.die(e),\n            UnknownFileType: (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.die(e)\n        }));\n        const routeOptions = uploadable.routeOptions;\n        const { apiKey, appId } = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.UTToken;\n        const ingestUrl = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IngestUrl;\n        const isDev = yield* _config_js__WEBPACK_IMPORTED_MODULE_4__.IsDevelopment;\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logDebug(\"Generating presigned URLs\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"fileUploadRequests\", fileUploadRequests), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"ingestUrl\", ingestUrl));\n        const presignedUrls = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach(fileUploadRequests, (file)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n                const key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateKey)(file, appId, routeOptions.getFileHashParts);\n                const url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_6__.generateSignedURL)(`${ingestUrl}/${key}`, apiKey, {\n                    ttlInSeconds: routeOptions.presignedURLTTL,\n                    data: {\n                        \"x-ut-identifier\": appId,\n                        \"x-ut-file-name\": file.name,\n                        \"x-ut-file-size\": file.size,\n                        \"x-ut-file-type\": file.type,\n                        \"x-ut-slug\": slug,\n                        \"x-ut-custom-id\": file.customId,\n                        \"x-ut-content-disposition\": file.contentDisposition,\n                        \"x-ut-acl\": file.acl\n                    }\n                });\n                return {\n                    url,\n                    key\n                };\n            }), {\n            concurrency: \"unbounded\"\n        });\n        const serverReq = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.HttpServerRequest;\n        const requestUrl = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_8__.toURL(serverReq);\n        const devHookRequest = yield* effect_Config__WEBPACK_IMPORTED_MODULE_22__.string(\"callbackUrl\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_22__.withDefault(requestUrl.origin + requestUrl.pathname), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((url)=>_effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.appendUrlParam(\"slug\", slug))));\n        const metadataRequest = _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(\"/route-metadata\").pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(ingestUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n            \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n            \"x-uploadthing-version\": version,\n            \"x-uploadthing-be-adapter\": beAdapter,\n            \"x-uploadthing-fe-package\": fePackage\n        }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson({\n            fileKeys: presignedUrls.map(({ key })=>key),\n            metadata: metadata,\n            isDev,\n            callbackUrl: devHookRequest.url,\n            callbackSlug: slug,\n            awaitServerData: routeOptions.awaitServerData ?? true\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute));\n        const handleDevStreamError = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.fn(\"handleDevStreamError\")(function*(err, chunk) {\n            const schema = effect_Schema__WEBPACK_IMPORTED_MODULE_9__.parseJson(effect_Schema__WEBPACK_IMPORTED_MODULE_9__.Struct({\n                file: _shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.UploadedFileData\n            }));\n            const parsedChunk = yield* effect_Schema__WEBPACK_IMPORTED_MODULE_9__.decodeUnknown(schema)(chunk);\n            const key = parsedChunk.file.key;\n            yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Failed to forward callback request from dev stream\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs({\n                fileKey: key,\n                error: err.message\n            }));\n            const httpResponse = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_16__.post(\"/callback-result\").pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.prependUrl(ingestUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_17__.value(apiKey),\n                \"x-uploadthing-version\": version,\n                \"x-uploadthing-be-adapter\": beAdapter,\n                \"x-uploadthing-fe-package\": fePackage\n            }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.bodyJson({\n                fileKey: key,\n                error: `Failed to forward callback request from dev stream: ${err.message}`\n            }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(httpClient.execute));\n            yield* (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Reported callback error to UploadThing\")(httpResponse);\n        });\n        // Send metadata to UT server (non blocking as a daemon)\n        // In dev, keep the stream open and simulate the callback requests as\n        // files complete uploading\n        const fiber = yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__[\"if\"](isDev, {\n            onTrue: ()=>metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapBoth({\n                    onSuccess: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Registered metadata\", {\n                        mixin: \"None\"\n                    }),\n                    onFailure: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register metadata\")\n                }), _effect_platform__WEBPACK_IMPORTED_MODULE_23__.stream, (0,_jsonl_js__WEBPACK_IMPORTED_MODULE_24__.handleJsonLineStream)(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.MetadataFetchStreamPart, (chunk)=>devHookRequest.pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_16__.setHeaders({\n                        \"uploadthing-hook\": chunk.hook,\n                        \"x-uploadthing-signature\": chunk.signature\n                    }), _effect_platform__WEBPACK_IMPORTED_MODULE_16__.setBody(_effect_platform__WEBPACK_IMPORTED_MODULE_25__.text(chunk.payload, \"application/json\")), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tap((0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Successfully forwarded callback request from dev stream\")), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"ResponseError\", (err)=>handleDevStreamError(err, chunk.payload)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.asVoid, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.ignoreLogged, effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped))),\n            onFalse: ()=>metadataRequest.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapBoth({\n                    onSuccess: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientResponse)(\"Registered metadata\"),\n                    onFailure: (0,_logger_js__WEBPACK_IMPORTED_MODULE_18__.logHttpClientError)(\"Failed to register metadata\")\n                }), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_19__.schemaBodyJson(_shared_schemas_js__WEBPACK_IMPORTED_MODULE_10__.MetadataFetchResponse)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.scoped)\n        }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forkDaemon);\n        const presigneds = presignedUrls.map((p, i)=>({\n                url: p.url,\n                key: p.key,\n                name: fileUploadRequests[i].name,\n                customId: fileUploadRequests[i].customId ?? null\n            }));\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logInfo(\"Sending presigned URLs to client\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"presignedUrls\", presigneds));\n        return {\n            body: presigneds,\n            fiber\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.withLogSpan(\"handleUploadAction\"));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvaGFuZGxlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUEySjtBQUNuSDtBQUNFO0FBQ0Y7QUFDRjtBQUNNO0FBQ0o7QUFDeUk7QUFDakg7QUFDTjtBQUNQO0FBQ0Q7QUFDc0I7QUFDL0I7QUFDc0M7QUFDcEM7QUFDc0k7QUFDNUk7O0FBRXJDOztBQUVBLCtCQUErQiwrQ0FBVztBQUMxQztBQUNBO0FBQ0Esb0JBQW9CLHdEQUFXO0FBQy9CLG1CQUFtQixrREFBYyw0QkFBNEIsaUVBQTJCO0FBQ3hGLDJCQUEyQiw4Q0FBVSxDQUFDLGtEQUFjLGlFQUFpRSwrREFBMkI7QUFDaEo7QUFDQSx5Q0FBeUMsNkNBQVMsZ0JBQWdCLDZDQUFTLHNCQUFzQixzREFBa0I7QUFDbkg7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdELDhDQUFVO0FBQzFELHFDQUFxQyxxREFBYTtBQUNsRCxvQ0FBb0MscUVBQW1CO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSw4QkFBOEIsaUVBQWdCO0FBQzlDO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxvQkFBb0IsOENBQVU7QUFDOUIsMEJBQTBCLGtEQUF1QjtBQUNqRCxTQUFTO0FBQ1QscUJBQXFCLDhDQUFVO0FBQy9CLG9CQUFvQixrSEFBa0gsU0FBUywyREFBK0IsQ0FBQyxpREFBYTtBQUM1TCxvQ0FBb0MsZ0VBQWUsTUFBTSxtREFBZTtBQUN4RSx5Q0FBeUMsaURBQWEsTUFBTSx1REFBbUI7QUFDL0U7QUFDQSxpQkFBaUI7QUFDakIseUNBQXlDLGlEQUFhLE1BQU0sdURBQW1CO0FBQy9FO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0EsdUJBQXVCLHFEQUFpQixzSEFBc0gsdURBQW1CO0FBQ2pMO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxvQkFBb0Is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O0FBQ0EsbUJBQW1CLG1EQUFlLDREQUE0RCx1REFBbUI7QUFDakg7QUFDQTtBQUNBLGFBQWE7QUFDYix3Q0FBd0MsbURBQXNCLDBCQUEwQix5REFBNEIsYUFBYSx5REFBNEI7QUFDN0oseUNBQXlDLG1EQUFjO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLGFBQWEsR0FBRyx1REFBMEI7QUFDMUM7QUFDQSw4RUFBOEUsWUFBWTtBQUMxRixhQUFhLEdBQUcsa0RBQWM7QUFDOUIsbUJBQW1CLGtFQUFxQjtBQUN4QyxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLGdEQUFTO0FBQ3RDLDZDQUE2QyxrREFBYztBQUMzRCwrQkFBK0Isa0VBQXFCO0FBQ3BEO0FBQ0EscUJBQXFCO0FBQ3JCLCtCQUErQiwrREFBa0I7QUFDakQsaUJBQWlCLEdBQUcscURBQXlCLEVBQUUsZ0VBQW9CLENBQUMsd0VBQXVCLCtCQUErQix5REFBNEI7QUFDdEo7QUFDQTtBQUNBLHFCQUFxQixHQUFHLHNEQUF5QixDQUFDLG1EQUFhLDBEQUEwRCw4Q0FBVSxDQUFDLGtFQUFxQiw4REFBOEQsbURBQWUsb0VBQW9FLHVEQUFtQixTQUFTLGlEQUFhLEVBQUUsdURBQW1CLEVBQUUsaURBQWE7QUFDdlgsOENBQThDLGtEQUFjO0FBQzVELCtCQUErQixrRUFBcUI7QUFDcEQsK0JBQStCLCtEQUFrQjtBQUNqRCxpQkFBaUIsR0FBRyxrREFBYyxDQUFDLDZEQUFpQyxDQUFDLHNFQUFxQixJQUFJLGlEQUFhO0FBQzNHLFNBQVMsT0FBTyxxREFBaUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixlQUFlLGtEQUFjLDBDQUEwQyx1REFBbUI7QUFDMUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLE9BQU8sc0RBQWtCOztBQUV3QyIsInNvdXJjZXMiOlsiL1VzZXJzL2thcnRoaWtuYWRhci9EZXNrdG9wL3BkZnN0L25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC9oYW5kbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBBcHAsIEh0dHBTZXJ2ZXJSZXNwb25zZSwgSHR0cFNlcnZlclJlcXVlc3QsIEh0dHBSb3V0ZXIsIEh0dHBDbGllbnQsIEh0dHBDbGllbnRSZXF1ZXN0LCBIdHRwQ2xpZW50UmVzcG9uc2UsIEh0dHBCb2R5IH0gZnJvbSAnQGVmZmVjdC9wbGF0Zm9ybSc7XG5pbXBvcnQgKiBhcyBDb25maWcgZnJvbSAnZWZmZWN0L0NvbmZpZyc7XG5pbXBvcnQgKiBhcyBDb250ZXh0IGZyb20gJ2VmZmVjdC9Db250ZXh0JztcbmltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCAqIGFzIE1hdGNoIGZyb20gJ2VmZmVjdC9NYXRjaCc7XG5pbXBvcnQgKiBhcyBSZWRhY3RlZCBmcm9tICdlZmZlY3QvUmVkYWN0ZWQnO1xuaW1wb3J0ICogYXMgU2NoZW1hIGZyb20gJ2VmZmVjdC9TY2hlbWEnO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciwgZ2V0U3RhdHVzQ29kZUZyb21FcnJvciwgdmVyaWZ5U2lnbmF0dXJlLCBmaWxsSW5wdXRSb3V0ZUNvbmZpZywgbWF0Y2hGaWxlVHlwZSwgb2JqZWN0S2V5cywgZ2VuZXJhdGVLZXksIGdlbmVyYXRlU2lnbmVkVVJMIH0gZnJvbSAnQHVwbG9hZHRoaW5nL3NoYXJlZCc7XG5pbXBvcnQgeyBJc0RldmVsb3BtZW50LCBVVFRva2VuLCBJbmdlc3RVcmwgfSBmcm9tICcuL2NvbmZpZy5qcyc7XG5pbXBvcnQgeyBsb2dEZXByZWNhdGlvbldhcm5pbmcgfSBmcm9tICcuL2RlcHJlY2F0aW9ucy5qcyc7XG5pbXBvcnQgeyBmb3JtYXRFcnJvciB9IGZyb20gJy4vZXJyb3ItZm9ybWF0dGVyLmpzJztcbmltcG9ydCB7IGhhbmRsZUpzb25MaW5lU3RyZWFtIH0gZnJvbSAnLi9qc29ubC5qcyc7XG5pbXBvcnQgeyBsb2dIdHRwQ2xpZW50RXJyb3IsIGxvZ0h0dHBDbGllbnRSZXNwb25zZSB9IGZyb20gJy4vbG9nZ2VyLmpzJztcbmltcG9ydCB7IGdldFBhcnNlRm4gfSBmcm9tICcuL3BhcnNlci5qcyc7XG5pbXBvcnQgeyBleHRyYWN0Um91dGVyQ29uZmlnLCBhc3NlcnRGaWxlc01lZXRDb25maWcgfSBmcm9tICcuL3JvdXRlLWNvbmZpZy5qcyc7XG5pbXBvcnQgeyBtYWtlUnVudGltZSB9IGZyb20gJy4vcnVudGltZS5qcyc7XG5pbXBvcnQgeyBVcGxvYWRUaGluZ0hvb2ssIEFjdGlvblR5cGUsIFVwbG9hZGVkRmlsZURhdGEsIENhbGxiYWNrUmVzdWx0UmVzcG9uc2UsIFVwbG9hZEFjdGlvblBheWxvYWQsIE1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0LCBNZXRhZGF0YUZldGNoUmVzcG9uc2UgfSBmcm9tICcuL3NoYXJlZC1zY2hlbWFzLmpzJztcbmltcG9ydCB7IFVURmlsZXMgfSBmcm9tICcuL3R5cGVzLmpzJztcblxudmFyIHZlcnNpb24gPSBcIjcuNS4yXCI7XG5cbmNsYXNzIEFkYXB0ZXJBcmd1bWVudHMgZXh0ZW5kcyBDb250ZXh0LlRhZyhcInVwbG9hZHRoaW5nL0FkYXB0ZXJBcmd1bWVudHNcIikoKSB7XG59XG5jb25zdCBtYWtlQWRhcHRlckhhbmRsZXIgPSAobWFrZUFkYXB0ZXJBcmdzLCB0b1JlcXVlc3QsIG9wdHMsIGJlQWRhcHRlcik9PntcbiAgICBjb25zdCBtYW5hZ2VkID0gbWFrZVJ1bnRpbWUob3B0cy5jb25maWc/LmZldGNoLCBvcHRzLmNvbmZpZyk7XG4gICAgY29uc3QgaGFuZGxlID0gRWZmZWN0LnByb21pc2UoKCk9Pm1hbmFnZWQucnVudGltZSgpLnRoZW4oSHR0cEFwcC50b1dlYkhhbmRsZXJSdW50aW1lKSk7XG4gICAgY29uc3QgYXBwID0gKC4uLmFyZ3MpPT5FZmZlY3QubWFwKEVmZmVjdC5wcm9taXNlKCgpPT5tYW5hZ2VkLnJ1blByb21pc2UoY3JlYXRlUmVxdWVzdEhhbmRsZXIob3B0cywgYmVBZGFwdGVyKSkpLCBFZmZlY3QucHJvdmlkZVNlcnZpY2VFZmZlY3QoQWRhcHRlckFyZ3VtZW50cywgbWFrZUFkYXB0ZXJBcmdzKC4uLmFyZ3MpKSk7XG4gICAgcmV0dXJuIGFzeW5jICguLi5hcmdzKT0+e1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBoYW5kbGUucGlwZShFZmZlY3QuYXAoYXBwKC4uLmFyZ3MpKSwgRWZmZWN0LmFwKHRvUmVxdWVzdCguLi5hcmdzKSksIEVmZmVjdC53aXRoTG9nU3BhbihcInJlcXVlc3RIYW5kbGVyXCIpLCBtYW5hZ2VkLnJ1blByb21pc2UpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG59O1xuY29uc3QgY3JlYXRlUmVxdWVzdEhhbmRsZXIgPSAob3B0cywgYmVBZGFwdGVyKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IGlzRGV2ZWxvcG1lbnQgPSB5aWVsZCogSXNEZXZlbG9wbWVudDtcbiAgICAgICAgY29uc3Qgcm91dGVyQ29uZmlnID0geWllbGQqIGV4dHJhY3RSb3V0ZXJDb25maWcob3B0cy5yb3V0ZXIpO1xuICAgICAgICBjb25zdCBoYW5kbGVEYWVtb24gPSAoKCk9PntcbiAgICAgICAgICAgIGlmIChvcHRzLmNvbmZpZz8uaGFuZGxlRGFlbW9uUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcHRzLmNvbmZpZy5oYW5kbGVEYWVtb25Qcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlzRGV2ZWxvcG1lbnQgPyBcInZvaWRcIiA6IFwiYXdhaXRcIjtcbiAgICAgICAgfSkoKTtcbiAgICAgICAgaWYgKGlzRGV2ZWxvcG1lbnQgJiYgaGFuZGxlRGFlbW9uID09PSBcImF3YWl0XCIpIHtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiSU5WQUxJRF9TRVJWRVJfQ09ORklHXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2hhbmRsZURhZW1vblByb21pc2U6IFwiYXdhaXRcIiBpcyBmb3JiaWRkZW4gaW4gZGV2ZWxvcG1lbnQuJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgR0VUID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIEh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKHJvdXRlckNvbmZpZyk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBQT1NUID0gRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICBjb25zdCB7IFwidXBsb2FkdGhpbmctaG9va1wiOiB1cGxvYWR0aGluZ0hvb2ssIFwieC11cGxvYWR0aGluZy1wYWNrYWdlXCI6IGZlUGFja2FnZSwgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogY2xpZW50VmVyc2lvbiB9ID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnNjaGVtYUhlYWRlcnMoU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgXCJ1cGxvYWR0aGluZy1ob29rXCI6IFVwbG9hZFRoaW5nSG9vay5waXBlKFNjaGVtYS5vcHRpb25hbCksXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXBhY2thZ2VcIjogU2NoZW1hLlN0cmluZy5waXBlKFNjaGVtYS5vcHRpb25hbFdpdGgoe1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKT0+XCJ1bmtub3duXCJcbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogU2NoZW1hLlN0cmluZy5waXBlKFNjaGVtYS5vcHRpb25hbFdpdGgoe1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAoKT0+dmVyc2lvblxuICAgICAgICAgICAgICAgIH0pKVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgaWYgKGNsaWVudFZlcnNpb24gIT09IHZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2ZXJWZXJzaW9uID0gdmVyc2lvbjtcbiAgICAgICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ1dhcm5pbmcoXCJDbGllbnQgdmVyc2lvbiBtaXNtYXRjaC4gVGhpbmdzIG1heSBub3Qgd29yayBhcyBleHBlY3RlZCwgcGxlYXNlIHN5bmMgeW91ciB2ZXJzaW9ucyB0byBlbnN1cmUgY29tcGF0aWJpbGl0eS5cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKHtcbiAgICAgICAgICAgICAgICAgICAgY2xpZW50VmVyc2lvbixcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVmVyc2lvblxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHsgc2x1ZywgYWN0aW9uVHlwZSB9ID0geWllbGQqIEh0dHBSb3V0ZXIuc2NoZW1hUGFyYW1zKFNjaGVtYS5TdHJ1Y3Qoe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGU6IEFjdGlvblR5cGUucGlwZShTY2hlbWEub3B0aW9uYWwpLFxuICAgICAgICAgICAgICAgIHNsdWc6IFNjaGVtYS5TdHJpbmdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHVwbG9hZGFibGUgPSBvcHRzLnJvdXRlcltzbHVnXTtcbiAgICAgICAgICAgIGlmICghdXBsb2FkYWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1zZyA9IGBObyBmaWxlIHJvdXRlIGZvdW5kIGZvciBzbHVnICR7c2x1Z31gO1xuICAgICAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IobXNnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJOT1RfRk9VTkRcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB7IGJvZHksIGZpYmVyIH0gPSB5aWVsZCogTWF0Y2gudmFsdWUoe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGUsXG4gICAgICAgICAgICAgICAgdXBsb2FkdGhpbmdIb29rXG4gICAgICAgICAgICB9KS5waXBlKE1hdGNoLndoZW4oe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGU6IFwidXBsb2FkXCIsXG4gICAgICAgICAgICAgICAgdXBsb2FkdGhpbmdIb29rOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sICgpPT5oYW5kbGVVcGxvYWRBY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICB1cGxvYWRhYmxlLFxuICAgICAgICAgICAgICAgICAgICBmZVBhY2thZ2UsXG4gICAgICAgICAgICAgICAgICAgIGJlQWRhcHRlcixcbiAgICAgICAgICAgICAgICAgICAgc2x1Z1xuICAgICAgICAgICAgICAgIH0pKSwgTWF0Y2gud2hlbih7XG4gICAgICAgICAgICAgICAgYWN0aW9uVHlwZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHVwbG9hZHRoaW5nSG9vazogXCJjYWxsYmFja1wiXG4gICAgICAgICAgICB9LCAoKT0+aGFuZGxlQ2FsbGJhY2tSZXF1ZXN0KHtcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkYWJsZSxcbiAgICAgICAgICAgICAgICAgICAgZmVQYWNrYWdlLFxuICAgICAgICAgICAgICAgICAgICBiZUFkYXB0ZXJcbiAgICAgICAgICAgICAgICB9KSksIE1hdGNoLndoZW4oe1xuICAgICAgICAgICAgICAgIGFjdGlvblR5cGU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB1cGxvYWR0aGluZ0hvb2s6IFwiZXJyb3JcIlxuICAgICAgICAgICAgfSwgKCk9PmhhbmRsZUVycm9yUmVxdWVzdCh7XG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZGFibGVcbiAgICAgICAgICAgICAgICB9KSksIE1hdGNoLm9yRWxzZSgoKT0+RWZmZWN0LnN1Y2NlZWQoe1xuICAgICAgICAgICAgICAgICAgICBib2R5OiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBmaWJlcjogbnVsbFxuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICBpZiAoZmliZXIpIHtcbiAgICAgICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUnVubmluZyBmaWJlciBhcyBkYWVtb25cIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaGFuZGxlRGFlbW9uXCIsIGhhbmRsZURhZW1vbikpO1xuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVEYWVtb24gPT09IFwidm9pZFwiKSA7IGVsc2UgaWYgKGhhbmRsZURhZW1vbiA9PT0gXCJhd2FpdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkKiBmaWJlci5hd2FpdDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBoYW5kbGVEYWVtb24gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVEYWVtb24oRWZmZWN0LnJ1blByb21pc2UoZmliZXIuYXdhaXQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiU2VuZGluZyByZXNwb25zZVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJib2R5XCIsIGJvZHkpKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogSHR0cFNlcnZlclJlc3BvbnNlLmpzb24oYm9keSk7XG4gICAgICAgIH0pLnBpcGUoRWZmZWN0LmNhdGNoVGFncyh7XG4gICAgICAgICAgICBQYXJzZUVycm9yOiAoZSk9Pkh0dHBTZXJ2ZXJSZXNwb25zZS5qc29uKGZvcm1hdEVycm9yKG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgaW5wdXRcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGUubWVzc2FnZVxuICAgICAgICAgICAgICAgIH0pLCBvcHRzLnJvdXRlciksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDBcbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIFVwbG9hZFRoaW5nRXJyb3I6IChlKT0+Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnNhZmUtYXJndW1lbnRcbiAgICAgICAgICAgICAgICBIdHRwU2VydmVyUmVzcG9uc2UuanNvbihmb3JtYXRFcnJvcihlLCBvcHRzLnJvdXRlciksIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiBnZXRTdGF0dXNDb2RlRnJvbUVycm9yKGUpXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBhcHBlbmRSZXNwb25zZUhlYWRlcnMgPSBFZmZlY3QubWFwKEh0dHBTZXJ2ZXJSZXNwb25zZS5zZXRIZWFkZXIoXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIiwgdmVyc2lvbikpO1xuICAgICAgICByZXR1cm4gSHR0cFJvdXRlci5lbXB0eS5waXBlKEh0dHBSb3V0ZXIuZ2V0KFwiKlwiLCBHRVQpLCBIdHRwUm91dGVyLnBvc3QoXCIqXCIsIFBPU1QpLCBIdHRwUm91dGVyLnVzZShhcHBlbmRSZXNwb25zZUhlYWRlcnMpKTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImNyZWF0ZVJlcXVlc3RIYW5kbGVyXCIpKTtcbmNvbnN0IGhhbmRsZUVycm9yUmVxdWVzdCA9IChvcHRzKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsgdXBsb2FkYWJsZSB9ID0gb3B0cztcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5IdHRwU2VydmVyUmVxdWVzdDtcbiAgICAgICAgY29uc3QgeyBhcGlLZXkgfSA9IHlpZWxkKiBVVFRva2VuO1xuICAgICAgICBjb25zdCB2ZXJpZmllZCA9IHlpZWxkKiB2ZXJpZnlTaWduYXR1cmUoKHlpZWxkKiByZXF1ZXN0LnRleHQpLCByZXF1ZXN0LmhlYWRlcnNbXCJ4LXVwbG9hZHRoaW5nLXNpZ25hdHVyZVwiXSA/PyBudWxsLCBhcGlLZXkpO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKGBTaWduYXR1cmUgdmVyaWZpZWQ6ICR7dmVyaWZpZWR9YCk7XG4gICAgICAgIGlmICghdmVyaWZpZWQpIHtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJJbnZhbGlkIHNpZ25hdHVyZVwiKTtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgc2lnbmF0dXJlXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlcXVlc3RJbnB1dCA9IHlpZWxkKiBIdHRwU2VydmVyUmVxdWVzdC5zY2hlbWFCb2R5SnNvbihTY2hlbWEuU3RydWN0KHtcbiAgICAgICAgICAgIGZpbGVLZXk6IFNjaGVtYS5TdHJpbmcsXG4gICAgICAgICAgICBlcnJvcjogU2NoZW1hLlN0cmluZ1xuICAgICAgICB9KSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyBlcnJvciBjYWxsYmFjayByZXF1ZXN0IHdpdGggaW5wdXQ6XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImpzb25cIiwgcmVxdWVzdElucHV0KSk7XG4gICAgICAgIGNvbnN0IGFkYXB0ZXJBcmdzID0geWllbGQqIEFkYXB0ZXJBcmd1bWVudHM7XG4gICAgICAgIGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcbiAgICAgICAgICAgIHRyeTogYXN5bmMgKCk9PnVwbG9hZGFibGUub25VcGxvYWRFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIC4uLmFkYXB0ZXJBcmdzLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVXBsb2FkIGZhaWxlZCBmb3IgJHtyZXF1ZXN0SW5wdXQuZmlsZUtleX06ICR7cmVxdWVzdElucHV0LmVycm9yfWBcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgIGZpbGVLZXk6IHJlcXVlc3RJbnB1dC5maWxlS2V5XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBjYXRjaDogKGVycm9yKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gb25VcGxvYWRFcnJvclwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KS5waXBlKEVmZmVjdC50YXBFcnJvcigoZXJyb3IpPT5FZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkRXJyb3IuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGhlcmUuXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImVycm9yXCIsIGVycm9yKSkpKS5waXBlKEVmZmVjdC5pZ25vcmVMb2dnZWQsIEVmZmVjdC5mb3JrRGFlbW9uKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvZHk6IG51bGwsXG4gICAgICAgICAgICBmaWJlclxuICAgICAgICB9O1xuICAgIH0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlRXJyb3JSZXF1ZXN0XCIpKTtcbmNvbnN0IGhhbmRsZUNhbGxiYWNrUmVxdWVzdCA9IChvcHRzKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIgfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3QuSHR0cFNlcnZlclJlcXVlc3Q7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgY29uc3QgdmVyaWZpZWQgPSB5aWVsZCogdmVyaWZ5U2lnbmF0dXJlKCh5aWVsZCogcmVxdWVzdC50ZXh0KSwgcmVxdWVzdC5oZWFkZXJzW1wieC11cGxvYWR0aGluZy1zaWduYXR1cmVcIl0gPz8gbnVsbCwgYXBpS2V5KTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhgU2lnbmF0dXJlIHZlcmlmaWVkOiAke3ZlcmlmaWVkfWApO1xuICAgICAgICBpZiAoIXZlcmlmaWVkKSB7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKFwiSW52YWxpZCBzaWduYXR1cmVcIik7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNpZ25hdHVyZVwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXF1ZXN0SW5wdXQgPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IFNjaGVtYS5TdHJpbmcsXG4gICAgICAgICAgICBmaWxlOiBVcGxvYWRlZEZpbGVEYXRhLFxuICAgICAgICAgICAgbWV0YWRhdGE6IFNjaGVtYS5SZWNvcmQoe1xuICAgICAgICAgICAgICAgIGtleTogU2NoZW1hLlN0cmluZyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogU2NoZW1hLlVua25vd25cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkhhbmRsaW5nIGNhbGxiYWNrIHJlcXVlc3Qgd2l0aCBpbnB1dDpcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwianNvblwiLCByZXF1ZXN0SW5wdXQpKTtcbiAgICAgICAgLyoqXG4gICAgICogUnVuIGAub25VcGxvYWRDb21wbGV0ZWAgYXMgYSBkYWVtb24gdG8gcHJldmVudCB0aGVcbiAgICAgKiByZXF1ZXN0IGZyb20gVVQgdG8gcG90ZW50aWFsbHkgdGltZW91dC5cbiAgICAgKi8gY29uc3QgZmliZXIgPSB5aWVsZCogRWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgICAgICBjb25zdCBhZGFwdGVyQXJncyA9IHlpZWxkKiBBZGFwdGVyQXJndW1lbnRzO1xuICAgICAgICAgICAgY29uc3Qgc2VydmVyRGF0YSA9IHlpZWxkKiBFZmZlY3QudHJ5UHJvbWlzZSh7XG4gICAgICAgICAgICAgICAgdHJ5OiBhc3luYyAoKT0+dXBsb2FkYWJsZS5vblVwbG9hZENvbXBsZXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFkYXB0ZXJBcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnJlcXVlc3RJbnB1dC5maWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldCB1cmwgKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS51cmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0SW5wdXQuZmlsZS51cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXQgYXBwVXJsICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9nRGVwcmVjYXRpb25XYXJuaW5nKFwiYGZpbGUuYXBwVXJsYCBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgZmlsZS51ZnNVcmxgIGluc3RlYWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdElucHV0LmZpbGUuYXBwVXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogcmVxdWVzdElucHV0Lm1ldGFkYXRhXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGNhdGNoOiAoZXJyb3IpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gcnVuIG9uVXBsb2FkQ29tcGxldGUuIFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdGhyb3dpbmcgZXJyb3JzIGhlcmUuXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiByZXF1ZXN0SW5wdXQuZmlsZS5rZXksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2tEYXRhOiBzZXJ2ZXJEYXRhID8/IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiJ29uVXBsb2FkQ29tcGxldGUnIGNhbGxiYWNrIGZpbmlzaGVkLiBTZW5kaW5nIHJlc3BvbnNlIHRvIFVwbG9hZFRoaW5nOlwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJjYWxsYmFja0RhdGFcIiwgcGF5bG9hZCkpO1xuICAgICAgICAgICAgY29uc3QgYmFzZVVybCA9IHlpZWxkKiBJbmdlc3RVcmw7XG4gICAgICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgICAgICB5aWVsZCogSHR0cENsaWVudFJlcXVlc3QucG9zdChgL2NhbGxiYWNrLXJlc3VsdGApLnBpcGUoSHR0cENsaWVudFJlcXVlc3QucHJlcGVuZFVybChiYXNlVXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2VcbiAgICAgICAgICAgIH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbihwYXlsb2FkKSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSwgRWZmZWN0LnRhcEVycm9yKGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBjYWxsYmFjayByZXN1bHRcIikpLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24oQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSkpLCBFZmZlY3QudGFwKEVmZmVjdC5sb2coXCJTZW50IGNhbGxiYWNrIHJlc3VsdCB0byBVcGxvYWRUaGluZ1wiKSksIEVmZmVjdC5zY29wZWQpO1xuICAgICAgICB9KS5waXBlKEVmZmVjdC5pZ25vcmVMb2dnZWQsIEVmZmVjdC5mb3JrRGFlbW9uKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJvZHk6IG51bGwsXG4gICAgICAgICAgICBmaWJlclxuICAgICAgICB9O1xuICAgIH0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlQ2FsbGJhY2tSZXF1ZXN0XCIpKTtcbmNvbnN0IHJ1blJvdXRlTWlkZGxld2FyZSA9IChvcHRzKT0+RWZmZWN0LmdlbihmdW5jdGlvbiooKSB7XG4gICAgICAgIGNvbnN0IHsganNvbjogeyBmaWxlcywgaW5wdXQgfSwgdXBsb2FkYWJsZSB9ID0gb3B0cztcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJ1bm5pbmcgbWlkZGxld2FyZVwiKTtcbiAgICAgICAgY29uc3QgYWRhcHRlckFyZ3MgPSB5aWVsZCogQWRhcHRlckFyZ3VtZW50cztcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB5aWVsZCogRWZmZWN0LnRyeVByb21pc2Uoe1xuICAgICAgICAgICAgdHJ5OiBhc3luYyAoKT0+dXBsb2FkYWJsZS5taWRkbGV3YXJlKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYWRhcHRlckFyZ3MsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICAgICAgICBmaWxlc1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY2F0Y2g6IChlcnJvcik9PmVycm9yIGluc3RhbmNlb2YgVXBsb2FkVGhpbmdFcnJvciA/IGVycm9yIDogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVEVSTkFMX1NFUlZFUl9FUlJPUlwiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBydW4gbWlkZGxld2FyZVwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1ldGFkYXRhW1VURmlsZXNdICYmIG1ldGFkYXRhW1VURmlsZXNdLmxlbmd0aCAhPT0gZmlsZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBtc2cgPSBgRXhwZWN0ZWQgZmlsZXMgb3ZlcnJpZGUgdG8gaGF2ZSB0aGUgc2FtZSBsZW5ndGggYXMgb3JpZ2luYWwgZmlsZXMsIGdvdCAke21ldGFkYXRhW1VURmlsZXNdLmxlbmd0aH0gYnV0IGV4cGVjdGVkICR7ZmlsZXMubGVuZ3RofWA7XG4gICAgICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0Vycm9yKG1zZyk7XG4gICAgICAgICAgICByZXR1cm4geWllbGQqIG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGaWxlcyBvdmVycmlkZSBtdXN0IGhhdmUgdGhlIHNhbWUgbGVuZ3RoIGFzIGZpbGVzXCIsXG4gICAgICAgICAgICAgICAgY2F1c2U6IG1zZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQXR0YWNoIGN1c3RvbUlkcyBmcm9tIG1pZGRsZXdhcmUgdG8gdGhlIGZpbGVzXG4gICAgICAgIGNvbnN0IGZpbGVzV2l0aEN1c3RvbUlkcyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlcywgKGZpbGUsIGlkeCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRoZWlycyA9IG1ldGFkYXRhW1VURmlsZXNdPy5baWR4XTtcbiAgICAgICAgICAgICAgICBpZiAodGhlaXJzICYmIHRoZWlycy5zaXplICE9PSBmaWxlLnNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dXYXJuaW5nKFwiRmlsZSBzaXplIG1pc21hdGNoLiBSZXZlcnRpbmcgdG8gb3JpZ2luYWwgc2l6ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhlaXJzPy5uYW1lID8/IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGN1c3RvbUlkOiB0aGVpcnM/LmN1c3RvbUlkLFxuICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IHRoZWlycz8ubGFzdE1vZGlmaWVkID8/IERhdGUubm93KClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbWV0YWRhdGEsXG4gICAgICAgICAgICBmaWxlc1dpdGhDdXN0b21JZHNcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInJ1blJvdXRlTWlkZGxld2FyZVwiKSk7XG5jb25zdCBoYW5kbGVVcGxvYWRBY3Rpb24gPSAob3B0cyk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgIGNvbnN0IHsgdXBsb2FkYWJsZSwgZmVQYWNrYWdlLCBiZUFkYXB0ZXIsIHNsdWcgfSA9IG9wdHM7XG4gICAgICAgIGNvbnN0IGpzb24gPSB5aWVsZCogSHR0cFNlcnZlclJlcXVlc3Quc2NoZW1hQm9keUpzb24oVXBsb2FkQWN0aW9uUGF5bG9hZCk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJIYW5kbGluZyB1cGxvYWQgcmVxdWVzdFwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIGpzb24pKTtcbiAgICAgICAgLy8gdmFsaWRhdGUgdGhlIGlucHV0XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJQYXJzaW5nIHVzZXIgaW5wdXRcIik7XG4gICAgICAgIGNvbnN0IHBhcnNlZElucHV0ID0geWllbGQqIEVmZmVjdC50cnlQcm9taXNlKHtcbiAgICAgICAgICAgIHRyeTogKCk9PmdldFBhcnNlRm4odXBsb2FkYWJsZS5pbnB1dFBhcnNlcikoanNvbi5pbnB1dCksXG4gICAgICAgICAgICBjYXRjaDogKGVycm9yKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBpbnB1dFwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZXJyb3JcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIklucHV0IHBhcnNlZCBzdWNjZXNzZnVsbHlcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaW5wdXRcIiwgcGFyc2VkSW5wdXQpKTtcbiAgICAgICAgY29uc3QgeyBtZXRhZGF0YSwgZmlsZXNXaXRoQ3VzdG9tSWRzIH0gPSB5aWVsZCogcnVuUm91dGVNaWRkbGV3YXJlKHtcbiAgICAgICAgICAgIGpzb246IHtcbiAgICAgICAgICAgICAgICBpbnB1dDogcGFyc2VkSW5wdXQsXG4gICAgICAgICAgICAgICAgZmlsZXM6IGpzb24uZmlsZXNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGxvYWRhYmxlXG4gICAgICAgIH0pO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKFwiUGFyc2luZyByb3V0ZSBjb25maWdcIikucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwicm91dGVyQ29uZmlnXCIsIHVwbG9hZGFibGUucm91dGVyQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IHBhcnNlZENvbmZpZyA9IHlpZWxkKiBmaWxsSW5wdXRSb3V0ZUNvbmZpZyh1cGxvYWRhYmxlLnJvdXRlckNvbmZpZykucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJJbnZhbGlkUm91dGVDb25maWdcIiwgKGVycik9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHJvdXRlIGNvbmZpZ1wiLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBlcnJcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJSb3V0ZSBjb25maWcgcGFyc2VkIHN1Y2Nlc3NmdWxseVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJyb3V0ZUNvbmZpZ1wiLCBwYXJzZWRDb25maWcpKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlZhbGlkYXRpbmcgZmlsZXMgbWVldCB0aGUgY29uZmlnIHJlcXVpcmVtZW50c1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJmaWxlc1wiLCBqc29uLmZpbGVzKSk7XG4gICAgICAgIHlpZWxkKiBhc3NlcnRGaWxlc01lZXRDb25maWcoanNvbi5maWxlcywgcGFyc2VkQ29uZmlnKS5waXBlKEVmZmVjdC5tYXBFcnJvcigoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYEludmFsaWQgY29uZmlnOiAke2UuX3RhZ31gLFxuICAgICAgICAgICAgICAgIGNhdXNlOiBcInJlYXNvblwiIGluIGUgPyBlLnJlYXNvbiA6IGUubWVzc2FnZVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIkZpbGVzIHZhbGlkYXRlZC5cIik7XG4gICAgICAgIGNvbnN0IGZpbGVVcGxvYWRSZXF1ZXN0cyA9IHlpZWxkKiBFZmZlY3QuZm9yRWFjaChmaWxlc1dpdGhDdXN0b21JZHMsIChmaWxlKT0+RWZmZWN0Lm1hcChtYXRjaEZpbGVUeXBlKGZpbGUsIG9iamVjdEtleXMocGFyc2VkQ29uZmlnKSksICh0eXBlKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSB8fCB0eXBlLFxuICAgICAgICAgICAgICAgICAgICBsYXN0TW9kaWZpZWQ6IGZpbGUubGFzdE1vZGlmaWVkLFxuICAgICAgICAgICAgICAgICAgICBjdXN0b21JZDogZmlsZS5jdXN0b21JZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudERpc3Bvc2l0aW9uOiBwYXJzZWRDb25maWdbdHlwZV0/LmNvbnRlbnREaXNwb3NpdGlvbiA/PyBcImlubGluZVwiLFxuICAgICAgICAgICAgICAgICAgICBhY2w6IHBhcnNlZENvbmZpZ1t0eXBlXT8uYWNsXG4gICAgICAgICAgICAgICAgfSkpKS5waXBlKEVmZmVjdC5jYXRjaFRhZ3Moe1xuICAgICAgICAgICAgLyoqIFNob3VsZG4ndCBoYXBwZW4gc2luY2UgY29uZmlnIGlzIHZhbGlkYXRlZCBhYm92ZSBzbyBqdXN0IGR5aW5nIGlzIGZpbmUgSSB0aGluayAqLyBJbnZhbGlkRmlsZVR5cGU6IChlKT0+RWZmZWN0LmRpZShlKSxcbiAgICAgICAgICAgIFVua25vd25GaWxlVHlwZTogKGUpPT5FZmZlY3QuZGllKGUpXG4gICAgICAgIH0pKTtcbiAgICAgICAgY29uc3Qgcm91dGVPcHRpb25zID0gdXBsb2FkYWJsZS5yb3V0ZU9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhcHBJZCB9ID0geWllbGQqIFVUVG9rZW47XG4gICAgICAgIGNvbnN0IGluZ2VzdFVybCA9IHlpZWxkKiBJbmdlc3RVcmw7XG4gICAgICAgIGNvbnN0IGlzRGV2ID0geWllbGQqIElzRGV2ZWxvcG1lbnQ7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRGVidWcoXCJHZW5lcmF0aW5nIHByZXNpZ25lZCBVUkxzXCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcImZpbGVVcGxvYWRSZXF1ZXN0c1wiLCBmaWxlVXBsb2FkUmVxdWVzdHMpLCBFZmZlY3QuYW5ub3RhdGVMb2dzKFwiaW5nZXN0VXJsXCIsIGluZ2VzdFVybCkpO1xuICAgICAgICBjb25zdCBwcmVzaWduZWRVcmxzID0geWllbGQqIEVmZmVjdC5mb3JFYWNoKGZpbGVVcGxvYWRSZXF1ZXN0cywgKGZpbGUpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBrZXkgPSB5aWVsZCogZ2VuZXJhdGVLZXkoZmlsZSwgYXBwSWQsIHJvdXRlT3B0aW9ucy5nZXRGaWxlSGFzaFBhcnRzKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSB5aWVsZCogZ2VuZXJhdGVTaWduZWRVUkwoYCR7aW5nZXN0VXJsfS8ke2tleX1gLCBhcGlLZXksIHtcbiAgICAgICAgICAgICAgICAgICAgdHRsSW5TZWNvbmRzOiByb3V0ZU9wdGlvbnMucHJlc2lnbmVkVVJMVFRMLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1maWxlLW5hbWVcIjogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LXV0LWZpbGUtc2l6ZVwiOiBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1zbHVnXCI6IHNsdWcsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtY3VzdG9tLWlkXCI6IGZpbGUuY3VzdG9tSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBcIngtdXQtY29udGVudC1kaXNwb3NpdGlvblwiOiBmaWxlLmNvbnRlbnREaXNwb3NpdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIFwieC11dC1hY2xcIjogZmlsZS5hY2xcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgICAgICAga2V5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pLCB7XG4gICAgICAgICAgICBjb25jdXJyZW5jeTogXCJ1bmJvdW5kZWRcIlxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3Qgc2VydmVyUmVxID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0Lkh0dHBTZXJ2ZXJSZXF1ZXN0O1xuICAgICAgICBjb25zdCByZXF1ZXN0VXJsID0geWllbGQqIEh0dHBTZXJ2ZXJSZXF1ZXN0LnRvVVJMKHNlcnZlclJlcSk7XG4gICAgICAgIGNvbnN0IGRldkhvb2tSZXF1ZXN0ID0geWllbGQqIENvbmZpZy5zdHJpbmcoXCJjYWxsYmFja1VybFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChyZXF1ZXN0VXJsLm9yaWdpbiArIHJlcXVlc3RVcmwucGF0aG5hbWUpLCBFZmZlY3QubWFwKCh1cmwpPT5IdHRwQ2xpZW50UmVxdWVzdC5wb3N0KHVybCkucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5hcHBlbmRVcmxQYXJhbShcInNsdWdcIiwgc2x1ZykpKSk7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhUmVxdWVzdCA9IEh0dHBDbGllbnRSZXF1ZXN0LnBvc3QoXCIvcm91dGUtbWV0YWRhdGFcIikucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5wcmVwZW5kVXJsKGluZ2VzdFVybCksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEhlYWRlcnMoe1xuICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcbiAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCI6IHZlcnNpb24sXG4gICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctYmUtYWRhcHRlclwiOiBiZUFkYXB0ZXIsXG4gICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2VcbiAgICAgICAgfSksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlKc29uKHtcbiAgICAgICAgICAgIGZpbGVLZXlzOiBwcmVzaWduZWRVcmxzLm1hcCgoeyBrZXkgfSk9PmtleSksXG4gICAgICAgICAgICBtZXRhZGF0YTogbWV0YWRhdGEsXG4gICAgICAgICAgICBpc0RldixcbiAgICAgICAgICAgIGNhbGxiYWNrVXJsOiBkZXZIb29rUmVxdWVzdC51cmwsXG4gICAgICAgICAgICBjYWxsYmFja1NsdWc6IHNsdWcsXG4gICAgICAgICAgICBhd2FpdFNlcnZlckRhdGE6IHJvdXRlT3B0aW9ucy5hd2FpdFNlcnZlckRhdGEgPz8gdHJ1ZVxuICAgICAgICB9KSwgRWZmZWN0LmZsYXRNYXAoaHR0cENsaWVudC5leGVjdXRlKSk7XG4gICAgICAgIGNvbnN0IGhhbmRsZURldlN0cmVhbUVycm9yID0gRWZmZWN0LmZuKFwiaGFuZGxlRGV2U3RyZWFtRXJyb3JcIikoZnVuY3Rpb24qKGVyciwgY2h1bmspIHtcbiAgICAgICAgICAgIGNvbnN0IHNjaGVtYSA9IFNjaGVtYS5wYXJzZUpzb24oU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgZmlsZTogVXBsb2FkZWRGaWxlRGF0YVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgcGFyc2VkQ2h1bmsgPSB5aWVsZCogU2NoZW1hLmRlY29kZVVua25vd24oc2NoZW1hKShjaHVuayk7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBwYXJzZWRDaHVuay5maWxlLmtleTtcbiAgICAgICAgICAgIHlpZWxkKiBFZmZlY3QubG9nRXJyb3IoXCJGYWlsZWQgdG8gZm9yd2FyZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3Moe1xuICAgICAgICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyLm1lc3NhZ2VcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGh0dHBSZXNwb25zZSA9IHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KFwiL2NhbGxiYWNrLXJlc3VsdFwiKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoaW5nZXN0VXJsKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVycyh7XG4gICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIjogUmVkYWN0ZWQudmFsdWUoYXBpS2V5KSxcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctdmVyc2lvblwiOiB2ZXJzaW9uLFxuICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1iZS1hZGFwdGVyXCI6IGJlQWRhcHRlcixcbiAgICAgICAgICAgICAgICBcIngtdXBsb2FkdGhpbmctZmUtcGFja2FnZVwiOiBmZVBhY2thZ2VcbiAgICAgICAgICAgIH0pLCBIdHRwQ2xpZW50UmVxdWVzdC5ib2R5SnNvbih7XG4gICAgICAgICAgICAgICAgZmlsZUtleToga2V5LFxuICAgICAgICAgICAgICAgIGVycm9yOiBgRmFpbGVkIHRvIGZvcndhcmQgY2FsbGJhY2sgcmVxdWVzdCBmcm9tIGRldiBzdHJlYW06ICR7ZXJyLm1lc3NhZ2V9YFxuICAgICAgICAgICAgfSksIEVmZmVjdC5mbGF0TWFwKGh0dHBDbGllbnQuZXhlY3V0ZSkpO1xuICAgICAgICAgICAgeWllbGQqIGxvZ0h0dHBDbGllbnRSZXNwb25zZShcIlJlcG9ydGVkIGNhbGxiYWNrIGVycm9yIHRvIFVwbG9hZFRoaW5nXCIpKGh0dHBSZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBTZW5kIG1ldGFkYXRhIHRvIFVUIHNlcnZlciAobm9uIGJsb2NraW5nIGFzIGEgZGFlbW9uKVxuICAgICAgICAvLyBJbiBkZXYsIGtlZXAgdGhlIHN0cmVhbSBvcGVuIGFuZCBzaW11bGF0ZSB0aGUgY2FsbGJhY2sgcmVxdWVzdHMgYXNcbiAgICAgICAgLy8gZmlsZXMgY29tcGxldGUgdXBsb2FkaW5nXG4gICAgICAgIGNvbnN0IGZpYmVyID0geWllbGQqIEVmZmVjdC5pZihpc0Rldiwge1xuICAgICAgICAgICAgb25UcnVlOiAoKT0+bWV0YWRhdGFSZXF1ZXN0LnBpcGUoRWZmZWN0LnRhcEJvdGgoe1xuICAgICAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IGxvZ0h0dHBDbGllbnRSZXNwb25zZShcIlJlZ2lzdGVyZWQgbWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW46IFwiTm9uZVwiXG4gICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZWdpc3RlciBtZXRhZGF0YVwiKVxuICAgICAgICAgICAgICAgIH0pLCBIdHRwQ2xpZW50UmVzcG9uc2Uuc3RyZWFtLCBoYW5kbGVKc29uTGluZVN0cmVhbShNZXRhZGF0YUZldGNoU3RyZWFtUGFydCwgKGNodW5rKT0+ZGV2SG9va1JlcXVlc3QucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXBsb2FkdGhpbmctaG9va1wiOiBjaHVuay5ob29rLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXNpZ25hdHVyZVwiOiBjaHVuay5zaWduYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgfSksIEh0dHBDbGllbnRSZXF1ZXN0LnNldEJvZHkoSHR0cEJvZHkudGV4dChjaHVuay5wYXlsb2FkLCBcImFwcGxpY2F0aW9uL2pzb25cIikpLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC50YXAobG9nSHR0cENsaWVudFJlc3BvbnNlKFwiU3VjY2Vzc2Z1bGx5IGZvcndhcmRlZCBjYWxsYmFjayByZXF1ZXN0IGZyb20gZGV2IHN0cmVhbVwiKSksIEVmZmVjdC5jYXRjaFRhZyhcIlJlc3BvbnNlRXJyb3JcIiwgKGVycik9PmhhbmRsZURldlN0cmVhbUVycm9yKGVyciwgY2h1bmsucGF5bG9hZCkpLCBFZmZlY3QuYW5ub3RhdGVMb2dzKGNodW5rKSwgRWZmZWN0LmFzVm9pZCwgRWZmZWN0Lmlnbm9yZUxvZ2dlZCwgRWZmZWN0LnNjb3BlZCkpKSxcbiAgICAgICAgICAgIG9uRmFsc2U6ICgpPT5tZXRhZGF0YVJlcXVlc3QucGlwZShFZmZlY3QudGFwQm90aCh7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiUmVnaXN0ZXJlZCBtZXRhZGF0YVwiKSxcbiAgICAgICAgICAgICAgICAgICAgb25GYWlsdXJlOiBsb2dIdHRwQ2xpZW50RXJyb3IoXCJGYWlsZWQgdG8gcmVnaXN0ZXIgbWV0YWRhdGFcIilcbiAgICAgICAgICAgICAgICB9KSwgRWZmZWN0LmZsYXRNYXAoSHR0cENsaWVudFJlc3BvbnNlLnNjaGVtYUJvZHlKc29uKE1ldGFkYXRhRmV0Y2hSZXNwb25zZSkpLCBFZmZlY3Quc2NvcGVkKVxuICAgICAgICB9KS5waXBlKEVmZmVjdC5mb3JrRGFlbW9uKTtcbiAgICAgICAgY29uc3QgcHJlc2lnbmVkcyA9IHByZXNpZ25lZFVybHMubWFwKChwLCBpKT0+KHtcbiAgICAgICAgICAgICAgICB1cmw6IHAudXJsLFxuICAgICAgICAgICAgICAgIGtleTogcC5rZXksXG4gICAgICAgICAgICAgICAgbmFtZTogZmlsZVVwbG9hZFJlcXVlc3RzW2ldLm5hbWUsXG4gICAgICAgICAgICAgICAgY3VzdG9tSWQ6IGZpbGVVcGxvYWRSZXF1ZXN0c1tpXS5jdXN0b21JZCA/PyBudWxsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIHlpZWxkKiBFZmZlY3QubG9nSW5mbyhcIlNlbmRpbmcgcHJlc2lnbmVkIFVSTHMgdG8gY2xpZW50XCIpLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcInByZXNpZ25lZFVybHNcIiwgcHJlc2lnbmVkcykpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYm9keTogcHJlc2lnbmVkcyxcbiAgICAgICAgICAgIGZpYmVyXG4gICAgICAgIH07XG4gICAgfSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJoYW5kbGVVcGxvYWRBY3Rpb25cIikpO1xuXG5leHBvcnQgeyBBZGFwdGVyQXJndW1lbnRzLCBjcmVhdGVSZXF1ZXN0SGFuZGxlciwgbWFrZUFkYXB0ZXJIYW5kbGVyIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/jsonl.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handleJsonLineStream: () => (/* binding */ handleJsonLineStream)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect_Stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Stream */ \"(rsc)/./node_modules/effect/dist/esm/Stream.js\");\n\n\n\n\nconst handleJsonLineStream = (schema, onChunk)=>(stream)=>{\n        let buf = \"\";\n        return stream.pipe(effect_Stream__WEBPACK_IMPORTED_MODULE_0__.decodeText(), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect((chunk)=>effect_Effect__WEBPACK_IMPORTED_MODULE_1__.gen(function*() {\n                buf += chunk;\n                // Scan buffer for newlines\n                const parts = buf.split(\"\\n\");\n                const validChunks = [];\n                for (const part of parts){\n                    try {\n                        // Attempt to parse chunk as JSON\n                        validChunks.push(JSON.parse(part));\n                        // Advance buffer if parsing succeeded\n                        buf = buf.slice(part.length + 1);\n                    } catch  {\n                    //\n                    }\n                }\n                yield* effect_Effect__WEBPACK_IMPORTED_MODULE_1__.logDebug(\"Received chunks\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"chunk\", chunk), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"parsedChunks\", validChunks), effect_Effect__WEBPACK_IMPORTED_MODULE_1__.annotateLogs(\"buf\", buf));\n                return validChunks;\n            })), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect(effect_Schema__WEBPACK_IMPORTED_MODULE_2__.decodeUnknown(effect_Schema__WEBPACK_IMPORTED_MODULE_2__.Array(schema))), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.mapEffect(effect_Effect__WEBPACK_IMPORTED_MODULE_1__.forEach((part)=>onChunk(part))), effect_Stream__WEBPACK_IMPORTED_MODULE_0__.runDrain, effect_Effect__WEBPACK_IMPORTED_MODULE_1__.withLogSpan(\"handleJsonLineStream\"));\n    };\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvanNvbmwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3QztBQUNMO0FBQ0s7O0FBRXhDO0FBQ0E7QUFDQSwyQkFBMkIscURBQWlCLElBQUksb0RBQWdCLFVBQVUsOENBQVU7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1EQUFlLHlCQUF5Qix1REFBbUIsa0JBQWtCLHVEQUFtQiwrQkFBK0IsdURBQW1CO0FBQ3pLO0FBQ0EsYUFBYSxJQUFJLG9EQUFnQixDQUFDLHdEQUFlLENBQUMsZ0RBQU8sWUFBWSxvREFBZ0IsQ0FBQyxrREFBYywwQkFBMEIsbURBQWUsRUFBRSxzREFBa0I7QUFDaks7O0FBRWdDIiwic291cmNlcyI6WyIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3Qvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL2pzb25sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCAqIGFzIFMgZnJvbSAnZWZmZWN0L1NjaGVtYSc7XG5pbXBvcnQgKiBhcyBTdHJlYW0gZnJvbSAnZWZmZWN0L1N0cmVhbSc7XG5cbmNvbnN0IGhhbmRsZUpzb25MaW5lU3RyZWFtID0gKHNjaGVtYSwgb25DaHVuayk9PihzdHJlYW0pPT57XG4gICAgICAgIGxldCBidWYgPSBcIlwiO1xuICAgICAgICByZXR1cm4gc3RyZWFtLnBpcGUoU3RyZWFtLmRlY29kZVRleHQoKSwgU3RyZWFtLm1hcEVmZmVjdCgoY2h1bmspPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgICAgICAgICBidWYgKz0gY2h1bms7XG4gICAgICAgICAgICAgICAgLy8gU2NhbiBidWZmZXIgZm9yIG5ld2xpbmVzXG4gICAgICAgICAgICAgICAgY29uc3QgcGFydHMgPSBidWYuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgY29uc3QgdmFsaWRDaHVua3MgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMpe1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXR0ZW1wdCB0byBwYXJzZSBjaHVuayBhcyBKU09OXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZENodW5rcy5wdXNoKEpTT04ucGFyc2UocGFydCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWR2YW5jZSBidWZmZXIgaWYgcGFyc2luZyBzdWNjZWVkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZiA9IGJ1Zi5zbGljZShwYXJ0Lmxlbmd0aCArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoICB7XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgeWllbGQqIEVmZmVjdC5sb2dEZWJ1ZyhcIlJlY2VpdmVkIGNodW5rc1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJjaHVua1wiLCBjaHVuayksIEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJwYXJzZWRDaHVua3NcIiwgdmFsaWRDaHVua3MpLCBFZmZlY3QuYW5ub3RhdGVMb2dzKFwiYnVmXCIsIGJ1ZikpO1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWxpZENodW5rcztcbiAgICAgICAgICAgIH0pKSwgU3RyZWFtLm1hcEVmZmVjdChTLmRlY29kZVVua25vd24oUy5BcnJheShzY2hlbWEpKSksIFN0cmVhbS5tYXBFZmZlY3QoRWZmZWN0LmZvckVhY2goKHBhcnQpPT5vbkNodW5rKHBhcnQpKSksIFN0cmVhbS5ydW5EcmFpbiwgRWZmZWN0LndpdGhMb2dTcGFuKFwiaGFuZGxlSnNvbkxpbmVTdHJlYW1cIikpO1xuICAgIH07XG5cbmV4cG9ydCB7IGhhbmRsZUpzb25MaW5lU3RyZWFtIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/jsonl.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/logger.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/logger.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LogFormat: () => (/* binding */ LogFormat),\n/* harmony export */   logHttpClientError: () => (/* binding */ logHttpClientError),\n/* harmony export */   logHttpClientResponse: () => (/* binding */ logHttpClientResponse),\n/* harmony export */   withLogFormat: () => (/* binding */ withLogFormat),\n/* harmony export */   withMinimalLogLevel: () => (/* binding */ withMinimalLogLevel)\n/* harmony export */ });\n/* harmony import */ var effect_Config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Config */ \"(rsc)/./node_modules/effect/dist/esm/Config.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_Logger__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Logger */ \"(rsc)/./node_modules/effect/dist/esm/Logger.js\");\n/* harmony import */ var effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/LogLevel */ \"(rsc)/./node_modules/effect/dist/esm/LogLevel.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n\n\n\n\n\n\n\n\nconst withMinimalLogLevel = effect_Config__WEBPACK_IMPORTED_MODULE_0__.logLevel(\"logLevel\").pipe(effect_Config__WEBPACK_IMPORTED_MODULE_0__.withDefault(effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.Info), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.andThen((level)=>effect_Logger__WEBPACK_IMPORTED_MODULE_3__.minimumLogLevel(level)), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.tapError((e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(\"Invalid log level\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"error\", e))), effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__.UploadThingError({\n        code: \"INVALID_SERVER_CONFIG\",\n        message: \"Invalid server configuration\",\n        cause: e\n    })), effect_Layer__WEBPACK_IMPORTED_MODULE_5__.unwrapEffect);\nconst LogFormat = effect_Config__WEBPACK_IMPORTED_MODULE_0__.literal(\"json\", \"logFmt\", \"structured\", \"pretty\")(\"logFormat\");\nconst withLogFormat = effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n    const isDev = yield* _config_js__WEBPACK_IMPORTED_MODULE_6__.IsDevelopment;\n    const logFormat = yield* LogFormat.pipe(effect_Config__WEBPACK_IMPORTED_MODULE_0__.withDefault(isDev ? \"pretty\" : \"json\"));\n    return effect_Logger__WEBPACK_IMPORTED_MODULE_3__[logFormat];\n}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__.UploadThingError({\n        code: \"INVALID_SERVER_CONFIG\",\n        message: \"Invalid server configuration\",\n        cause: e\n    })), effect_Layer__WEBPACK_IMPORTED_MODULE_5__.unwrapEffect);\nconst logHttpClientResponse = (message, opts)=>{\n    const mixin = opts?.mixin ?? \"json\";\n    const level = effect_LogLevel__WEBPACK_IMPORTED_MODULE_1__.fromLiteral(opts?.level ?? \"Debug\");\n    return (response)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.flatMap(mixin !== \"None\" ? response[mixin] : effect_Effect__WEBPACK_IMPORTED_MODULE_2__[\"void\"], ()=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logWithLevel(level, `${message} (${response.status})`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"response\", response)));\n};\nconst logHttpClientError = (message)=>(err)=>err._tag === \"ResponseError\" ? logHttpClientResponse(message, {\n            level: \"Error\"\n        })(err.response) : effect_Effect__WEBPACK_IMPORTED_MODULE_2__.logError(message).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_2__.annotateLogs(\"error\", err));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvbG9nZ2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUF3QztBQUNBO0FBQ0Y7QUFDRTtBQUNJO0FBQ1c7QUFDWDs7QUFFNUMsNEJBQTRCLG1EQUFlLGtCQUFrQixzREFBa0IsQ0FBQyxpREFBYSxHQUFHLGtEQUFjLFVBQVUsMERBQXNCLFVBQVUsbURBQWUsTUFBTSxtREFBZSwyQkFBMkIsdURBQW1CLGdCQUFnQixtREFBZSx5QkFBeUIsaUVBQWdCO0FBQ2xUO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxzREFBa0I7QUFDM0Isa0JBQWtCLGtEQUFjO0FBQ2hDLHNCQUFzQiw4Q0FBVTtBQUNoQyx5QkFBeUIscURBQWE7QUFDdEMsNENBQTRDLHNEQUFrQjtBQUM5RCxXQUFXLDBDQUFNO0FBQ2pCLENBQUMsT0FBTyxtREFBZSx5QkFBeUIsaUVBQWdCO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLEtBQUssSUFBSSxzREFBa0I7QUFDM0I7QUFDQTtBQUNBLGtCQUFrQix3REFBb0I7QUFDdEMsdUJBQXVCLGtEQUFjLHNDQUFzQyxrREFBVyxNQUFNLHVEQUFtQixXQUFXLFNBQVMsR0FBRyxnQkFBZ0IsU0FBUyx1REFBbUI7QUFDbEw7QUFDQTtBQUNBO0FBQ0EsU0FBUyxrQkFBa0IsbURBQWUsZUFBZSx1REFBbUI7O0FBRXdCIiwic291cmNlcyI6WyIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3Qvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL2xvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDb25maWcgZnJvbSAnZWZmZWN0L0NvbmZpZyc7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgKiBhcyBMYXllciBmcm9tICdlZmZlY3QvTGF5ZXInO1xuaW1wb3J0ICogYXMgTG9nZ2VyIGZyb20gJ2VmZmVjdC9Mb2dnZXInO1xuaW1wb3J0ICogYXMgTG9nTGV2ZWwgZnJvbSAnZWZmZWN0L0xvZ0xldmVsJztcbmltcG9ydCB7IFVwbG9hZFRoaW5nRXJyb3IgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IElzRGV2ZWxvcG1lbnQgfSBmcm9tICcuL2NvbmZpZy5qcyc7XG5cbmNvbnN0IHdpdGhNaW5pbWFsTG9nTGV2ZWwgPSBDb25maWcubG9nTGV2ZWwoXCJsb2dMZXZlbFwiKS5waXBlKENvbmZpZy53aXRoRGVmYXVsdChMb2dMZXZlbC5JbmZvKSwgRWZmZWN0LmFuZFRoZW4oKGxldmVsKT0+TG9nZ2VyLm1pbmltdW1Mb2dMZXZlbChsZXZlbCkpLCBFZmZlY3QudGFwRXJyb3IoKGUpPT5FZmZlY3QubG9nRXJyb3IoXCJJbnZhbGlkIGxvZyBsZXZlbFwiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJlcnJvclwiLCBlKSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgY29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcbiAgICAgICAgbWVzc2FnZTogXCJJbnZhbGlkIHNlcnZlciBjb25maWd1cmF0aW9uXCIsXG4gICAgICAgIGNhdXNlOiBlXG4gICAgfSkpLCBMYXllci51bndyYXBFZmZlY3QpO1xuY29uc3QgTG9nRm9ybWF0ID0gQ29uZmlnLmxpdGVyYWwoXCJqc29uXCIsIFwibG9nRm10XCIsIFwic3RydWN0dXJlZFwiLCBcInByZXR0eVwiKShcImxvZ0Zvcm1hdFwiKTtcbmNvbnN0IHdpdGhMb2dGb3JtYXQgPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICBjb25zdCBpc0RldiA9IHlpZWxkKiBJc0RldmVsb3BtZW50O1xuICAgIGNvbnN0IGxvZ0Zvcm1hdCA9IHlpZWxkKiBMb2dGb3JtYXQucGlwZShDb25maWcud2l0aERlZmF1bHQoaXNEZXYgPyBcInByZXR0eVwiIDogXCJqc29uXCIpKTtcbiAgICByZXR1cm4gTG9nZ2VyW2xvZ0Zvcm1hdF07XG59KS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICBtZXNzYWdlOiBcIkludmFsaWQgc2VydmVyIGNvbmZpZ3VyYXRpb25cIixcbiAgICAgICAgY2F1c2U6IGVcbiAgICB9KSksIExheWVyLnVud3JhcEVmZmVjdCk7XG5jb25zdCBsb2dIdHRwQ2xpZW50UmVzcG9uc2UgPSAobWVzc2FnZSwgb3B0cyk9PntcbiAgICBjb25zdCBtaXhpbiA9IG9wdHM/Lm1peGluID8/IFwianNvblwiO1xuICAgIGNvbnN0IGxldmVsID0gTG9nTGV2ZWwuZnJvbUxpdGVyYWwob3B0cz8ubGV2ZWwgPz8gXCJEZWJ1Z1wiKTtcbiAgICByZXR1cm4gKHJlc3BvbnNlKT0+RWZmZWN0LmZsYXRNYXAobWl4aW4gIT09IFwiTm9uZVwiID8gcmVzcG9uc2VbbWl4aW5dIDogRWZmZWN0LnZvaWQsICgpPT5FZmZlY3QubG9nV2l0aExldmVsKGxldmVsLCBgJHttZXNzYWdlfSAoJHtyZXNwb25zZS5zdGF0dXN9KWApLnBpcGUoRWZmZWN0LmFubm90YXRlTG9ncyhcInJlc3BvbnNlXCIsIHJlc3BvbnNlKSkpO1xufTtcbmNvbnN0IGxvZ0h0dHBDbGllbnRFcnJvciA9IChtZXNzYWdlKT0+KGVycik9PmVyci5fdGFnID09PSBcIlJlc3BvbnNlRXJyb3JcIiA/IGxvZ0h0dHBDbGllbnRSZXNwb25zZShtZXNzYWdlLCB7XG4gICAgICAgICAgICBsZXZlbDogXCJFcnJvclwiXG4gICAgICAgIH0pKGVyci5yZXNwb25zZSkgOiBFZmZlY3QubG9nRXJyb3IobWVzc2FnZSkucGlwZShFZmZlY3QuYW5ub3RhdGVMb2dzKFwiZXJyb3JcIiwgZXJyKSk7XG5cbmV4cG9ydCB7IExvZ0Zvcm1hdCwgbG9nSHR0cENsaWVudEVycm9yLCBsb2dIdHRwQ2xpZW50UmVzcG9uc2UsIHdpdGhMb2dGb3JtYXQsIHdpdGhNaW5pbWFsTG9nTGV2ZWwgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/parser.js":
/*!***********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/parser.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ParserError: () => (/* binding */ ParserError),\n/* harmony export */   getParseFn: () => (/* binding */ getParseFn)\n/* harmony export */ });\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Runtime */ \"(rsc)/./node_modules/effect/dist/esm/Runtime.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n\n\n\n\n\nclass ParserError extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.TaggedError(\"ParserError\") {\n    constructor(...args){\n        super(...args), this.message = \"Input validation failed. The original error with it's validation issues is in the error cause.\";\n    }\n}\nfunction getParseFn(parser) {\n    if (\"parseAsync\" in parser && typeof parser.parseAsync === \"function\") {\n        /**\n     * Zod\n     * TODO (next major): Consider wrapping ZodError in ParserError\n     */ return parser.parseAsync;\n    }\n    if (effect_Schema__WEBPACK_IMPORTED_MODULE_1__.isSchema(parser)) {\n        /**\n     * Effect Schema\n     */ return (value)=>effect_Schema__WEBPACK_IMPORTED_MODULE_1__.decodeUnknownPromise(parser)(value).catch((error)=>{\n                throw new ParserError({\n                    cause: effect_Cause__WEBPACK_IMPORTED_MODULE_2__.squash(error[effect_Runtime__WEBPACK_IMPORTED_MODULE_3__.FiberFailureCauseId])\n                });\n            });\n    }\n    if (\"~standard\" in parser) {\n        /**\n     * Standard Schema\n     * TODO (next major): Consider moving this to the top of the function\n     */ return async (value)=>{\n            const result = await parser[\"~standard\"].validate(value);\n            if (result.issues) {\n                throw new ParserError({\n                    cause: result.issues\n                });\n            }\n            return result.value;\n        };\n    }\n    throw new Error(\"Invalid parser\");\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFzQztBQUNGO0FBQ007QUFDRjs7QUFFeEMsMEJBQTBCLG9EQUFnQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtREFBZTtBQUN2QjtBQUNBO0FBQ0Esd0JBQXdCLCtEQUEyQjtBQUNuRDtBQUNBLDJCQUEyQixnREFBWSxPQUFPLCtEQUEyQjtBQUN6RSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcGFyc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIENhdXNlIGZyb20gJ2VmZmVjdC9DYXVzZSc7XG5pbXBvcnQgKiBhcyBEYXRhIGZyb20gJ2VmZmVjdC9EYXRhJztcbmltcG9ydCAqIGFzIFJ1bnRpbWUgZnJvbSAnZWZmZWN0L1J1bnRpbWUnO1xuaW1wb3J0ICogYXMgU2NoZW1hIGZyb20gJ2VmZmVjdC9TY2hlbWEnO1xuXG5jbGFzcyBQYXJzZXJFcnJvciBleHRlbmRzIERhdGEuVGFnZ2VkRXJyb3IoXCJQYXJzZXJFcnJvclwiKSB7XG4gICAgY29uc3RydWN0b3IoLi4uYXJncyl7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3MpLCB0aGlzLm1lc3NhZ2UgPSBcIklucHV0IHZhbGlkYXRpb24gZmFpbGVkLiBUaGUgb3JpZ2luYWwgZXJyb3Igd2l0aCBpdCdzIHZhbGlkYXRpb24gaXNzdWVzIGlzIGluIHRoZSBlcnJvciBjYXVzZS5cIjtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRQYXJzZUZuKHBhcnNlcikge1xuICAgIGlmIChcInBhcnNlQXN5bmNcIiBpbiBwYXJzZXIgJiYgdHlwZW9mIHBhcnNlci5wYXJzZUFzeW5jID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLyoqXG4gICAgICogWm9kXG4gICAgICogVE9ETyAobmV4dCBtYWpvcik6IENvbnNpZGVyIHdyYXBwaW5nIFpvZEVycm9yIGluIFBhcnNlckVycm9yXG4gICAgICovIHJldHVybiBwYXJzZXIucGFyc2VBc3luYztcbiAgICB9XG4gICAgaWYgKFNjaGVtYS5pc1NjaGVtYShwYXJzZXIpKSB7XG4gICAgICAgIC8qKlxuICAgICAqIEVmZmVjdCBTY2hlbWFcbiAgICAgKi8gcmV0dXJuICh2YWx1ZSk9PlNjaGVtYS5kZWNvZGVVbmtub3duUHJvbWlzZShwYXJzZXIpKHZhbHVlKS5jYXRjaCgoZXJyb3IpPT57XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFBhcnNlckVycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IENhdXNlLnNxdWFzaChlcnJvcltSdW50aW1lLkZpYmVyRmFpbHVyZUNhdXNlSWRdKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChcIn5zdGFuZGFyZFwiIGluIHBhcnNlcikge1xuICAgICAgICAvKipcbiAgICAgKiBTdGFuZGFyZCBTY2hlbWFcbiAgICAgKiBUT0RPIChuZXh0IG1ham9yKTogQ29uc2lkZXIgbW92aW5nIHRoaXMgdG8gdGhlIHRvcCBvZiB0aGUgZnVuY3Rpb25cbiAgICAgKi8gcmV0dXJuIGFzeW5jICh2YWx1ZSk9PntcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHBhcnNlcltcIn5zdGFuZGFyZFwiXS52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lmlzc3Vlcykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQYXJzZXJFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNhdXNlOiByZXN1bHQuaXNzdWVzXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LnZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcnNlclwiKTtcbn1cblxuZXhwb3J0IHsgUGFyc2VyRXJyb3IsIGdldFBhcnNlRm4gfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/parser.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js":
/*!*****************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/route-config.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   assertFilesMeetConfig: () => (/* binding */ assertFilesMeetConfig),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var effect_Data__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Data */ \"(rsc)/./node_modules/effect/dist/esm/Data.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n\n\n\n\nclass FileSizeMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.Error {\n    constructor(type, max, actual){\n        const reason = `You uploaded a ${type} file that was ${(0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.bytesToFileSize)(actual)}, but the limit for that type is ${max}`;\n        super({\n            reason\n        }), this._tag = \"FileSizeMismatch\", this.name = \"FileSizeMismatchError\";\n    }\n}\nclass FileCountMismatch extends effect_Data__WEBPACK_IMPORTED_MODULE_0__.Error {\n    constructor(type, boundtype, bound, actual){\n        const reason = `You uploaded ${actual} file(s) of type '${type}', but the ${boundtype} for that type is ${bound}`;\n        super({\n            reason\n        }), this._tag = \"FileCountMismatch\", this.name = \"FileCountMismatchError\";\n    }\n}\n// Verify that the uploaded files doesn't violate the route config,\n// e.g. uploading more videos than allowed, or a file that is larger than allowed.\n// This is double-checked on infra side, but we want to fail early to avoid network latency.\nconst assertFilesMeetConfig = (files, routeConfig)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.gen(function*() {\n        const counts = {};\n        for (const file of files){\n            const type = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.matchFileType)(file, (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(routeConfig));\n            counts[type] = (counts[type] ?? 0) + 1;\n            const sizeLimit = routeConfig[type]?.maxFileSize;\n            if (!sizeLimit) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(type, \"maxFileSize\");\n            }\n            const sizeLimitBytes = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fileSizeToBytes)(sizeLimit);\n            if (file.size > sizeLimitBytes) {\n                return yield* new FileSizeMismatch(type, sizeLimit, file.size);\n            }\n        }\n        for(const _key in counts){\n            const key = _key;\n            const config = routeConfig[key];\n            if (!config) return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.InvalidRouteConfigError(key);\n            const count = counts[key];\n            const min = config.minFileCount;\n            const max = config.maxFileCount;\n            if (min > max) {\n                return yield* new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"Invalid config during file count - minFileCount > maxFileCount\",\n                    cause: `minFileCount must be less than maxFileCount for key ${key}. got: ${min} > ${max}`\n                });\n            }\n            if (count != null && count < min) {\n                return yield* new FileCountMismatch(key, \"minimum\", min, count);\n            }\n            if (count != null && count > max) {\n                return yield* new FileCountMismatch(key, \"maximum\", max, count);\n            }\n        }\n        return null;\n    });\nconst extractRouterConfig = (router)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.forEach((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.objectKeys)(router), (slug)=>effect_Effect__WEBPACK_IMPORTED_MODULE_2__.map((0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.fillInputRouteConfig)(router[slug].routerConfig), (config)=>({\n                slug,\n                config\n            })));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcm91dGUtY29uZmlnLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQW9DO0FBQ0k7QUFDMkg7O0FBRW5LLCtCQUErQiw4Q0FBVTtBQUN6QztBQUNBLHlDQUF5QyxNQUFNLGdCQUFnQixvRUFBZSxTQUFTLG1DQUFtQyxJQUFJO0FBQzlIO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGdDQUFnQyw4Q0FBVTtBQUMxQztBQUNBLHVDQUF1QyxRQUFRLG1CQUFtQixLQUFLLGFBQWEsV0FBVyxtQkFBbUIsTUFBTTtBQUN4SDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsOENBQVU7QUFDOUQ7QUFDQTtBQUNBLGdDQUFnQyxrRUFBYSxPQUFPLCtEQUFVO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyx3RUFBdUI7QUFDekQ7QUFDQSwwQ0FBMEMsb0VBQWU7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsd0VBQXVCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLGlFQUFnQjtBQUNsRDtBQUNBO0FBQ0Esa0ZBQWtGLElBQUksU0FBUyxLQUFLLElBQUksSUFBSTtBQUM1RyxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLHNDQUFzQyxrREFBYyxDQUFDLCtEQUFVLGtCQUFrQiw4Q0FBVSxDQUFDLHlFQUFvQjtBQUNoSDtBQUNBO0FBQ0EsYUFBYTs7QUFFeUMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcm91dGUtY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIERhdGEgZnJvbSAnZWZmZWN0L0RhdGEnO1xuaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0IHsgbWF0Y2hGaWxlVHlwZSwgb2JqZWN0S2V5cywgSW52YWxpZFJvdXRlQ29uZmlnRXJyb3IsIGZpbGVTaXplVG9CeXRlcywgVXBsb2FkVGhpbmdFcnJvciwgZmlsbElucHV0Um91dGVDb25maWcsIGJ5dGVzVG9GaWxlU2l6ZSB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuXG5jbGFzcyBGaWxlU2l6ZU1pc21hdGNoIGV4dGVuZHMgRGF0YS5FcnJvciB7XG4gICAgY29uc3RydWN0b3IodHlwZSwgbWF4LCBhY3R1YWwpe1xuICAgICAgICBjb25zdCByZWFzb24gPSBgWW91IHVwbG9hZGVkIGEgJHt0eXBlfSBmaWxlIHRoYXQgd2FzICR7Ynl0ZXNUb0ZpbGVTaXplKGFjdHVhbCl9LCBidXQgdGhlIGxpbWl0IGZvciB0aGF0IHR5cGUgaXMgJHttYXh9YDtcbiAgICAgICAgc3VwZXIoe1xuICAgICAgICAgICAgcmVhc29uXG4gICAgICAgIH0pLCB0aGlzLl90YWcgPSBcIkZpbGVTaXplTWlzbWF0Y2hcIiwgdGhpcy5uYW1lID0gXCJGaWxlU2l6ZU1pc21hdGNoRXJyb3JcIjtcbiAgICB9XG59XG5jbGFzcyBGaWxlQ291bnRNaXNtYXRjaCBleHRlbmRzIERhdGEuRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGJvdW5kdHlwZSwgYm91bmQsIGFjdHVhbCl7XG4gICAgICAgIGNvbnN0IHJlYXNvbiA9IGBZb3UgdXBsb2FkZWQgJHthY3R1YWx9IGZpbGUocykgb2YgdHlwZSAnJHt0eXBlfScsIGJ1dCB0aGUgJHtib3VuZHR5cGV9IGZvciB0aGF0IHR5cGUgaXMgJHtib3VuZH1gO1xuICAgICAgICBzdXBlcih7XG4gICAgICAgICAgICByZWFzb25cbiAgICAgICAgfSksIHRoaXMuX3RhZyA9IFwiRmlsZUNvdW50TWlzbWF0Y2hcIiwgdGhpcy5uYW1lID0gXCJGaWxlQ291bnRNaXNtYXRjaEVycm9yXCI7XG4gICAgfVxufVxuLy8gVmVyaWZ5IHRoYXQgdGhlIHVwbG9hZGVkIGZpbGVzIGRvZXNuJ3QgdmlvbGF0ZSB0aGUgcm91dGUgY29uZmlnLFxuLy8gZS5nLiB1cGxvYWRpbmcgbW9yZSB2aWRlb3MgdGhhbiBhbGxvd2VkLCBvciBhIGZpbGUgdGhhdCBpcyBsYXJnZXIgdGhhbiBhbGxvd2VkLlxuLy8gVGhpcyBpcyBkb3VibGUtY2hlY2tlZCBvbiBpbmZyYSBzaWRlLCBidXQgd2Ugd2FudCB0byBmYWlsIGVhcmx5IHRvIGF2b2lkIG5ldHdvcmsgbGF0ZW5jeS5cbmNvbnN0IGFzc2VydEZpbGVzTWVldENvbmZpZyA9IChmaWxlcywgcm91dGVDb25maWcpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgY291bnRzID0ge307XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcyl7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0geWllbGQqIG1hdGNoRmlsZVR5cGUoZmlsZSwgb2JqZWN0S2V5cyhyb3V0ZUNvbmZpZykpO1xuICAgICAgICAgICAgY291bnRzW3R5cGVdID0gKGNvdW50c1t0eXBlXSA/PyAwKSArIDE7XG4gICAgICAgICAgICBjb25zdCBzaXplTGltaXQgPSByb3V0ZUNvbmZpZ1t0eXBlXT8ubWF4RmlsZVNpemU7XG4gICAgICAgICAgICBpZiAoIXNpemVMaW1pdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IEludmFsaWRSb3V0ZUNvbmZpZ0Vycm9yKHR5cGUsIFwibWF4RmlsZVNpemVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBzaXplTGltaXRCeXRlcyA9IHlpZWxkKiBmaWxlU2l6ZVRvQnl0ZXMoc2l6ZUxpbWl0KTtcbiAgICAgICAgICAgIGlmIChmaWxlLnNpemUgPiBzaXplTGltaXRCeXRlcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IEZpbGVTaXplTWlzbWF0Y2godHlwZSwgc2l6ZUxpbWl0LCBmaWxlLnNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvcihjb25zdCBfa2V5IGluIGNvdW50cyl7XG4gICAgICAgICAgICBjb25zdCBrZXkgPSBfa2V5O1xuICAgICAgICAgICAgY29uc3QgY29uZmlnID0gcm91dGVDb25maWdba2V5XTtcbiAgICAgICAgICAgIGlmICghY29uZmlnKSByZXR1cm4geWllbGQqIG5ldyBJbnZhbGlkUm91dGVDb25maWdFcnJvcihrZXkpO1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBjb3VudHNba2V5XTtcbiAgICAgICAgICAgIGNvbnN0IG1pbiA9IGNvbmZpZy5taW5GaWxlQ291bnQ7XG4gICAgICAgICAgICBjb25zdCBtYXggPSBjb25maWcubWF4RmlsZUNvdW50O1xuICAgICAgICAgICAgaWYgKG1pbiA+IG1heCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiSW52YWxpZCBjb25maWcgZHVyaW5nIGZpbGUgY291bnQgLSBtaW5GaWxlQ291bnQgPiBtYXhGaWxlQ291bnRcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGBtaW5GaWxlQ291bnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4RmlsZUNvdW50IGZvciBrZXkgJHtrZXl9LiBnb3Q6ICR7bWlufSA+ICR7bWF4fWBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb3VudCAhPSBudWxsICYmIGNvdW50IDwgbWluKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBuZXcgRmlsZUNvdW50TWlzbWF0Y2goa2V5LCBcIm1pbmltdW1cIiwgbWluLCBjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY291bnQgIT0gbnVsbCAmJiBjb3VudCA+IG1heCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogbmV3IEZpbGVDb3VudE1pc21hdGNoKGtleSwgXCJtYXhpbXVtXCIsIG1heCwgY291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0pO1xuY29uc3QgZXh0cmFjdFJvdXRlckNvbmZpZyA9IChyb3V0ZXIpPT5FZmZlY3QuZm9yRWFjaChvYmplY3RLZXlzKHJvdXRlciksIChzbHVnKT0+RWZmZWN0Lm1hcChmaWxsSW5wdXRSb3V0ZUNvbmZpZyhyb3V0ZXJbc2x1Z10ucm91dGVyQ29uZmlnKSwgKGNvbmZpZyk9Pih7XG4gICAgICAgICAgICAgICAgc2x1ZyxcbiAgICAgICAgICAgICAgICBjb25maWdcbiAgICAgICAgICAgIH0pKSk7XG5cbmV4cG9ydCB7IGFzc2VydEZpbGVzTWVldENvbmZpZywgZXh0cmFjdFJvdXRlckNvbmZpZyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js":
/*!************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/runtime.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeRuntime: () => (/* binding */ makeRuntime)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/FetchHttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/Headers.js\");\n/* harmony import */ var effect_FiberRef__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect/FiberRef */ \"(rsc)/./node_modules/effect/dist/esm/FiberRef.js\");\n/* harmony import */ var effect_Layer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Layer */ \"(rsc)/./node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! effect/ManagedRuntime */ \"(rsc)/./node_modules/effect/dist/esm/ManagedRuntime.js\");\n/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n\n\n\n\n\n\n\nconst makeRuntime = (fetch, config)=>{\n    const fetchHttpClient = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.provideMerge(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.layer, effect_Layer__WEBPACK_IMPORTED_MODULE_0__.succeed(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.Fetch, fetch));\n    const withRedactedHeaders = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.effectDiscard(effect_FiberRef__WEBPACK_IMPORTED_MODULE_2__.update(_effect_platform__WEBPACK_IMPORTED_MODULE_3__.currentRedactedNames, (_)=>_.concat([\n            \"x-uploadthing-api-key\"\n        ])));\n    const layer = effect_Layer__WEBPACK_IMPORTED_MODULE_0__.provide(effect_Layer__WEBPACK_IMPORTED_MODULE_0__.mergeAll(_logger_js__WEBPACK_IMPORTED_MODULE_4__.withLogFormat, _logger_js__WEBPACK_IMPORTED_MODULE_4__.withMinimalLogLevel, fetchHttpClient, withRedactedHeaders), effect_Layer__WEBPACK_IMPORTED_MODULE_0__.setConfigProvider((0,_config_js__WEBPACK_IMPORTED_MODULE_5__.configProvider)(config)));\n    return effect_ManagedRuntime__WEBPACK_IMPORTED_MODULE_6__.make(layer);\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUE0RDtBQUNoQjtBQUNOO0FBQ2tCO0FBQ1g7QUFDb0I7O0FBRWpFO0FBQ0EsNEJBQTRCLHNEQUFrQixDQUFDLG1EQUFxQixFQUFFLGlEQUFhLENBQUMsbURBQXFCO0FBQ3pHLGdDQUFnQyx1REFBbUIsQ0FBQyxtREFBZSxDQUFDLGtFQUE0QjtBQUNoRztBQUNBO0FBQ0Esa0JBQWtCLGlEQUFhLENBQUMsa0RBQWMsQ0FBQyxxREFBYSxFQUFFLDJEQUFtQix5Q0FBeUMsMkRBQXVCLENBQUMsMERBQWM7QUFDaEssV0FBVyx1REFBbUI7QUFDOUI7O0FBRXVCIiwic291cmNlcyI6WyIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3Qvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL3J1bnRpbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmV0Y2hIdHRwQ2xpZW50LCBIZWFkZXJzIH0gZnJvbSAnQGVmZmVjdC9wbGF0Zm9ybSc7XG5pbXBvcnQgKiBhcyBGaWJlclJlZiBmcm9tICdlZmZlY3QvRmliZXJSZWYnO1xuaW1wb3J0ICogYXMgTGF5ZXIgZnJvbSAnZWZmZWN0L0xheWVyJztcbmltcG9ydCAqIGFzIE1hbmFnZWRSdW50aW1lIGZyb20gJ2VmZmVjdC9NYW5hZ2VkUnVudGltZSc7XG5pbXBvcnQgeyBjb25maWdQcm92aWRlciB9IGZyb20gJy4vY29uZmlnLmpzJztcbmltcG9ydCB7IHdpdGhMb2dGb3JtYXQsIHdpdGhNaW5pbWFsTG9nTGV2ZWwgfSBmcm9tICcuL2xvZ2dlci5qcyc7XG5cbmNvbnN0IG1ha2VSdW50aW1lID0gKGZldGNoLCBjb25maWcpPT57XG4gICAgY29uc3QgZmV0Y2hIdHRwQ2xpZW50ID0gTGF5ZXIucHJvdmlkZU1lcmdlKEZldGNoSHR0cENsaWVudC5sYXllciwgTGF5ZXIuc3VjY2VlZChGZXRjaEh0dHBDbGllbnQuRmV0Y2gsIGZldGNoKSk7XG4gICAgY29uc3Qgd2l0aFJlZGFjdGVkSGVhZGVycyA9IExheWVyLmVmZmVjdERpc2NhcmQoRmliZXJSZWYudXBkYXRlKEhlYWRlcnMuY3VycmVudFJlZGFjdGVkTmFtZXMsIChfKT0+Xy5jb25jYXQoW1xuICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWFwaS1rZXlcIlxuICAgICAgICBdKSkpO1xuICAgIGNvbnN0IGxheWVyID0gTGF5ZXIucHJvdmlkZShMYXllci5tZXJnZUFsbCh3aXRoTG9nRm9ybWF0LCB3aXRoTWluaW1hbExvZ0xldmVsLCBmZXRjaEh0dHBDbGllbnQsIHdpdGhSZWRhY3RlZEhlYWRlcnMpLCBMYXllci5zZXRDb25maWdQcm92aWRlcihjb25maWdQcm92aWRlcihjb25maWcpKSk7XG4gICAgcmV0dXJuIE1hbmFnZWRSdW50aW1lLm1ha2UobGF5ZXIpO1xufTtcblxuZXhwb3J0IHsgbWFrZVJ1bnRpbWUgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js":
/*!*******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/shared-schemas.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ACLSchema: () => (/* binding */ ACLSchema),\n/* harmony export */   ActionType: () => (/* binding */ ActionType),\n/* harmony export */   CallbackResultResponse: () => (/* binding */ CallbackResultResponse),\n/* harmony export */   ContentDispositionSchema: () => (/* binding */ ContentDispositionSchema),\n/* harmony export */   FileUploadData: () => (/* binding */ FileUploadData),\n/* harmony export */   FileUploadDataWithCustomId: () => (/* binding */ FileUploadDataWithCustomId),\n/* harmony export */   MetadataFetchResponse: () => (/* binding */ MetadataFetchResponse),\n/* harmony export */   MetadataFetchStreamPart: () => (/* binding */ MetadataFetchStreamPart),\n/* harmony export */   NewPresignedUrl: () => (/* binding */ NewPresignedUrl),\n/* harmony export */   ParsedToken: () => (/* binding */ ParsedToken),\n/* harmony export */   UploadActionPayload: () => (/* binding */ UploadActionPayload),\n/* harmony export */   UploadThingHook: () => (/* binding */ UploadThingHook),\n/* harmony export */   UploadThingToken: () => (/* binding */ UploadThingToken),\n/* harmony export */   UploadedFileData: () => (/* binding */ UploadedFileData)\n/* harmony export */ });\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n\n\n\nconst ContentDispositionSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidContentDispositions);\nconst ACLSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(..._uploadthing_shared__WEBPACK_IMPORTED_MODULE_1__.ValidACLs);\n/**\n * Valid options for the `?actionType` query param\n */ const ActionType = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"upload\");\n/**\n * Valid options for the `uploadthing-hook` header\n * for requests coming from UT server\n */ const UploadThingHook = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal(\"callback\", \"error\");\n/**\n * =============================================================================\n * =========================== Configuration ===================================\n * =============================================================================\n */ const DecodeString = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transform(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, {\n    decode: (data)=>new TextDecoder().decode(data),\n    encode: (data)=>new TextEncoder().encode(data)\n});\nconst ParsedToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    apiKey: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Redacted(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.startsWith(\"sk_\"))),\n    appId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    regions: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArray(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n    ingestHost: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalWith({\n        default: ()=>\"ingest.uploadthing.com\"\n    }))\n});\nconst UploadThingToken = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(DecodeString), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseJson(ParsedToken)));\n/**\n * =============================================================================\n * ======================== File Type Hierarchy ===============================\n * =============================================================================\n */ /**\n * Properties from the web File object, this is what the client sends when initiating an upload\n */ class FileUploadData extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"FileUploadData\")({\n    name: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    size: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number,\n    type: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    lastModified: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number.pipe(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optional)\n}) {\n}\n/**\n * `.middleware()` can add a customId to the incoming file data\n */ class FileUploadDataWithCustomId extends FileUploadData.extend(\"FileUploadDataWithCustomId\")({\n    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String)\n}) {\n}\n/**\n * When files are uploaded, we get back\n * - a key\n * - URLs for the file\n * - the hash (md5-hex) of the uploaded file's contents\n */ class UploadedFileData extends FileUploadDataWithCustomId.extend(\"UploadedFileData\")({\n    key: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    /**\n   * @deprecated\n   * This field will be removed in uploadthing v9. Use `ufsUrl` instead.\n   */ url: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    /**\n   * @deprecated\n   * This field will be removed in uploadthing v9. Use `ufsUrl` instead.\n   */ appUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    ufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    fileHash: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {\n}\n/**\n * =============================================================================\n * ======================== Server Response Schemas ============================\n * =============================================================================\n */ class NewPresignedUrl extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"NewPresignedUrl\")({\n    url: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    key: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n    name: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String\n}) {\n}\nclass MetadataFetchStreamPart extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchStreamPart\")({\n    payload: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    signature: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String,\n    hook: UploadThingHook\n}) {\n}\nclass MetadataFetchResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"MetadataFetchResponse\")({\n    ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean\n}) {\n}\nclass CallbackResultResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"CallbackResultResponse\")({\n    ok: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean\n}) {\n}\n/**\n * =============================================================================\n * ======================== Client Action Payloads ============================\n * =============================================================================\n */ class UploadActionPayload extends effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class(\"UploadActionPayload\")({\n    files: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array(FileUploadData),\n    input: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Unknown\n}) {\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvc2hhcmVkLXNjaGVtYXMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFtQztBQUN1Qzs7QUFFMUUsaUNBQWlDLGtEQUFTLElBQUkseUVBQXdCO0FBQ3RFLGtCQUFrQixrREFBUyxJQUFJLDBEQUFTO0FBQ3hDO0FBQ0E7QUFDQSx1QkFBdUIsa0RBQVM7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLG9EQUFXLENBQUMsNkRBQW9CLEVBQUUsaURBQVE7QUFDbkU7QUFDQTtBQUNBLENBQUM7QUFDRCxvQkFBb0IsaURBQVE7QUFDNUIsWUFBWSxtREFBVSxDQUFDLGlEQUFRLE1BQU0scURBQVk7QUFDakQsV0FBVyxpREFBUTtBQUNuQixhQUFhLHdEQUFlLENBQUMsaURBQVE7QUFDckMsZ0JBQWdCLGlEQUFRLE1BQU0sdURBQWM7QUFDNUM7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNELHlCQUF5QiwrREFBc0IsTUFBTSxrREFBUyxnQkFBZ0Isa0RBQVMsQ0FBQyxvREFBVztBQUNuRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMsZ0RBQU87QUFDeEMsVUFBVSxpREFBUTtBQUNsQixVQUFVLGlEQUFRO0FBQ2xCLFVBQVUsaURBQVE7QUFDbEIsa0JBQWtCLGlEQUFRLE1BQU0sbURBQVU7QUFDMUMsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxpREFBUSxDQUFDLGlEQUFRO0FBQy9CLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaURBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0EsV0FBVyxpREFBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSxjQUFjLGlEQUFRO0FBQ3RCLFlBQVksaURBQVE7QUFDcEIsY0FBYyxpREFBUTtBQUN0QixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxnREFBTztBQUN6QyxTQUFTLGlEQUFRO0FBQ2pCLFNBQVMsaURBQVE7QUFDakIsY0FBYyxpREFBUSxDQUFDLGlEQUFRO0FBQy9CLFVBQVUsaURBQVE7QUFDbEIsQ0FBQztBQUNEO0FBQ0Esc0NBQXNDLGdEQUFPO0FBQzdDLGFBQWEsaURBQVE7QUFDckIsZUFBZSxpREFBUTtBQUN2QjtBQUNBLENBQUM7QUFDRDtBQUNBLG9DQUFvQyxnREFBTztBQUMzQyxRQUFRLGtEQUFTO0FBQ2pCLENBQUM7QUFDRDtBQUNBLHFDQUFxQyxnREFBTztBQUM1QyxRQUFRLGtEQUFTO0FBQ2pCLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLGdEQUFPO0FBQzdDLFdBQVcsZ0RBQU87QUFDbEIsV0FBVyxrREFBUztBQUNwQixDQUFDO0FBQ0Q7O0FBRXVSIiwic291cmNlcyI6WyIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3Qvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL3NoYXJlZC1zY2hlbWFzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIFMgZnJvbSAnZWZmZWN0L1NjaGVtYSc7XG5pbXBvcnQgeyBWYWxpZENvbnRlbnREaXNwb3NpdGlvbnMsIFZhbGlkQUNMcyB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuXG5jb25zdCBDb250ZW50RGlzcG9zaXRpb25TY2hlbWEgPSBTLkxpdGVyYWwoLi4uVmFsaWRDb250ZW50RGlzcG9zaXRpb25zKTtcbmNvbnN0IEFDTFNjaGVtYSA9IFMuTGl0ZXJhbCguLi5WYWxpZEFDTHMpO1xuLyoqXG4gKiBWYWxpZCBvcHRpb25zIGZvciB0aGUgYD9hY3Rpb25UeXBlYCBxdWVyeSBwYXJhbVxuICovIGNvbnN0IEFjdGlvblR5cGUgPSBTLkxpdGVyYWwoXCJ1cGxvYWRcIik7XG4vKipcbiAqIFZhbGlkIG9wdGlvbnMgZm9yIHRoZSBgdXBsb2FkdGhpbmctaG9va2AgaGVhZGVyXG4gKiBmb3IgcmVxdWVzdHMgY29taW5nIGZyb20gVVQgc2VydmVyXG4gKi8gY29uc3QgVXBsb2FkVGhpbmdIb29rID0gUy5MaXRlcmFsKFwiY2FsbGJhY2tcIiwgXCJlcnJvclwiKTtcbi8qKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PSBDb25maWd1cmF0aW9uID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovIGNvbnN0IERlY29kZVN0cmluZyA9IFMudHJhbnNmb3JtKFMuVWludDhBcnJheUZyb21TZWxmLCBTLlN0cmluZywge1xuICAgIGRlY29kZTogKGRhdGEpPT5uZXcgVGV4dERlY29kZXIoKS5kZWNvZGUoZGF0YSksXG4gICAgZW5jb2RlOiAoZGF0YSk9Pm5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkYXRhKVxufSk7XG5jb25zdCBQYXJzZWRUb2tlbiA9IFMuU3RydWN0KHtcbiAgICBhcGlLZXk6IFMuUmVkYWN0ZWQoUy5TdHJpbmcucGlwZShTLnN0YXJ0c1dpdGgoXCJza19cIikpKSxcbiAgICBhcHBJZDogUy5TdHJpbmcsXG4gICAgcmVnaW9uczogUy5Ob25FbXB0eUFycmF5KFMuU3RyaW5nKSxcbiAgICBpbmdlc3RIb3N0OiBTLlN0cmluZy5waXBlKFMub3B0aW9uYWxXaXRoKHtcbiAgICAgICAgZGVmYXVsdDogKCk9PlwiaW5nZXN0LnVwbG9hZHRoaW5nLmNvbVwiXG4gICAgfSkpXG59KTtcbmNvbnN0IFVwbG9hZFRoaW5nVG9rZW4gPSBTLlVpbnQ4QXJyYXlGcm9tQmFzZTY0LnBpcGUoUy5jb21wb3NlKERlY29kZVN0cmluZyksIFMuY29tcG9zZShTLnBhcnNlSnNvbihQYXJzZWRUb2tlbikpKTtcbi8qKlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PSBGaWxlIFR5cGUgSGllcmFyY2h5ID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi8gLyoqXG4gKiBQcm9wZXJ0aWVzIGZyb20gdGhlIHdlYiBGaWxlIG9iamVjdCwgdGhpcyBpcyB3aGF0IHRoZSBjbGllbnQgc2VuZHMgd2hlbiBpbml0aWF0aW5nIGFuIHVwbG9hZFxuICovIGNsYXNzIEZpbGVVcGxvYWREYXRhIGV4dGVuZHMgUy5DbGFzcyhcIkZpbGVVcGxvYWREYXRhXCIpKHtcbiAgICBuYW1lOiBTLlN0cmluZyxcbiAgICBzaXplOiBTLk51bWJlcixcbiAgICB0eXBlOiBTLlN0cmluZyxcbiAgICBsYXN0TW9kaWZpZWQ6IFMuTnVtYmVyLnBpcGUoUy5vcHRpb25hbClcbn0pIHtcbn1cbi8qKlxuICogYC5taWRkbGV3YXJlKClgIGNhbiBhZGQgYSBjdXN0b21JZCB0byB0aGUgaW5jb21pbmcgZmlsZSBkYXRhXG4gKi8gY2xhc3MgRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWQgZXh0ZW5kcyBGaWxlVXBsb2FkRGF0YS5leHRlbmQoXCJGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZFwiKSh7XG4gICAgY3VzdG9tSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKVxufSkge1xufVxuLyoqXG4gKiBXaGVuIGZpbGVzIGFyZSB1cGxvYWRlZCwgd2UgZ2V0IGJhY2tcbiAqIC0gYSBrZXlcbiAqIC0gVVJMcyBmb3IgdGhlIGZpbGVcbiAqIC0gdGhlIGhhc2ggKG1kNS1oZXgpIG9mIHRoZSB1cGxvYWRlZCBmaWxlJ3MgY29udGVudHNcbiAqLyBjbGFzcyBVcGxvYWRlZEZpbGVEYXRhIGV4dGVuZHMgRmlsZVVwbG9hZERhdGFXaXRoQ3VzdG9tSWQuZXh0ZW5kKFwiVXBsb2FkZWRGaWxlRGF0YVwiKSh7XG4gICAga2V5OiBTLlN0cmluZyxcbiAgICAvKipcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogVGhpcyBmaWVsZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgdWZzVXJsYCBpbnN0ZWFkLlxuICAgKi8gdXJsOiBTLlN0cmluZyxcbiAgICAvKipcbiAgICogQGRlcHJlY2F0ZWRcbiAgICogVGhpcyBmaWVsZCB3aWxsIGJlIHJlbW92ZWQgaW4gdXBsb2FkdGhpbmcgdjkuIFVzZSBgdWZzVXJsYCBpbnN0ZWFkLlxuICAgKi8gYXBwVXJsOiBTLlN0cmluZyxcbiAgICB1ZnNVcmw6IFMuU3RyaW5nLFxuICAgIGZpbGVIYXNoOiBTLlN0cmluZ1xufSkge1xufVxuLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogPT09PT09PT09PT09PT09PT09PT09PT09IFNlcnZlciBSZXNwb25zZSBTY2hlbWFzID09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKi8gY2xhc3MgTmV3UHJlc2lnbmVkVXJsIGV4dGVuZHMgUy5DbGFzcyhcIk5ld1ByZXNpZ25lZFVybFwiKSh7XG4gICAgdXJsOiBTLlN0cmluZyxcbiAgICBrZXk6IFMuU3RyaW5nLFxuICAgIGN1c3RvbUlkOiBTLk51bGxPcihTLlN0cmluZyksXG4gICAgbmFtZTogUy5TdHJpbmdcbn0pIHtcbn1cbmNsYXNzIE1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0IGV4dGVuZHMgUy5DbGFzcyhcIk1ldGFkYXRhRmV0Y2hTdHJlYW1QYXJ0XCIpKHtcbiAgICBwYXlsb2FkOiBTLlN0cmluZyxcbiAgICBzaWduYXR1cmU6IFMuU3RyaW5nLFxuICAgIGhvb2s6IFVwbG9hZFRoaW5nSG9va1xufSkge1xufVxuY2xhc3MgTWV0YWRhdGFGZXRjaFJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIk1ldGFkYXRhRmV0Y2hSZXNwb25zZVwiKSh7XG4gICAgb2s6IFMuQm9vbGVhblxufSkge1xufVxuY2xhc3MgQ2FsbGJhY2tSZXN1bHRSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJDYWxsYmFja1Jlc3VsdFJlc3BvbnNlXCIpKHtcbiAgICBvazogUy5Cb29sZWFuXG59KSB7XG59XG4vKipcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT0gQ2xpZW50IEFjdGlvbiBQYXlsb2FkcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICovIGNsYXNzIFVwbG9hZEFjdGlvblBheWxvYWQgZXh0ZW5kcyBTLkNsYXNzKFwiVXBsb2FkQWN0aW9uUGF5bG9hZFwiKSh7XG4gICAgZmlsZXM6IFMuQXJyYXkoRmlsZVVwbG9hZERhdGEpLFxuICAgIGlucHV0OiBTLlVua25vd25cbn0pIHtcbn1cblxuZXhwb3J0IHsgQUNMU2NoZW1hLCBBY3Rpb25UeXBlLCBDYWxsYmFja1Jlc3VsdFJlc3BvbnNlLCBDb250ZW50RGlzcG9zaXRpb25TY2hlbWEsIEZpbGVVcGxvYWREYXRhLCBGaWxlVXBsb2FkRGF0YVdpdGhDdXN0b21JZCwgTWV0YWRhdGFGZXRjaFJlc3BvbnNlLCBNZXRhZGF0YUZldGNoU3RyZWFtUGFydCwgTmV3UHJlc2lnbmVkVXJsLCBQYXJzZWRUb2tlbiwgVXBsb2FkQWN0aW9uUGF5bG9hZCwgVXBsb2FkVGhpbmdIb29rLCBVcGxvYWRUaGluZ1Rva2VuLCBVcGxvYWRlZEZpbGVEYXRhIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/shared-schemas.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/types.js":
/*!**********************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/types.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* binding */ UTFiles)\n/* harmony export */ });\n/**\n * Marker used to append a `customId` to the incoming file data in `.middleware()`\n * @example\n * ```ts\n * .middleware((opts) => {\n *   return {\n *     [UTFiles]: opts.files.map((file) => ({\n *       ...file,\n *       customId: generateId(),\n *     }))\n *   };\n * })\n * ```\n */ const UTFiles = Symbol(\"uploadthing-custom-id-symbol\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdHlwZXMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVtQiIsInNvdXJjZXMiOlsiL1VzZXJzL2thcnRoaWtuYWRhci9EZXNrdG9wL3BkZnN0L25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC90eXBlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1hcmtlciB1c2VkIHRvIGFwcGVuZCBhIGBjdXN0b21JZGAgdG8gdGhlIGluY29taW5nIGZpbGUgZGF0YSBpbiBgLm1pZGRsZXdhcmUoKWBcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogLm1pZGRsZXdhcmUoKG9wdHMpID0+IHtcbiAqICAgcmV0dXJuIHtcbiAqICAgICBbVVRGaWxlc106IG9wdHMuZmlsZXMubWFwKChmaWxlKSA9PiAoe1xuICogICAgICAgLi4uZmlsZSxcbiAqICAgICAgIGN1c3RvbUlkOiBnZW5lcmF0ZUlkKCksXG4gKiAgICAgfSkpXG4gKiAgIH07XG4gKiB9KVxuICogYGBgXG4gKi8gY29uc3QgVVRGaWxlcyA9IFN5bWJvbChcInVwbG9hZHRoaW5nLWN1c3RvbS1pZC1zeW1ib2xcIik7XG5cbmV4cG9ydCB7IFVURmlsZXMgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/types.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js":
/*!*******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/upload-builder.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createBuilder: () => (/* binding */ createBuilder)\n/* harmony export */ });\n/* harmony import */ var _error_formatter_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./error-formatter.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/error-formatter.js\");\n\n\nfunction internalCreateBuilder(initDef = {}) {\n    const _def = {\n        $types: {},\n        // Default router config\n        routerConfig: {\n            image: {\n                maxFileSize: \"4MB\"\n            }\n        },\n        routeOptions: {\n            awaitServerData: true\n        },\n        inputParser: {\n            parseAsync: ()=>Promise.resolve(undefined),\n            _input: undefined,\n            _output: undefined\n        },\n        middleware: ()=>({}),\n        onUploadError: ()=>{\n        // noop\n        },\n        onUploadComplete: ()=>undefined,\n        errorFormatter: initDef.errorFormatter ?? _error_formatter_js__WEBPACK_IMPORTED_MODULE_0__.defaultErrorFormatter,\n        // Overload with properties passed in\n        ...initDef\n    };\n    return {\n        input (userParser) {\n            return internalCreateBuilder({\n                ..._def,\n                inputParser: userParser\n            });\n        },\n        middleware (userMiddleware) {\n            return internalCreateBuilder({\n                ..._def,\n                middleware: userMiddleware\n            });\n        },\n        onUploadComplete (userUploadComplete) {\n            return {\n                ..._def,\n                onUploadComplete: userUploadComplete\n            };\n        },\n        onUploadError (userOnUploadError) {\n            return internalCreateBuilder({\n                ..._def,\n                onUploadError: userOnUploadError\n            });\n        }\n    };\n}\nfunction createBuilder(opts) {\n    return (input, config)=>{\n        return internalCreateBuilder({\n            routerConfig: input,\n            routeOptions: config ?? {},\n            ...opts\n        });\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLWJ1aWxkZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBNkQ7O0FBRTdELDJDQUEyQztBQUMzQztBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxrREFBa0Qsc0VBQXFCO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRXlCIiwic291cmNlcyI6WyIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3Qvbm9kZV9tb2R1bGVzL3VwbG9hZHRoaW5nL2Rpc3QvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGRlZmF1bHRFcnJvckZvcm1hdHRlciB9IGZyb20gJy4vZXJyb3ItZm9ybWF0dGVyLmpzJztcblxuZnVuY3Rpb24gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKGluaXREZWYgPSB7fSkge1xuICAgIGNvbnN0IF9kZWYgPSB7XG4gICAgICAgICR0eXBlczoge30sXG4gICAgICAgIC8vIERlZmF1bHQgcm91dGVyIGNvbmZpZ1xuICAgICAgICByb3V0ZXJDb25maWc6IHtcbiAgICAgICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICAgICAgbWF4RmlsZVNpemU6IFwiNE1CXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcm91dGVPcHRpb25zOiB7XG4gICAgICAgICAgICBhd2FpdFNlcnZlckRhdGE6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgaW5wdXRQYXJzZXI6IHtcbiAgICAgICAgICAgIHBhcnNlQXN5bmM6ICgpPT5Qcm9taXNlLnJlc29sdmUodW5kZWZpbmVkKSxcbiAgICAgICAgICAgIF9pbnB1dDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgX291dHB1dDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmU6ICgpPT4oe30pLFxuICAgICAgICBvblVwbG9hZEVycm9yOiAoKT0+e1xuICAgICAgICAvLyBub29wXG4gICAgICAgIH0sXG4gICAgICAgIG9uVXBsb2FkQ29tcGxldGU6ICgpPT51bmRlZmluZWQsXG4gICAgICAgIGVycm9yRm9ybWF0dGVyOiBpbml0RGVmLmVycm9yRm9ybWF0dGVyID8/IGRlZmF1bHRFcnJvckZvcm1hdHRlcixcbiAgICAgICAgLy8gT3ZlcmxvYWQgd2l0aCBwcm9wZXJ0aWVzIHBhc3NlZCBpblxuICAgICAgICAuLi5pbml0RGVmXG4gICAgfTtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnB1dCAodXNlclBhcnNlcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBpbnB1dFBhcnNlcjogdXNlclBhcnNlclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIG1pZGRsZXdhcmUgKHVzZXJNaWRkbGV3YXJlKSB7XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgICAgICAgICAuLi5fZGVmLFxuICAgICAgICAgICAgICAgIG1pZGRsZXdhcmU6IHVzZXJNaWRkbGV3YXJlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb25VcGxvYWRDb21wbGV0ZSAodXNlclVwbG9hZENvbXBsZXRlKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC4uLl9kZWYsXG4gICAgICAgICAgICAgICAgb25VcGxvYWRDb21wbGV0ZTogdXNlclVwbG9hZENvbXBsZXRlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBvblVwbG9hZEVycm9yICh1c2VyT25VcGxvYWRFcnJvcikge1xuICAgICAgICAgICAgcmV0dXJuIGludGVybmFsQ3JlYXRlQnVpbGRlcih7XG4gICAgICAgICAgICAgICAgLi4uX2RlZixcbiAgICAgICAgICAgICAgICBvblVwbG9hZEVycm9yOiB1c2VyT25VcGxvYWRFcnJvclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlQnVpbGRlcihvcHRzKSB7XG4gICAgcmV0dXJuIChpbnB1dCwgY29uZmlnKT0+e1xuICAgICAgICByZXR1cm4gaW50ZXJuYWxDcmVhdGVCdWlsZGVyKHtcbiAgICAgICAgICAgIHJvdXRlckNvbmZpZzogaW5wdXQsXG4gICAgICAgICAgICByb3V0ZU9wdGlvbnM6IGNvbmZpZyA/PyB7fSxcbiAgICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlQnVpbGRlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js":
/*!******************************************************************!*\
  !*** ./node_modules/uploadthing/dist/_internal/upload-server.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   uploadWithoutProgress: () => (/* binding */ uploadWithoutProgress)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Function__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! effect/Function */ \"(rsc)/./node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _deprecations_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./deprecations.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/deprecations.js\");\n/* harmony import */ var _logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n\n\n\n\n\n\n\nvar version = \"7.5.2\";\n\nconst uploadWithoutProgress = (file, presigned)=>effect_Effect__WEBPACK_IMPORTED_MODULE_0__.gen(function*() {\n        const formData = new FormData();\n        formData.append(\"file\", file);\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_1__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_1__.filterStatusOk);\n        const json = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_2__.put(presigned.url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_2__.bodyFormData(formData), _effect_platform__WEBPACK_IMPORTED_MODULE_2__.setHeader(\"Range\", \"bytes=0-\"), _effect_platform__WEBPACK_IMPORTED_MODULE_2__.setHeader(\"x-uploadthing-version\", version), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_0__.tapError((0,_logger_js__WEBPACK_IMPORTED_MODULE_3__.logHttpClientError)(\"Failed to upload file\")), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.mapError((e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_4__.UploadThingError({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to upload file\",\n                cause: e\n            })), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.andThen((_)=>_.json), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.andThen(effect_Function__WEBPACK_IMPORTED_MODULE_5__.unsafeCoerce), effect_Effect__WEBPACK_IMPORTED_MODULE_0__.scoped);\n        yield* effect_Effect__WEBPACK_IMPORTED_MODULE_0__.logDebug(`File ${file.name} uploaded successfully`).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_0__.annotateLogs(\"json\", json));\n        return {\n            ...json,\n            get url () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_6__.logDeprecationWarning)(\"`file.url` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return json.url;\n            },\n            get appUrl () {\n                (0,_deprecations_js__WEBPACK_IMPORTED_MODULE_6__.logDeprecationWarning)(\"`file.appUrl` is deprecated and will be removed in uploadthing v9. Use `file.ufsUrl` instead.\");\n                return json.appUrl;\n            }\n        };\n    });\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvZGlzdC9faW50ZXJuYWwvdXBsb2FkLXNlcnZlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFpRTtBQUN6QjtBQUNPO0FBQ1E7QUFDRztBQUNUOztBQUVqRDs7QUFFQSxpREFBaUQsOENBQVU7QUFDM0Q7QUFDQTtBQUNBLG1DQUFtQyx3REFBcUIsT0FBTyw0REFBeUI7QUFDeEYsNEJBQTRCLGlEQUFxQixxQkFBcUIsMERBQThCLFlBQVksdURBQTJCLHVCQUF1Qix1REFBMkIsd0RBQXdELG1EQUFlLENBQUMsOERBQWtCLDRCQUE0QixtREFBZSxVQUFVLGlFQUFnQjtBQUM1VjtBQUNBO0FBQ0E7QUFDQSxhQUFhLElBQUksa0RBQWMsZUFBZSxrREFBYyxDQUFDLHlEQUFZLEdBQUcsaURBQWE7QUFDekYsZUFBZSxtREFBZSxTQUFTLFdBQVcsNkJBQTZCLHVEQUFtQjtBQUNsRztBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsdUVBQXFCO0FBQ3JDO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsZ0JBQWdCLHVFQUFxQjtBQUNyQztBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUU0QiIsInNvdXJjZXMiOlsiL1VzZXJzL2thcnRoaWtuYWRhci9EZXNrdG9wL3BkZnN0L25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9kaXN0L19pbnRlcm5hbC91cGxvYWQtc2VydmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEh0dHBDbGllbnQsIEh0dHBDbGllbnRSZXF1ZXN0IH0gZnJvbSAnQGVmZmVjdC9wbGF0Zm9ybSc7XG5pbXBvcnQgKiBhcyBFZmZlY3QgZnJvbSAnZWZmZWN0L0VmZmVjdCc7XG5pbXBvcnQgeyB1bnNhZmVDb2VyY2UgfSBmcm9tICdlZmZlY3QvRnVuY3Rpb24nO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciB9IGZyb20gJ0B1cGxvYWR0aGluZy9zaGFyZWQnO1xuaW1wb3J0IHsgbG9nRGVwcmVjYXRpb25XYXJuaW5nIH0gZnJvbSAnLi9kZXByZWNhdGlvbnMuanMnO1xuaW1wb3J0IHsgbG9nSHR0cENsaWVudEVycm9yIH0gZnJvbSAnLi9sb2dnZXIuanMnO1xuXG52YXIgdmVyc2lvbiA9IFwiNy41LjJcIjtcblxuY29uc3QgdXBsb2FkV2l0aG91dFByb2dyZXNzID0gKGZpbGUsIHByZXNpZ25lZCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoXCJmaWxlXCIsIGZpbGUpO1xuICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgIGNvbnN0IGpzb24gPSB5aWVsZCogSHR0cENsaWVudFJlcXVlc3QucHV0KHByZXNpZ25lZC51cmwpLnBpcGUoSHR0cENsaWVudFJlcXVlc3QuYm9keUZvcm1EYXRhKGZvcm1EYXRhKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVyKFwiUmFuZ2VcIiwgXCJieXRlcz0wLVwiKSwgSHR0cENsaWVudFJlcXVlc3Quc2V0SGVhZGVyKFwieC11cGxvYWR0aGluZy12ZXJzaW9uXCIsIHZlcnNpb24pLCBodHRwQ2xpZW50LmV4ZWN1dGUsIEVmZmVjdC50YXBFcnJvcihsb2dIdHRwQ2xpZW50RXJyb3IoXCJGYWlsZWQgdG8gdXBsb2FkIGZpbGVcIikpLCBFZmZlY3QubWFwRXJyb3IoKGUpPT5uZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgY29kZTogXCJVUExPQURfRkFJTEVEXCIsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBsb2FkIGZpbGVcIixcbiAgICAgICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICAgICAgfSkpLCBFZmZlY3QuYW5kVGhlbigoXyk9Pl8uanNvbiksIEVmZmVjdC5hbmRUaGVuKHVuc2FmZUNvZXJjZSksIEVmZmVjdC5zY29wZWQpO1xuICAgICAgICB5aWVsZCogRWZmZWN0LmxvZ0RlYnVnKGBGaWxlICR7ZmlsZS5uYW1lfSB1cGxvYWRlZCBzdWNjZXNzZnVsbHlgKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJqc29uXCIsIGpzb24pKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLmpzb24sXG4gICAgICAgICAgICBnZXQgdXJsICgpIHtcbiAgICAgICAgICAgICAgICBsb2dEZXByZWNhdGlvbldhcm5pbmcoXCJgZmlsZS51cmxgIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB1cGxvYWR0aGluZyB2OS4gVXNlIGBmaWxlLnVmc1VybGAgaW5zdGVhZC5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGpzb24udXJsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldCBhcHBVcmwgKCkge1xuICAgICAgICAgICAgICAgIGxvZ0RlcHJlY2F0aW9uV2FybmluZyhcImBmaWxlLmFwcFVybGAgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHVwbG9hZHRoaW5nIHY5LiBVc2UgYGZpbGUudWZzVXJsYCBpbnN0ZWFkLlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ganNvbi5hcHBVcmw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSk7XG5cbmV4cG9ydCB7IHVwbG9hZFdpdGhvdXRQcm9ncmVzcyB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/next/index.js":
/*!************************************************!*\
  !*** ./node_modules/uploadthing/next/index.js ***!
  \************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_0__.UTFiles),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../dist/_internal/handler.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\");\n/* harmony import */ var _dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dist/_internal/upload-builder.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\");\n/* harmony import */ var _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/_internal/types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n\n\n\n\n\nconst createUploadthing = (opts)=>(0,_dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_1__.createBuilder)(opts);\nconst createRouteHandler = (opts)=>{\n    const handler = (0,_dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_2__.makeAdapterHandler)((req)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.succeed({\n            req,\n            res: undefined,\n            event: undefined\n        }), (req)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.succeed(req), opts, \"nextjs-app\");\n    return {\n        POST: handler,\n        GET: handler\n    };\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvbmV4dC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQXdDO0FBQzBCO0FBQ0U7QUFDZjs7QUFFckQsa0NBQWtDLCtFQUFhO0FBQy9DO0FBQ0Esb0JBQW9CLDZFQUFrQixRQUFRLGtEQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsVUFBVSxrREFBYztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVpRCIsInNvdXJjZXMiOlsiL1VzZXJzL2thcnRoaWtuYWRhci9EZXNrdG9wL3BkZnN0L25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9uZXh0L2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEVmZmVjdCBmcm9tICdlZmZlY3QvRWZmZWN0JztcbmltcG9ydCB7IG1ha2VBZGFwdGVySGFuZGxlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL2hhbmRsZXIuanMnO1xuaW1wb3J0IHsgY3JlYXRlQnVpbGRlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLmpzJztcbmV4cG9ydCB7IFVURmlsZXMgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC90eXBlcy5qcyc7XG5cbmNvbnN0IGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpPT5jcmVhdGVCdWlsZGVyKG9wdHMpO1xuY29uc3QgY3JlYXRlUm91dGVIYW5kbGVyID0gKG9wdHMpPT57XG4gICAgY29uc3QgaGFuZGxlciA9IG1ha2VBZGFwdGVySGFuZGxlcigocmVxKT0+RWZmZWN0LnN1Y2NlZWQoe1xuICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgcmVzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBldmVudDogdW5kZWZpbmVkXG4gICAgICAgIH0pLCAocmVxKT0+RWZmZWN0LnN1Y2NlZWQocmVxKSwgb3B0cywgXCJuZXh0anMtYXBwXCIpO1xuICAgIHJldHVybiB7XG4gICAgICAgIFBPU1Q6IGhhbmRsZXIsXG4gICAgICAgIEdFVDogaGFuZGxlclxuICAgIH07XG59O1xuXG5leHBvcnQgeyBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/next/index.js\n");

/***/ }),

/***/ "(rsc)/./node_modules/uploadthing/server/index.js":
/*!**************************************************!*\
  !*** ./node_modules/uploadthing/server/index.js ***!
  \**************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   UTApi: () => (/* binding */ UTApi),\n/* harmony export */   UTFile: () => (/* binding */ UTFile),\n/* harmony export */   UTFiles: () => (/* reexport safe */ _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_1__.UTFiles),\n/* harmony export */   UploadThingError: () => (/* reexport safe */ _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError),\n/* harmony export */   createRouteHandler: () => (/* binding */ createRouteHandler),\n/* harmony export */   createUploadthing: () => (/* binding */ createUploadthing),\n/* harmony export */   extractRouterConfig: () => (/* binding */ extractRouterConfig)\n/* harmony export */ });\n/* harmony import */ var effect_Effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect/Effect */ \"(rsc)/./node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @uploadthing/shared */ \"(rsc)/./node_modules/@uploadthing/shared/dist/index.js\");\n/* harmony import */ var _dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../dist/_internal/handler.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/handler.js\");\n/* harmony import */ var _dist_internal_route_config_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../dist/_internal/route-config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/route-config.js\");\n/* harmony import */ var _dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../dist/_internal/upload-builder.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-builder.js\");\n/* harmony import */ var _dist_internal_types_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../dist/_internal/types.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/types.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClient.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpClientRequest.js\");\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./node_modules/@effect/platform/dist/esm/HttpIncomingMessage.js\");\n/* harmony import */ var effect_Array__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! effect/Array */ \"(rsc)/./node_modules/effect/dist/esm/Array.js\");\n/* harmony import */ var effect_Cause__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! effect/Cause */ \"(rsc)/./node_modules/effect/dist/esm/Cause.js\");\n/* harmony import */ var effect_Redacted__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! effect/Redacted */ \"(rsc)/./node_modules/effect/dist/esm/Redacted.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../dist/_internal/config.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/config.js\");\n/* harmony import */ var _dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../dist/_internal/logger.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/logger.js\");\n/* harmony import */ var _dist_internal_runtime_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../dist/_internal/runtime.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/runtime.js\");\n/* harmony import */ var _uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @uploadthing/mime-types */ \"(rsc)/./node_modules/@uploadthing/mime-types/dist/index.js\");\n/* harmony import */ var effect_Predicate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effect/Predicate */ \"(rsc)/./node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var _dist_internal_upload_server_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../dist/_internal/upload-server.js */ \"(rsc)/./node_modules/uploadthing/dist/_internal/upload-server.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Extension of the Blob class that simplifies setting the `name` and `customId` properties,\n * similar to the built-in File class from Node > 20.\n */ class UTFile extends Blob {\n    constructor(parts, name, options){\n        const optionsWithDefaults = {\n            ...options,\n            type: options?.type ?? ((0,_uploadthing_mime_types__WEBPACK_IMPORTED_MODULE_2__.lookup)(name) || \"application/octet-stream\"),\n            lastModified: options?.lastModified ?? Date.now()\n        };\n        super(parts, optionsWithDefaults);\n        this.name = name;\n        this.customId = optionsWithDefaults.customId;\n        this.lastModified = optionsWithDefaults.lastModified;\n    }\n}\n\nfunction guardServerOnly() {\n    if (typeof window !== \"undefined\") {\n        throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n            code: \"INTERNAL_SERVER_ERROR\",\n            message: \"The `utapi` can only be used on the server.\"\n        });\n    }\n}\nconst downloadFile = (_url)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.gen(function*() {\n        let url = effect_Predicate__WEBPACK_IMPORTED_MODULE_4__.isRecord(_url) ? _url.url : _url;\n        if (typeof url === \"string\") {\n            // since dataurls will result in name being too long, tell the user\n            // to use uploadFiles instead.\n            if (url.startsWith(\"data:\")) {\n                return yield* effect_Effect__WEBPACK_IMPORTED_MODULE_3__.fail({\n                    code: \"BAD_REQUEST\",\n                    message: \"Please use uploadFiles() for data URLs. uploadFilesFromUrl() is intended for use with remote URLs only.\",\n                    data: undefined\n                });\n            }\n        }\n        url = new URL(url);\n        const { name = url.pathname.split(\"/\").pop() ?? \"unknown-filename\", customId = undefined } = effect_Predicate__WEBPACK_IMPORTED_MODULE_4__.isRecord(_url) ? _url : {};\n        const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_5__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_5__.filterStatusOk);\n        const arrayBuffer = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_6__.get(url).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_6__.modify({\n            headers: {}\n        }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_3__.flatMap((_)=>_.arrayBuffer), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.mapError((cause)=>{\n            return {\n                code: \"BAD_REQUEST\",\n                message: `Failed to download requested file: ${cause.message}`,\n                data: cause.toJSON()\n            };\n        }), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.scoped);\n        return new UTFile([\n            arrayBuffer\n        ], name, {\n            customId,\n            lastModified: Date.now()\n        });\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"downloadFile\"));\nconst generatePresignedUrl = (file, cd, acl)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.gen(function*() {\n        const { apiKey, appId } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__.UTToken;\n        const baseUrl = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__.IngestUrl;\n        const key = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateKey)(file, appId);\n        const url = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateSignedURL)(`${baseUrl}/${key}`, apiKey, {\n            // ttlInSeconds: routeOptions.presignedURLTTL,\n            data: {\n                \"x-ut-identifier\": appId,\n                \"x-ut-file-name\": file.name,\n                \"x-ut-file-size\": file.size,\n                \"x-ut-file-type\": file.type,\n                \"x-ut-custom-id\": file.customId,\n                \"x-ut-content-disposition\": cd,\n                \"x-ut-acl\": acl\n            }\n        });\n        return {\n            url,\n            key\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"generatePresignedUrl\"));\nconst uploadFile = (file, opts)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.gen(function*() {\n        const presigned = yield* generatePresignedUrl(file, opts.contentDisposition ?? \"inline\", opts.acl).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.catchTag(\"UploadThingError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.catchTag(\"ConfigError\", ()=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.fail({\n                code: \"INVALID_SERVER_CONFIG\",\n                message: \"Failed to generate presigned URL\"\n            })));\n        const response = yield* (0,_dist_internal_upload_server_js__WEBPACK_IMPORTED_MODULE_8__.uploadWithoutProgress)(file, presigned).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.catchTag(\"UploadThingError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.fail(_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError.toObject(e))), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.catchTag(\"ResponseError\", (e)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.fail({\n                code: \"UPLOAD_FAILED\",\n                message: \"Failed to upload file\",\n                data: e.toJSON()\n            })));\n        return {\n            key: presigned.key,\n            url: response.url,\n            appUrl: response.appUrl,\n            ufsUrl: response.ufsUrl,\n            lastModified: file.lastModified ?? Date.now(),\n            name: file.name,\n            size: file.size,\n            type: file.type,\n            customId: file.customId ?? null,\n            fileHash: response.fileHash\n        };\n    }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"uploadFile\"));\n\nclass UTApi {\n    constructor(opts){\n        this.opts = opts;\n        this.requestUploadThing = (pathname, body, responseSchema)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.gen(this, function*() {\n                const { apiKey } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__.UTToken;\n                const baseUrl = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__.ApiUrl;\n                const httpClient = (yield* _effect_platform__WEBPACK_IMPORTED_MODULE_5__.HttpClient).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_5__.filterStatusOk);\n                return yield* _effect_platform__WEBPACK_IMPORTED_MODULE_6__.post(pathname).pipe(_effect_platform__WEBPACK_IMPORTED_MODULE_6__.prependUrl(baseUrl), _effect_platform__WEBPACK_IMPORTED_MODULE_6__.bodyUnsafeJson(body), _effect_platform__WEBPACK_IMPORTED_MODULE_6__.setHeaders({\n                    \"x-uploadthing-version\": _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__.UPLOADTHING_VERSION,\n                    \"x-uploadthing-be-adapter\": \"server-sdk\",\n                    \"x-uploadthing-api-key\": effect_Redacted__WEBPACK_IMPORTED_MODULE_9__.value(apiKey)\n                }), httpClient.execute, effect_Effect__WEBPACK_IMPORTED_MODULE_3__.tapBoth({\n                    onSuccess: (0,_dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_10__.logHttpClientResponse)(\"UploadThing API Response\"),\n                    onFailure: (0,_dist_internal_logger_js__WEBPACK_IMPORTED_MODULE_10__.logHttpClientError)(\"Failed to request UploadThing API\")\n                }), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.flatMap(_effect_platform__WEBPACK_IMPORTED_MODULE_11__.schemaBodyJson(responseSchema)), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.scoped);\n            }).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INVALID_SERVER_CONFIG\",\n                    message: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n                    cause: e\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"utapi.#requestUploadThing\"));\n        this.executeAsync = async (program, signal)=>{\n            const exit = await program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"utapi.#executeAsync\"), (e)=>this.runtime.runPromiseExit(e, signal ? {\n                    signal\n                } : undefined));\n            if (exit._tag === \"Failure\") {\n                throw effect_Cause__WEBPACK_IMPORTED_MODULE_12__.squash(exit.cause);\n            }\n            return exit.value;\n        };\n        this./**\n   * Request to delete files from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * await deleteFiles(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   *\n   * @example\n   * await deleteFiles([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   *\n   * @example\n   * await deleteFiles(\"myCustomIdentifier\", { keyType: \"customId\" })\n   */ deleteFiles = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class DeleteFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Class(\"DeleteFileResponse\")({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Boolean,\n                deletedCount: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/deleteFiles\", keyType === \"fileKey\" ? {\n                fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(keys)\n            } : {\n                customIds: effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(keys)\n            }, DeleteFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"deleteFiles\")));\n        };\n        this./**\n   * Request file URLs from UploadThing storage.\n   * @param {string | string[]} fileKeys\n   *\n   * @example\n   * const data = await getFileUrls(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\");\n   * console.log(data); // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\"}]\n   *\n   * @example\n   * const data = await getFileUrls([\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"])\n   * console.log(data) // [{key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", url: \"https://uploadthing.com/f/2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\" },{key: \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\", url: \"https://uploadthing.com/f/1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\"}]\n   *\n   * @deprecated - See https://docs.uploadthing.com/working-with-files#accessing-files for info how to access files\n   */ getFileUrls = async (keys, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            class GetFileUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Class(\"GetFileUrlResponse\")({\n                data: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Struct({\n                    key: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String,\n                    url: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getFileUrl\", keyType === \"fileKey\" ? {\n                fileKeys: effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(keys)\n            } : {\n                customIds: effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(keys)\n            }, GetFileUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"getFileUrls\")));\n        };\n        this./**\n   * Request file list from UploadThing storage.\n   * @param {object} opts\n   * @param {number} opts.limit The maximum number of files to return\n   * @param {number} opts.offset The number of files to skip\n   *\n   * @example\n   * const data = await listFiles({ limit: 1 });\n   * console.log(data); // { key: \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", id: \"2e0fdb64-9957-4262-8e45-f372ba903ac8\" }\n   */ listFiles = async (opts)=>{\n            guardServerOnly();\n            class ListFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Class(\"ListFileResponse\")({\n                hasMore: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Boolean,\n                files: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Struct({\n                    id: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String,\n                    customId: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.NullOr(effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String),\n                    key: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String,\n                    name: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String,\n                    size: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Number,\n                    status: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Literal(\"Deletion Pending\", \"Failed\", \"Uploaded\", \"Uploading\"),\n                    uploadedAt: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Number\n                }))\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/listFiles\", {\n                ...opts\n            }, ListFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"listFiles\")));\n        };\n        this.renameFiles = async (updates)=>{\n            guardServerOnly();\n            class RenameFileResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Class(\"RenameFileResponse\")({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Boolean\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/renameFiles\", {\n                updates: effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(updates)\n            }, RenameFileResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"renameFiles\")));\n        };\n        this.getUsageInfo = async ()=>{\n            guardServerOnly();\n            class GetUsageInfoResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Class(\"GetUsageInfoResponse\")({\n                totalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Number,\n                appTotalBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Number,\n                filesUploaded: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Number,\n                limitBytes: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Number\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/getUsageInfo\", {}, GetUsageInfoResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"getUsageInfo\")));\n        };\n        this./**\n   * Generate a presigned url for a private file\n   * Unlike {@link getSignedURL}, this method does not make a fetch request to the UploadThing API\n   * and is the recommended way to generate a presigned url for a private file.\n   **/ generateSignedURL = async (key, opts)=>{\n            guardServerOnly();\n            const expiresIn = (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseTimeToSeconds)(opts?.expiresIn ?? \"5 minutes\");\n            if (opts?.expiresIn && isNaN(expiresIn)) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n                });\n            }\n            if (expiresIn > 86400 * 7) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be less than 7 days (604800 seconds).\"\n                });\n            }\n            const program = effect_Effect__WEBPACK_IMPORTED_MODULE_3__.gen(function*() {\n                const { apiKey, appId } = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__.UTToken;\n                const ufsHost = yield* _dist_internal_config_js__WEBPACK_IMPORTED_MODULE_7__.UfsHost;\n                const proto = ufsHost.includes(\"local\") ? \"http\" : \"https\";\n                const ufsUrl = yield* (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.generateSignedURL)(`${proto}://${appId}.${ufsHost}/f/${key}`, apiKey, {\n                    ttlInSeconds: expiresIn\n                });\n                return {\n                    ufsUrl\n                };\n            });\n            return await this.executeAsync(program.pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.catchTag(\"ConfigError\", (e)=>new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"INVALID_SERVER_CONFIG\",\n                    message: \"There was an error with the server configuration. More info can be found on this error's `cause` property\",\n                    cause: e\n                })), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"generateSignedURL\")));\n        };\n        this./**\n   * Request a presigned url for a private file(s)\n   * @remarks This method is no longer recommended as it makes a fetch\n   * request to the UploadThing API which incurs redundant latency. It\n   * will be deprecated in UploadThing v8 and removed in UploadThing v9.\n   *\n   * @see {@link generateSignedURL} for a more efficient way to generate a presigned url\n   **/ getSignedURL = async (key, opts)=>{\n            guardServerOnly();\n            const expiresIn = opts?.expiresIn ? (0,_uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.parseTimeToSeconds)(opts.expiresIn) : undefined;\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            if (opts?.expiresIn && isNaN(expiresIn)) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be a valid time string, for example '1d', '2 days', or a number of seconds.\"\n                });\n            }\n            if (expiresIn && expiresIn > 86400 * 7) {\n                throw new _uploadthing_shared__WEBPACK_IMPORTED_MODULE_0__.UploadThingError({\n                    code: \"BAD_REQUEST\",\n                    message: \"expiresIn must be less than 7 days (604800 seconds).\"\n                });\n            }\n            class GetSignedUrlResponse extends effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Class(\"GetSignedUrlResponse\")({\n                url: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String,\n                ufsUrl: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.String\n            }) {\n            }\n            return await this.executeAsync(this.requestUploadThing(\"/v6/requestFileAccess\", keyType === \"fileKey\" ? {\n                fileKey: key,\n                expiresIn\n            } : {\n                customId: key,\n                expiresIn\n            }, GetSignedUrlResponse).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"getSignedURL\")));\n        };\n        this./**\n   * Update the ACL of a file or set of files.\n   *\n   * @example\n   * // Make a single file public\n   * await utapi.updateACL(\"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\", \"public-read\");\n   *\n   * // Make multiple files private\n   * await utapi.updateACL(\n   *   [\n   *     \"2e0fdb64-9957-4262-8e45-f372ba903ac8_image.jpg\",\n   *     \"1649353b-04ea-48a2-9db7-31de7f562c8d_image2.jpg\",\n   *   ],\n   *   \"private\",\n   * );\n   */ updateACL = async (keys, acl, opts)=>{\n            guardServerOnly();\n            const { keyType = this.defaultKeyType } = opts ?? {};\n            const updates = effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(keys).map((key)=>{\n                return keyType === \"fileKey\" ? {\n                    fileKey: key,\n                    acl\n                } : {\n                    customId: key,\n                    acl\n                };\n            });\n            const responseSchema = effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Struct({\n                success: effect_Schema__WEBPACK_IMPORTED_MODULE_13__.Boolean\n            });\n            return await this.executeAsync(this.requestUploadThing(\"/v6/updateACL\", {\n                updates\n            }, responseSchema).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"updateACL\")));\n        };\n        // Assert some stuff\n        guardServerOnly();\n        this.fetch = opts?.fetch ?? globalThis.fetch;\n        this.defaultKeyType = opts?.defaultKeyType ?? \"fileKey\";\n        this.runtime = (0,_dist_internal_runtime_js__WEBPACK_IMPORTED_MODULE_15__.makeRuntime)(this.fetch, this.opts);\n    }\n    uploadFiles(files, opts) {\n        guardServerOnly();\n        const program = effect_Effect__WEBPACK_IMPORTED_MODULE_3__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(files), (file)=>uploadFile(file, opts ?? {}).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.match({\n                onSuccess: (data)=>({\n                        data,\n                        error: null\n                    }),\n                onFailure: (error)=>({\n                        data: null,\n                        error\n                    })\n            }))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.map((ups)=>Array.isArray(files) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"uploadFiles\"));\n        return this.executeAsync(program, opts?.signal);\n    }\n    uploadFilesFromUrl(urls, opts) {\n        guardServerOnly();\n        const program = effect_Effect__WEBPACK_IMPORTED_MODULE_3__.forEach(effect_Array__WEBPACK_IMPORTED_MODULE_14__.ensure(urls), (url)=>downloadFile(url).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.flatMap((file)=>uploadFile(file, opts ?? {})), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.match({\n                onSuccess: (data)=>({\n                        data,\n                        error: null\n                    }),\n                onFailure: (error)=>({\n                        data: null,\n                        error\n                    })\n            }))).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.map((ups)=>Array.isArray(urls) ? ups : ups[0]), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.tap((res)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.logDebug(\"Finished uploading\").pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.annotateLogs(\"uploadResult\", res))), effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"uploadFiles\")).pipe(effect_Effect__WEBPACK_IMPORTED_MODULE_3__.withLogSpan(\"uploadFilesFromUrl\"));\n        return this.executeAsync(program, opts?.signal);\n    }\n}\n\nconst createUploadthing = (opts)=>(0,_dist_internal_upload_builder_js__WEBPACK_IMPORTED_MODULE_16__.createBuilder)(opts);\nconst createRouteHandler = (opts)=>{\n    return (0,_dist_internal_handler_js__WEBPACK_IMPORTED_MODULE_17__.makeAdapterHandler)((ev)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.succeed({\n            req: \"request\" in ev ? ev.request : ev,\n            res: undefined,\n            event: undefined\n        }), (ev)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.succeed(\"request\" in ev ? ev.request : ev), opts, \"server\");\n};\nconst extractRouterConfig = (router)=>effect_Effect__WEBPACK_IMPORTED_MODULE_3__.runSync((0,_dist_internal_route_config_js__WEBPACK_IMPORTED_MODULE_18__.extractRouterConfig)(router));\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvdXBsb2FkdGhpbmcvc2VydmVyL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdDO0FBQ21FO0FBQ3BEO0FBQ1c7QUFDK0I7QUFDN0I7QUFDZjtBQUNnQztBQUNqRDtBQUNFO0FBQ007QUFDVDtBQUNvRTtBQUNmO0FBQzdCO0FBQ1Y7QUFDSDtBQUM2Qjs7QUFFM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsK0RBQU07QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGlFQUFnQjtBQUNsQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSw2QkFBNkIsOENBQVU7QUFDdkMsa0JBQWtCLHNEQUFrQjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrQ0FBVztBQUN6QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLG1GQUFtRixFQUFFLHNEQUFrQjtBQUN2SCxtQ0FBbUMsd0RBQXFCLE9BQU8sNERBQXlCO0FBQ3hGLG1DQUFtQyxpREFBcUIsV0FBVyxvREFBd0I7QUFDM0Y7QUFDQSxTQUFTLHVCQUF1QixrREFBYyxzQkFBc0IsbURBQWU7QUFDbkY7QUFDQTtBQUNBLCtEQUErRCxjQUFjO0FBQzdFO0FBQ0E7QUFDQSxTQUFTLEdBQUcsaURBQWE7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLLE9BQU8sc0RBQWtCO0FBQzlCLDhDQUE4Qyw4Q0FBVTtBQUN4RCxnQkFBZ0IsZ0JBQWdCLFNBQVMsNkRBQU87QUFDaEQsK0JBQStCLCtEQUFTO0FBQ3hDLDJCQUEyQixnRUFBVztBQUN0QywyQkFBMkIsc0VBQWlCLElBQUksUUFBUSxHQUFHLElBQUk7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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LDRCQUE0Qix1REFBbUIseUJBQXlCLHNEQUFrQixzQkFBc0Isc0RBQWtCO0FBQ2hQO0FBQ0E7QUFDQTs7QUFFQSxrQ0FBa0MsZ0ZBQWE7QUFDL0M7QUFDQSxXQUFXLDhFQUFrQixPQUFPLGtEQUFjO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsU0FBUyxrREFBYztBQUNoQztBQUNBLHNDQUFzQyxrREFBYyxDQUFDLG9GQUFxQjs7QUFFVyIsInNvdXJjZXMiOlsiL1VzZXJzL2thcnRoaWtuYWRhci9EZXNrdG9wL3BkZnN0L25vZGVfbW9kdWxlcy91cGxvYWR0aGluZy9zZXJ2ZXIvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgRWZmZWN0IGZyb20gJ2VmZmVjdC9FZmZlY3QnO1xuaW1wb3J0IHsgVXBsb2FkVGhpbmdFcnJvciwgZ2VuZXJhdGVLZXksIGdlbmVyYXRlU2lnbmVkVVJMLCBwYXJzZVRpbWVUb1NlY29uZHMgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmV4cG9ydCB7IFVwbG9hZFRoaW5nRXJyb3IgfSBmcm9tICdAdXBsb2FkdGhpbmcvc2hhcmVkJztcbmltcG9ydCB7IG1ha2VBZGFwdGVySGFuZGxlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL2hhbmRsZXIuanMnO1xuaW1wb3J0IHsgZXh0cmFjdFJvdXRlckNvbmZpZyBhcyBleHRyYWN0Um91dGVyQ29uZmlnJDEgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC9yb3V0ZS1jb25maWcuanMnO1xuaW1wb3J0IHsgY3JlYXRlQnVpbGRlciB9IGZyb20gJy4uL2Rpc3QvX2ludGVybmFsL3VwbG9hZC1idWlsZGVyLmpzJztcbmV4cG9ydCB7IFVURmlsZXMgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC90eXBlcy5qcyc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwQ2xpZW50UmVxdWVzdCwgSHR0cENsaWVudFJlc3BvbnNlIH0gZnJvbSAnQGVmZmVjdC9wbGF0Zm9ybSc7XG5pbXBvcnQgKiBhcyBBcnIgZnJvbSAnZWZmZWN0L0FycmF5JztcbmltcG9ydCAqIGFzIENhdXNlIGZyb20gJ2VmZmVjdC9DYXVzZSc7XG5pbXBvcnQgKiBhcyBSZWRhY3RlZCBmcm9tICdlZmZlY3QvUmVkYWN0ZWQnO1xuaW1wb3J0ICogYXMgUyBmcm9tICdlZmZlY3QvU2NoZW1hJztcbmltcG9ydCB7IFVUVG9rZW4sIEluZ2VzdFVybCwgQXBpVXJsLCBVUExPQURUSElOR19WRVJTSU9OLCBVZnNIb3N0IH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvY29uZmlnLmpzJztcbmltcG9ydCB7IGxvZ0h0dHBDbGllbnRSZXNwb25zZSwgbG9nSHR0cENsaWVudEVycm9yIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvbG9nZ2VyLmpzJztcbmltcG9ydCB7IG1ha2VSdW50aW1lIH0gZnJvbSAnLi4vZGlzdC9faW50ZXJuYWwvcnVudGltZS5qcyc7XG5pbXBvcnQgeyBsb29rdXAgfSBmcm9tICdAdXBsb2FkdGhpbmcvbWltZS10eXBlcyc7XG5pbXBvcnQgKiBhcyBQcmVkaWNhdGUgZnJvbSAnZWZmZWN0L1ByZWRpY2F0ZSc7XG5pbXBvcnQgeyB1cGxvYWRXaXRob3V0UHJvZ3Jlc3MgfSBmcm9tICcuLi9kaXN0L19pbnRlcm5hbC91cGxvYWQtc2VydmVyLmpzJztcblxuLyoqXG4gKiBFeHRlbnNpb24gb2YgdGhlIEJsb2IgY2xhc3MgdGhhdCBzaW1wbGlmaWVzIHNldHRpbmcgdGhlIGBuYW1lYCBhbmQgYGN1c3RvbUlkYCBwcm9wZXJ0aWVzLFxuICogc2ltaWxhciB0byB0aGUgYnVpbHQtaW4gRmlsZSBjbGFzcyBmcm9tIE5vZGUgPiAyMC5cbiAqLyBjbGFzcyBVVEZpbGUgZXh0ZW5kcyBCbG9iIHtcbiAgICBjb25zdHJ1Y3RvcihwYXJ0cywgbmFtZSwgb3B0aW9ucyl7XG4gICAgICAgIGNvbnN0IG9wdGlvbnNXaXRoRGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgdHlwZTogb3B0aW9ucz8udHlwZSA/PyAobG9va3VwKG5hbWUpIHx8IFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCIpLFxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBvcHRpb25zPy5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICBzdXBlcihwYXJ0cywgb3B0aW9uc1dpdGhEZWZhdWx0cyk7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMuY3VzdG9tSWQgPSBvcHRpb25zV2l0aERlZmF1bHRzLmN1c3RvbUlkO1xuICAgICAgICB0aGlzLmxhc3RNb2RpZmllZCA9IG9wdGlvbnNXaXRoRGVmYXVsdHMubGFzdE1vZGlmaWVkO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ3VhcmRTZXJ2ZXJPbmx5KCkge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHRocm93IG5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgIGNvZGU6IFwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCIsXG4gICAgICAgICAgICBtZXNzYWdlOiBcIlRoZSBgdXRhcGlgIGNhbiBvbmx5IGJlIHVzZWQgb24gdGhlIHNlcnZlci5cIlxuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCBkb3dubG9hZEZpbGUgPSAoX3VybCk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBsZXQgdXJsID0gUHJlZGljYXRlLmlzUmVjb3JkKF91cmwpID8gX3VybC51cmwgOiBfdXJsO1xuICAgICAgICBpZiAodHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgLy8gc2luY2UgZGF0YXVybHMgd2lsbCByZXN1bHQgaW4gbmFtZSBiZWluZyB0b28gbG9uZywgdGVsbCB0aGUgdXNlclxuICAgICAgICAgICAgLy8gdG8gdXNlIHVwbG9hZEZpbGVzIGluc3RlYWQuXG4gICAgICAgICAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJkYXRhOlwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCogRWZmZWN0LmZhaWwoe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUGxlYXNlIHVzZSB1cGxvYWRGaWxlcygpIGZvciBkYXRhIFVSTHMuIHVwbG9hZEZpbGVzRnJvbVVybCgpIGlzIGludGVuZGVkIGZvciB1c2Ugd2l0aCByZW1vdGUgVVJMcyBvbmx5LlwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cmwgPSBuZXcgVVJMKHVybCk7XG4gICAgICAgIGNvbnN0IHsgbmFtZSA9IHVybC5wYXRobmFtZS5zcGxpdChcIi9cIikucG9wKCkgPz8gXCJ1bmtub3duLWZpbGVuYW1lXCIsIGN1c3RvbUlkID0gdW5kZWZpbmVkIH0gPSBQcmVkaWNhdGUuaXNSZWNvcmQoX3VybCkgPyBfdXJsIDoge307XG4gICAgICAgIGNvbnN0IGh0dHBDbGllbnQgPSAoeWllbGQqIEh0dHBDbGllbnQuSHR0cENsaWVudCkucGlwZShIdHRwQ2xpZW50LmZpbHRlclN0YXR1c09rKTtcbiAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCogSHR0cENsaWVudFJlcXVlc3QuZ2V0KHVybCkucGlwZShIdHRwQ2xpZW50UmVxdWVzdC5tb2RpZnkoe1xuICAgICAgICAgICAgaGVhZGVyczoge31cbiAgICAgICAgfSksIGh0dHBDbGllbnQuZXhlY3V0ZSwgRWZmZWN0LmZsYXRNYXAoKF8pPT5fLmFycmF5QnVmZmVyKSwgRWZmZWN0Lm1hcEVycm9yKChjYXVzZSk9PntcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgY29kZTogXCJCQURfUkVRVUVTVFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBGYWlsZWQgdG8gZG93bmxvYWQgcmVxdWVzdGVkIGZpbGU6ICR7Y2F1c2UubWVzc2FnZX1gLFxuICAgICAgICAgICAgICAgIGRhdGE6IGNhdXNlLnRvSlNPTigpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSwgRWZmZWN0LnNjb3BlZCk7XG4gICAgICAgIHJldHVybiBuZXcgVVRGaWxlKFtcbiAgICAgICAgICAgIGFycmF5QnVmZmVyXG4gICAgICAgIF0sIG5hbWUsIHtcbiAgICAgICAgICAgIGN1c3RvbUlkLFxuICAgICAgICAgICAgbGFzdE1vZGlmaWVkOiBEYXRlLm5vdygpXG4gICAgICAgIH0pO1xuICAgIH0pLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZG93bmxvYWRGaWxlXCIpKTtcbmNvbnN0IGdlbmVyYXRlUHJlc2lnbmVkVXJsID0gKGZpbGUsIGNkLCBhY2wpPT5FZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgY29uc3QgeyBhcGlLZXksIGFwcElkIH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgY29uc3QgYmFzZVVybCA9IHlpZWxkKiBJbmdlc3RVcmw7XG4gICAgICAgIGNvbnN0IGtleSA9IHlpZWxkKiBnZW5lcmF0ZUtleShmaWxlLCBhcHBJZCk7XG4gICAgICAgIGNvbnN0IHVybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtiYXNlVXJsfS8ke2tleX1gLCBhcGlLZXksIHtcbiAgICAgICAgICAgIC8vIHR0bEluU2Vjb25kczogcm91dGVPcHRpb25zLnByZXNpZ25lZFVSTFRUTCxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBcIngtdXQtaWRlbnRpZmllclwiOiBhcHBJZCxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS1uYW1lXCI6IGZpbGUubmFtZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS1zaXplXCI6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtZmlsZS10eXBlXCI6IGZpbGUudHlwZSxcbiAgICAgICAgICAgICAgICBcIngtdXQtY3VzdG9tLWlkXCI6IGZpbGUuY3VzdG9tSWQsXG4gICAgICAgICAgICAgICAgXCJ4LXV0LWNvbnRlbnQtZGlzcG9zaXRpb25cIjogY2QsXG4gICAgICAgICAgICAgICAgXCJ4LXV0LWFjbFwiOiBhY2xcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICBrZXlcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlUHJlc2lnbmVkVXJsXCIpKTtcbmNvbnN0IHVwbG9hZEZpbGUgPSAoZmlsZSwgb3B0cyk9PkVmZmVjdC5nZW4oZnVuY3Rpb24qKCkge1xuICAgICAgICBjb25zdCBwcmVzaWduZWQgPSB5aWVsZCogZ2VuZXJhdGVQcmVzaWduZWRVcmwoZmlsZSwgb3B0cy5jb250ZW50RGlzcG9zaXRpb24gPz8gXCJpbmxpbmVcIiwgb3B0cy5hY2wpLnBpcGUoRWZmZWN0LmNhdGNoVGFnKFwiVXBsb2FkVGhpbmdFcnJvclwiLCAoZSk9PkVmZmVjdC5mYWlsKFVwbG9hZFRoaW5nRXJyb3IudG9PYmplY3QoZSkpKSwgRWZmZWN0LmNhdGNoVGFnKFwiQ29uZmlnRXJyb3JcIiwgKCk9PkVmZmVjdC5mYWlsKHtcbiAgICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIGdlbmVyYXRlIHByZXNpZ25lZCBVUkxcIlxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSB5aWVsZCogdXBsb2FkV2l0aG91dFByb2dyZXNzKGZpbGUsIHByZXNpZ25lZCkucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJVcGxvYWRUaGluZ0Vycm9yXCIsIChlKT0+RWZmZWN0LmZhaWwoVXBsb2FkVGhpbmdFcnJvci50b09iamVjdChlKSkpLCBFZmZlY3QuY2F0Y2hUYWcoXCJSZXNwb25zZUVycm9yXCIsIChlKT0+RWZmZWN0LmZhaWwoe1xuICAgICAgICAgICAgICAgIGNvZGU6IFwiVVBMT0FEX0ZBSUxFRFwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiRmFpbGVkIHRvIHVwbG9hZCBmaWxlXCIsXG4gICAgICAgICAgICAgICAgZGF0YTogZS50b0pTT04oKVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogcHJlc2lnbmVkLmtleSxcbiAgICAgICAgICAgIHVybDogcmVzcG9uc2UudXJsLFxuICAgICAgICAgICAgYXBwVXJsOiByZXNwb25zZS5hcHBVcmwsXG4gICAgICAgICAgICB1ZnNVcmw6IHJlc3BvbnNlLnVmc1VybCxcbiAgICAgICAgICAgIGxhc3RNb2RpZmllZDogZmlsZS5sYXN0TW9kaWZpZWQgPz8gRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICAgIHNpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICAgIGN1c3RvbUlkOiBmaWxlLmN1c3RvbUlkID8/IG51bGwsXG4gICAgICAgICAgICBmaWxlSGFzaDogcmVzcG9uc2UuZmlsZUhhc2hcbiAgICAgICAgfTtcbiAgICB9KS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwbG9hZEZpbGVcIikpO1xuXG5jbGFzcyBVVEFwaSB7XG4gICAgY29uc3RydWN0b3Iob3B0cyl7XG4gICAgICAgIHRoaXMub3B0cyA9IG9wdHM7XG4gICAgICAgIHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nID0gKHBhdGhuYW1lLCBib2R5LCByZXNwb25zZVNjaGVtYSk9PkVmZmVjdC5nZW4odGhpcywgZnVuY3Rpb24qKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXBpS2V5IH0gPSB5aWVsZCogVVRUb2tlbjtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlVXJsID0geWllbGQqIEFwaVVybDtcbiAgICAgICAgICAgICAgICBjb25zdCBodHRwQ2xpZW50ID0gKHlpZWxkKiBIdHRwQ2xpZW50Lkh0dHBDbGllbnQpLnBpcGUoSHR0cENsaWVudC5maWx0ZXJTdGF0dXNPayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkKiBIdHRwQ2xpZW50UmVxdWVzdC5wb3N0KHBhdGhuYW1lKS5waXBlKEh0dHBDbGllbnRSZXF1ZXN0LnByZXBlbmRVcmwoYmFzZVVybCksIEh0dHBDbGllbnRSZXF1ZXN0LmJvZHlVbnNhZmVKc29uKGJvZHkpLCBIdHRwQ2xpZW50UmVxdWVzdC5zZXRIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLXZlcnNpb25cIjogVVBMT0FEVEhJTkdfVkVSU0lPTixcbiAgICAgICAgICAgICAgICAgICAgXCJ4LXVwbG9hZHRoaW5nLWJlLWFkYXB0ZXJcIjogXCJzZXJ2ZXItc2RrXCIsXG4gICAgICAgICAgICAgICAgICAgIFwieC11cGxvYWR0aGluZy1hcGkta2V5XCI6IFJlZGFjdGVkLnZhbHVlKGFwaUtleSlcbiAgICAgICAgICAgICAgICB9KSwgaHR0cENsaWVudC5leGVjdXRlLCBFZmZlY3QudGFwQm90aCh7XG4gICAgICAgICAgICAgICAgICAgIG9uU3VjY2VzczogbG9nSHR0cENsaWVudFJlc3BvbnNlKFwiVXBsb2FkVGhpbmcgQVBJIFJlc3BvbnNlXCIpLFxuICAgICAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IGxvZ0h0dHBDbGllbnRFcnJvcihcIkZhaWxlZCB0byByZXF1ZXN0IFVwbG9hZFRoaW5nIEFQSVwiKVxuICAgICAgICAgICAgICAgIH0pLCBFZmZlY3QuZmxhdE1hcChIdHRwQ2xpZW50UmVzcG9uc2Uuc2NoZW1hQm9keUpzb24ocmVzcG9uc2VTY2hlbWEpKSwgRWZmZWN0LnNjb3BlZCk7XG4gICAgICAgICAgICB9KS5waXBlKEVmZmVjdC5jYXRjaFRhZyhcIkNvbmZpZ0Vycm9yXCIsIChlKT0+bmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIklOVkFMSURfU0VSVkVSX0NPTkZJR1wiLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHRoZSBzZXJ2ZXIgY29uZmlndXJhdGlvbi4gTW9yZSBpbmZvIGNhbiBiZSBmb3VuZCBvbiB0aGlzIGVycm9yJ3MgYGNhdXNlYCBwcm9wZXJ0eVwiLFxuICAgICAgICAgICAgICAgICAgICBjYXVzZTogZVxuICAgICAgICAgICAgICAgIH0pKSwgRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI3JlcXVlc3RVcGxvYWRUaGluZ1wiKSk7XG4gICAgICAgIHRoaXMuZXhlY3V0ZUFzeW5jID0gYXN5bmMgKHByb2dyYW0sIHNpZ25hbCk9PntcbiAgICAgICAgICAgIGNvbnN0IGV4aXQgPSBhd2FpdCBwcm9ncmFtLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwidXRhcGkuI2V4ZWN1dGVBc3luY1wiKSwgKGUpPT50aGlzLnJ1bnRpbWUucnVuUHJvbWlzZUV4aXQoZSwgc2lnbmFsID8ge1xuICAgICAgICAgICAgICAgICAgICBzaWduYWxcbiAgICAgICAgICAgICAgICB9IDogdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICBpZiAoZXhpdC5fdGFnID09PSBcIkZhaWx1cmVcIikge1xuICAgICAgICAgICAgICAgIHRocm93IENhdXNlLnNxdWFzaChleGl0LmNhdXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBleGl0LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLi8qKlxuICAgKiBSZXF1ZXN0IHRvIGRlbGV0ZSBmaWxlcyBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IGRlbGV0ZUZpbGVzKFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogYXdhaXQgZGVsZXRlRmlsZXMoW1wiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLFwiMTY0OTM1M2ItMDRlYS00OGEyLTlkYjctMzFkZTdmNTYyYzhkX2ltYWdlMi5qcGdcIl0pXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGF3YWl0IGRlbGV0ZUZpbGVzKFwibXlDdXN0b21JZGVudGlmaWVyXCIsIHsga2V5VHlwZTogXCJjdXN0b21JZFwiIH0pXG4gICAqLyBkZWxldGVGaWxlcyA9IGFzeW5jIChrZXlzLCBvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjb25zdCB7IGtleVR5cGUgPSB0aGlzLmRlZmF1bHRLZXlUeXBlIH0gPSBvcHRzID8/IHt9O1xuICAgICAgICAgICAgY2xhc3MgRGVsZXRlRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkRlbGV0ZUZpbGVSZXNwb25zZVwiKSh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuLFxuICAgICAgICAgICAgICAgIGRlbGV0ZWRDb3VudDogUy5OdW1iZXJcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9kZWxldGVGaWxlc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cylcbiAgICAgICAgICAgIH0sIERlbGV0ZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJkZWxldGVGaWxlc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLi8qKlxuICAgKiBSZXF1ZXN0IGZpbGUgVVJMcyBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgc3RyaW5nW119IGZpbGVLZXlzXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIik7XG4gICAqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyBbe2tleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOF9pbWFnZS5qcGdcIn1dXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIGNvbnN0IGRhdGEgPSBhd2FpdCBnZXRGaWxlVXJscyhbXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXCIxNjQ5MzUzYi0wNGVhLTQ4YTItOWRiNy0zMWRlN2Y1NjJjOGRfaW1hZ2UyLmpwZ1wiXSlcbiAgICogY29uc29sZS5sb2coZGF0YSkgLy8gW3trZXk6IFwiMmUwZmRiNjQtOTk1Ny00MjYyLThlNDUtZjM3MmJhOTAzYWM4X2ltYWdlLmpwZ1wiLCB1cmw6IFwiaHR0cHM6Ly91cGxvYWR0aGluZy5jb20vZi8yZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIgfSx7a2V5OiBcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCIsIHVybDogXCJodHRwczovL3VwbG9hZHRoaW5nLmNvbS9mLzE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCJ9XVxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCAtIFNlZSBodHRwczovL2RvY3MudXBsb2FkdGhpbmcuY29tL3dvcmtpbmctd2l0aC1maWxlcyNhY2Nlc3NpbmctZmlsZXMgZm9yIGluZm8gaG93IHRvIGFjY2VzcyBmaWxlc1xuICAgKi8gZ2V0RmlsZVVybHMgPSBhc3luYyAoa2V5cywgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgeyBrZXlUeXBlID0gdGhpcy5kZWZhdWx0S2V5VHlwZSB9ID0gb3B0cyA/PyB7fTtcbiAgICAgICAgICAgIGNsYXNzIEdldEZpbGVVcmxSZXNwb25zZSBleHRlbmRzIFMuQ2xhc3MoXCJHZXRGaWxlVXJsUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIGRhdGE6IFMuQXJyYXkoUy5TdHJ1Y3Qoe1xuICAgICAgICAgICAgICAgICAgICBrZXk6IFMuU3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICB1cmw6IFMuU3RyaW5nXG4gICAgICAgICAgICAgICAgfSkpXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvZ2V0RmlsZVVybFwiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5czogQXJyLmVuc3VyZShrZXlzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBjdXN0b21JZHM6IEFyci5lbnN1cmUoa2V5cylcbiAgICAgICAgICAgIH0sIEdldEZpbGVVcmxSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZXRGaWxlVXJsc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLi8qKlxuICAgKiBSZXF1ZXN0IGZpbGUgbGlzdCBmcm9tIFVwbG9hZFRoaW5nIHN0b3JhZ2UuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBvcHRzLmxpbWl0IFRoZSBtYXhpbXVtIG51bWJlciBvZiBmaWxlcyB0byByZXR1cm5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMub2Zmc2V0IFRoZSBudW1iZXIgb2YgZmlsZXMgdG8gc2tpcFxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBjb25zdCBkYXRhID0gYXdhaXQgbGlzdEZpbGVzKHsgbGltaXQ6IDEgfSk7XG4gICAqIGNvbnNvbGUubG9nKGRhdGEpOyAvLyB7IGtleTogXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIGlkOiBcIjJlMGZkYjY0LTk5NTctNDI2Mi04ZTQ1LWYzNzJiYTkwM2FjOFwiIH1cbiAgICovIGxpc3RGaWxlcyA9IGFzeW5jIChvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjbGFzcyBMaXN0RmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkxpc3RGaWxlUmVzcG9uc2VcIikoe1xuICAgICAgICAgICAgICAgIGhhc01vcmU6IFMuQm9vbGVhbixcbiAgICAgICAgICAgICAgICBmaWxlczogUy5BcnJheShTLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBTLlN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IFMuTnVsbE9yKFMuU3RyaW5nKSxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBTLlN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogUy5TdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IFMuTnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IFMuTGl0ZXJhbChcIkRlbGV0aW9uIFBlbmRpbmdcIiwgXCJGYWlsZWRcIiwgXCJVcGxvYWRlZFwiLCBcIlVwbG9hZGluZ1wiKSxcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZWRBdDogUy5OdW1iZXJcbiAgICAgICAgICAgICAgICB9KSlcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9saXN0RmlsZXNcIiwge1xuICAgICAgICAgICAgICAgIC4uLm9wdHNcbiAgICAgICAgICAgIH0sIExpc3RGaWxlUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwibGlzdEZpbGVzXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucmVuYW1lRmlsZXMgPSBhc3luYyAodXBkYXRlcyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY2xhc3MgUmVuYW1lRmlsZVJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIlJlbmFtZUZpbGVSZXNwb25zZVwiKSh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuXG4gICAgICAgICAgICB9KSB7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXN5bmModGhpcy5yZXF1ZXN0VXBsb2FkVGhpbmcoXCIvdjYvcmVuYW1lRmlsZXNcIiwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXM6IEFyci5lbnN1cmUodXBkYXRlcylcbiAgICAgICAgICAgIH0sIFJlbmFtZUZpbGVSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJyZW5hbWVGaWxlc1wiKSkpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFVzYWdlSW5mbyA9IGFzeW5jICgpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNsYXNzIEdldFVzYWdlSW5mb1Jlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFVzYWdlSW5mb1Jlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBhcHBUb3RhbEJ5dGVzOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBmaWxlc1VwbG9hZGVkOiBTLk51bWJlcixcbiAgICAgICAgICAgICAgICBsaW1pdEJ5dGVzOiBTLk51bWJlclxuICAgICAgICAgICAgfSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHRoaXMucmVxdWVzdFVwbG9hZFRoaW5nKFwiL3Y2L2dldFVzYWdlSW5mb1wiLCB7fSwgR2V0VXNhZ2VJbmZvUmVzcG9uc2UpLnBpcGUoRWZmZWN0LndpdGhMb2dTcGFuKFwiZ2V0VXNhZ2VJbmZvXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuLyoqXG4gICAqIEdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGVcbiAgICogVW5saWtlIHtAbGluayBnZXRTaWduZWRVUkx9LCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBtYWtlIGEgZmV0Y2ggcmVxdWVzdCB0byB0aGUgVXBsb2FkVGhpbmcgQVBJXG4gICAqIGFuZCBpcyB0aGUgcmVjb21tZW5kZWQgd2F5IHRvIGdlbmVyYXRlIGEgcHJlc2lnbmVkIHVybCBmb3IgYSBwcml2YXRlIGZpbGUuXG4gICAqKi8gZ2VuZXJhdGVTaWduZWRVUkwgPSBhc3luYyAoa2V5LCBvcHRzKT0+e1xuICAgICAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgICAgICBjb25zdCBleHBpcmVzSW4gPSBwYXJzZVRpbWVUb1NlY29uZHMob3B0cz8uZXhwaXJlc0luID8/IFwiNSBtaW51dGVzXCIpO1xuICAgICAgICAgICAgaWYgKG9wdHM/LmV4cGlyZXNJbiAmJiBpc05hTihleHBpcmVzSW4pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVwbG9hZFRoaW5nRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBjb2RlOiBcIkJBRF9SRVFVRVNUXCIsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiZXhwaXJlc0luIG11c3QgYmUgYSB2YWxpZCB0aW1lIHN0cmluZywgZm9yIGV4YW1wbGUgJzFkJywgJzIgZGF5cycsIG9yIGEgbnVtYmVyIG9mIHNlY29uZHMuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZ2VuKGZ1bmN0aW9uKigpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB7IGFwaUtleSwgYXBwSWQgfSA9IHlpZWxkKiBVVFRva2VuO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVmc0hvc3QgPSB5aWVsZCogVWZzSG9zdDtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm90byA9IHVmc0hvc3QuaW5jbHVkZXMoXCJsb2NhbFwiKSA/IFwiaHR0cFwiIDogXCJodHRwc1wiO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVmc1VybCA9IHlpZWxkKiBnZW5lcmF0ZVNpZ25lZFVSTChgJHtwcm90b306Ly8ke2FwcElkfS4ke3Vmc0hvc3R9L2YvJHtrZXl9YCwgYXBpS2V5LCB7XG4gICAgICAgICAgICAgICAgICAgIHR0bEluU2Vjb25kczogZXhwaXJlc0luXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdWZzVXJsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUFzeW5jKHByb2dyYW0ucGlwZShFZmZlY3QuY2F0Y2hUYWcoXCJDb25maWdFcnJvclwiLCAoZSk9Pm5ldyBVcGxvYWRUaGluZ0Vycm9yKHtcbiAgICAgICAgICAgICAgICAgICAgY29kZTogXCJJTlZBTElEX1NFUlZFUl9DT05GSUdcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJUaGVyZSB3YXMgYW4gZXJyb3Igd2l0aCB0aGUgc2VydmVyIGNvbmZpZ3VyYXRpb24uIE1vcmUgaW5mbyBjYW4gYmUgZm91bmQgb24gdGhpcyBlcnJvcidzIGBjYXVzZWAgcHJvcGVydHlcIixcbiAgICAgICAgICAgICAgICAgICAgY2F1c2U6IGVcbiAgICAgICAgICAgICAgICB9KSksIEVmZmVjdC53aXRoTG9nU3BhbihcImdlbmVyYXRlU2lnbmVkVVJMXCIpKSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuLyoqXG4gICAqIFJlcXVlc3QgYSBwcmVzaWduZWQgdXJsIGZvciBhIHByaXZhdGUgZmlsZShzKVxuICAgKiBAcmVtYXJrcyBUaGlzIG1ldGhvZCBpcyBubyBsb25nZXIgcmVjb21tZW5kZWQgYXMgaXQgbWFrZXMgYSBmZXRjaFxuICAgKiByZXF1ZXN0IHRvIHRoZSBVcGxvYWRUaGluZyBBUEkgd2hpY2ggaW5jdXJzIHJlZHVuZGFudCBsYXRlbmN5LiBJdFxuICAgKiB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gVXBsb2FkVGhpbmcgdjggYW5kIHJlbW92ZWQgaW4gVXBsb2FkVGhpbmcgdjkuXG4gICAqXG4gICAqIEBzZWUge0BsaW5rIGdlbmVyYXRlU2lnbmVkVVJMfSBmb3IgYSBtb3JlIGVmZmljaWVudCB3YXkgdG8gZ2VuZXJhdGUgYSBwcmVzaWduZWQgdXJsXG4gICAqKi8gZ2V0U2lnbmVkVVJMID0gYXN5bmMgKGtleSwgb3B0cyk9PntcbiAgICAgICAgICAgIGd1YXJkU2VydmVyT25seSgpO1xuICAgICAgICAgICAgY29uc3QgZXhwaXJlc0luID0gb3B0cz8uZXhwaXJlc0luID8gcGFyc2VUaW1lVG9TZWNvbmRzKG9wdHMuZXhwaXJlc0luKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBpZiAob3B0cz8uZXhwaXJlc0luICYmIGlzTmFOKGV4cGlyZXNJbikpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBhIHZhbGlkIHRpbWUgc3RyaW5nLCBmb3IgZXhhbXBsZSAnMWQnLCAnMiBkYXlzJywgb3IgYSBudW1iZXIgb2Ygc2Vjb25kcy5cIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV4cGlyZXNJbiAmJiBleHBpcmVzSW4gPiA4NjQwMCAqIDcpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVXBsb2FkVGhpbmdFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IFwiQkFEX1JFUVVFU1RcIixcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJleHBpcmVzSW4gbXVzdCBiZSBsZXNzIHRoYW4gNyBkYXlzICg2MDQ4MDAgc2Vjb25kcykuXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsYXNzIEdldFNpZ25lZFVybFJlc3BvbnNlIGV4dGVuZHMgUy5DbGFzcyhcIkdldFNpZ25lZFVybFJlc3BvbnNlXCIpKHtcbiAgICAgICAgICAgICAgICB1cmw6IFMuU3RyaW5nLFxuICAgICAgICAgICAgICAgIHVmc1VybDogUy5TdHJpbmdcbiAgICAgICAgICAgIH0pIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni9yZXF1ZXN0RmlsZUFjY2Vzc1wiLCBrZXlUeXBlID09PSBcImZpbGVLZXlcIiA/IHtcbiAgICAgICAgICAgICAgICBmaWxlS2V5OiBrZXksXG4gICAgICAgICAgICAgICAgZXhwaXJlc0luXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIGN1c3RvbUlkOiBrZXksXG4gICAgICAgICAgICAgICAgZXhwaXJlc0luXG4gICAgICAgICAgICB9LCBHZXRTaWduZWRVcmxSZXNwb25zZSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJnZXRTaWduZWRVUkxcIikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy4vKipcbiAgICogVXBkYXRlIHRoZSBBQ0wgb2YgYSBmaWxlIG9yIHNldCBvZiBmaWxlcy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogLy8gTWFrZSBhIHNpbmdsZSBmaWxlIHB1YmxpY1xuICAgKiBhd2FpdCB1dGFwaS51cGRhdGVBQ0woXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsIFwicHVibGljLXJlYWRcIik7XG4gICAqXG4gICAqIC8vIE1ha2UgbXVsdGlwbGUgZmlsZXMgcHJpdmF0ZVxuICAgKiBhd2FpdCB1dGFwaS51cGRhdGVBQ0woXG4gICAqICAgW1xuICAgKiAgICAgXCIyZTBmZGI2NC05OTU3LTQyNjItOGU0NS1mMzcyYmE5MDNhYzhfaW1hZ2UuanBnXCIsXG4gICAqICAgICBcIjE2NDkzNTNiLTA0ZWEtNDhhMi05ZGI3LTMxZGU3ZjU2MmM4ZF9pbWFnZTIuanBnXCIsXG4gICAqICAgXSxcbiAgICogICBcInByaXZhdGVcIixcbiAgICogKTtcbiAgICovIHVwZGF0ZUFDTCA9IGFzeW5jIChrZXlzLCBhY2wsIG9wdHMpPT57XG4gICAgICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgICAgIGNvbnN0IHsga2V5VHlwZSA9IHRoaXMuZGVmYXVsdEtleVR5cGUgfSA9IG9wdHMgPz8ge307XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gQXJyLmVuc3VyZShrZXlzKS5tYXAoKGtleSk9PntcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5VHlwZSA9PT0gXCJmaWxlS2V5XCIgPyB7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVLZXk6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tSWQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgYWNsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VTY2hlbWEgPSBTLlN0cnVjdCh7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogUy5Cb29sZWFuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBc3luYyh0aGlzLnJlcXVlc3RVcGxvYWRUaGluZyhcIi92Ni91cGRhdGVBQ0xcIiwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZXNcbiAgICAgICAgICAgIH0sIHJlc3BvbnNlU2NoZW1hKS5waXBlKEVmZmVjdC53aXRoTG9nU3BhbihcInVwZGF0ZUFDTFwiKSkpO1xuICAgICAgICB9O1xuICAgICAgICAvLyBBc3NlcnQgc29tZSBzdHVmZlxuICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgdGhpcy5mZXRjaCA9IG9wdHM/LmZldGNoID8/IGdsb2JhbFRoaXMuZmV0Y2g7XG4gICAgICAgIHRoaXMuZGVmYXVsdEtleVR5cGUgPSBvcHRzPy5kZWZhdWx0S2V5VHlwZSA/PyBcImZpbGVLZXlcIjtcbiAgICAgICAgdGhpcy5ydW50aW1lID0gbWFrZVJ1bnRpbWUodGhpcy5mZXRjaCwgdGhpcy5vcHRzKTtcbiAgICB9XG4gICAgdXBsb2FkRmlsZXMoZmlsZXMsIG9wdHMpIHtcbiAgICAgICAgZ3VhcmRTZXJ2ZXJPbmx5KCk7XG4gICAgICAgIGNvbnN0IHByb2dyYW0gPSBFZmZlY3QuZm9yRWFjaChBcnIuZW5zdXJlKGZpbGVzKSwgKGZpbGUpPT51cGxvYWRGaWxlKGZpbGUsIG9wdHMgPz8ge30pLnBpcGUoRWZmZWN0Lm1hdGNoKHtcbiAgICAgICAgICAgICAgICBvblN1Y2Nlc3M6IChkYXRhKT0+KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBvbkZhaWx1cmU6IChlcnJvcik9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pKSkucGlwZShFZmZlY3QubWFwKCh1cHMpPT5BcnJheS5pc0FycmF5KGZpbGVzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdC50YXAoKHJlcyk9PkVmZmVjdC5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJ1cGxvYWRSZXN1bHRcIiwgcmVzKSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc1wiKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4ZWN1dGVBc3luYyhwcm9ncmFtLCBvcHRzPy5zaWduYWwpO1xuICAgIH1cbiAgICB1cGxvYWRGaWxlc0Zyb21VcmwodXJscywgb3B0cykge1xuICAgICAgICBndWFyZFNlcnZlck9ubHkoKTtcbiAgICAgICAgY29uc3QgcHJvZ3JhbSA9IEVmZmVjdC5mb3JFYWNoKEFyci5lbnN1cmUodXJscyksICh1cmwpPT5kb3dubG9hZEZpbGUodXJsKS5waXBlKEVmZmVjdC5mbGF0TWFwKChmaWxlKT0+dXBsb2FkRmlsZShmaWxlLCBvcHRzID8/IHt9KSksIEVmZmVjdC5tYXRjaCh7XG4gICAgICAgICAgICAgICAgb25TdWNjZXNzOiAoZGF0YSk9Pih7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgb25GYWlsdXJlOiAoZXJyb3IpPT4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KSkpLnBpcGUoRWZmZWN0Lm1hcCgodXBzKT0+QXJyYXkuaXNBcnJheSh1cmxzKSA/IHVwcyA6IHVwc1swXSksIEVmZmVjdC50YXAoKHJlcyk9PkVmZmVjdC5sb2dEZWJ1ZyhcIkZpbmlzaGVkIHVwbG9hZGluZ1wiKS5waXBlKEVmZmVjdC5hbm5vdGF0ZUxvZ3MoXCJ1cGxvYWRSZXN1bHRcIiwgcmVzKSkpLCBFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc1wiKSkucGlwZShFZmZlY3Qud2l0aExvZ1NwYW4oXCJ1cGxvYWRGaWxlc0Zyb21VcmxcIikpO1xuICAgICAgICByZXR1cm4gdGhpcy5leGVjdXRlQXN5bmMocHJvZ3JhbSwgb3B0cz8uc2lnbmFsKTtcbiAgICB9XG59XG5cbmNvbnN0IGNyZWF0ZVVwbG9hZHRoaW5nID0gKG9wdHMpPT5jcmVhdGVCdWlsZGVyKG9wdHMpO1xuY29uc3QgY3JlYXRlUm91dGVIYW5kbGVyID0gKG9wdHMpPT57XG4gICAgcmV0dXJuIG1ha2VBZGFwdGVySGFuZGxlcigoZXYpPT5FZmZlY3Quc3VjY2VlZCh7XG4gICAgICAgICAgICByZXE6IFwicmVxdWVzdFwiIGluIGV2ID8gZXYucmVxdWVzdCA6IGV2LFxuICAgICAgICAgICAgcmVzOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBldmVudDogdW5kZWZpbmVkXG4gICAgICAgIH0pLCAoZXYpPT5FZmZlY3Quc3VjY2VlZChcInJlcXVlc3RcIiBpbiBldiA/IGV2LnJlcXVlc3QgOiBldiksIG9wdHMsIFwic2VydmVyXCIpO1xufTtcbmNvbnN0IGV4dHJhY3RSb3V0ZXJDb25maWcgPSAocm91dGVyKT0+RWZmZWN0LnJ1blN5bmMoZXh0cmFjdFJvdXRlckNvbmZpZyQxKHJvdXRlcikpO1xuXG5leHBvcnQgeyBVVEFwaSwgVVRGaWxlLCBjcmVhdGVSb3V0ZUhhbmRsZXIsIGNyZWF0ZVVwbG9hZHRoaW5nLCBleHRyYWN0Um91dGVyQ29uZmlnIH07XG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/uploadthing/server/index.js\n");

/***/ })

};
;