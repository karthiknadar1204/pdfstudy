/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/chat/[documentId]/route";
exports.ids = ["app/api/chat/[documentId]/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:crypto");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:path":
/*!****************************!*\
  !*** external "node:path" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:path");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&page=%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute.ts&appDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&page=%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute.ts&appDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_karthiknadar_Desktop_pdfst_app_api_chat_documentId_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/chat/[documentId]/route.ts */ \"(rsc)/./app/api/chat/[documentId]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/chat/[documentId]/route\",\n        pathname: \"/api/chat/[documentId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/chat/[documentId]/route\"\n    },\n    resolvedPagePath: \"/Users/karthiknadar/Desktop/pdfst/app/api/chat/[documentId]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_karthiknadar_Desktop_pdfst_app_api_chat_documentId_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZjaGF0JTJGJTVCZG9jdW1lbnRJZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2hhdCUyRiU1QmRvY3VtZW50SWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjaGF0JTJGJTVCZG9jdW1lbnRJZCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmthcnRoaWtuYWRhciUyRkRlc2t0b3AlMkZwZGZzdCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZrYXJ0aGlrbmFkYXIlMkZEZXNrdG9wJTJGcGRmc3QmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ29CO0FBQ2pHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3QvYXBwL2FwaS9jaGF0L1tkb2N1bWVudElkXS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2hhdC9bZG9jdW1lbnRJZF0vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9jaGF0L1tkb2N1bWVudElkXVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvY2hhdC9bZG9jdW1lbnRJZF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3QvYXBwL2FwaS9jaGF0L1tkb2N1bWVudElkXS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&page=%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute.ts&appDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst%2Flib%2Fembeddings.ts%22%2C%5B%5B%2240b75191ffba29d42d184cac594b69c72f5a8a4ea2%22%2C%22generateQueryEmbedding%22%5D%2C%5B%226061b4b0266a63367f433d524be9bfb865eae01d6f%22%2C%22generateResponseFromDocument%22%5D%2C%5B%2260c9619da0251a313b176f12525a9cd810ddbd9043%22%2C%22processDocumentQuery%22%5D%2C%5B%22704661934ea74220b9ef7352535d100b8558a4f708%22%2C%22searchVectorDatabase%22%5D%5D%5D%5D&__client_imported__=!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst%2Flib%2Fembeddings.ts%22%2C%5B%5B%2240b75191ffba29d42d184cac594b69c72f5a8a4ea2%22%2C%22generateQueryEmbedding%22%5D%2C%5B%226061b4b0266a63367f433d524be9bfb865eae01d6f%22%2C%22generateResponseFromDocument%22%5D%2C%5B%2260c9619da0251a313b176f12525a9cd810ddbd9043%22%2C%22processDocumentQuery%22%5D%2C%5B%22704661934ea74220b9ef7352535d100b8558a4f708%22%2C%22searchVectorDatabase%22%5D%5D%5D%5D&__client_imported__=! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"40b75191ffba29d42d184cac594b69c72f5a8a4ea2\": () => (/* reexport safe */ _Users_karthiknadar_Desktop_pdfst_lib_embeddings_ts__WEBPACK_IMPORTED_MODULE_0__.generateQueryEmbedding),\n/* harmony export */   \"6061b4b0266a63367f433d524be9bfb865eae01d6f\": () => (/* reexport safe */ _Users_karthiknadar_Desktop_pdfst_lib_embeddings_ts__WEBPACK_IMPORTED_MODULE_0__.generateResponseFromDocument),\n/* harmony export */   \"60c9619da0251a313b176f12525a9cd810ddbd9043\": () => (/* reexport safe */ _Users_karthiknadar_Desktop_pdfst_lib_embeddings_ts__WEBPACK_IMPORTED_MODULE_0__.processDocumentQuery),\n/* harmony export */   \"704661934ea74220b9ef7352535d100b8558a4f708\": () => (/* reexport safe */ _Users_karthiknadar_Desktop_pdfst_lib_embeddings_ts__WEBPACK_IMPORTED_MODULE_0__.searchVectorDatabase)\n/* harmony export */ });\n/* harmony import */ var _Users_karthiknadar_Desktop_pdfst_lib_embeddings_ts__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lib/embeddings.ts */ \"(rsc)/./lib/embeddings.ts\");\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1hY3Rpb24tZW50cnktbG9hZGVyLmpzP2FjdGlvbnM9JTVCJTVCJTIyJTJGVXNlcnMlMkZrYXJ0aGlrbmFkYXIlMkZEZXNrdG9wJTJGcGRmc3QlMkZsaWIlMkZlbWJlZGRpbmdzLnRzJTIyJTJDJTVCJTVCJTIyNDBiNzUxOTFmZmJhMjlkNDJkMTg0Y2FjNTk0YjY5YzcyZjVhOGE0ZWEyJTIyJTJDJTIyZ2VuZXJhdGVRdWVyeUVtYmVkZGluZyUyMiU1RCUyQyU1QiUyMjYwNjFiNGIwMjY2YTYzMzY3ZjQzM2Q1MjRiZTliZmI4NjVlYWUwMWQ2ZiUyMiUyQyUyMmdlbmVyYXRlUmVzcG9uc2VGcm9tRG9jdW1lbnQlMjIlNUQlMkMlNUIlMjI2MGM5NjE5ZGEwMjUxYTMxM2IxNzZmMTI1MjVhOWNkODEwZGRiZDkwNDMlMjIlMkMlMjJwcm9jZXNzRG9jdW1lbnRRdWVyeSUyMiU1RCUyQyU1QiUyMjcwNDY2MTkzNGVhNzQyMjBiOWVmNzM1MjUzNWQxMDBiODU1OGE0ZjcwOCUyMiUyQyUyMnNlYXJjaFZlY3RvckRhdGFiYXNlJTIyJTVEJTVEJTVEJTVEJl9fY2xpZW50X2ltcG9ydGVkX189ISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFDNEk7QUFDTTtBQUNSO0FBQ0EiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmV4cG9ydCB7IGdlbmVyYXRlUXVlcnlFbWJlZGRpbmcgYXMgXCI0MGI3NTE5MWZmYmEyOWQ0MmQxODRjYWM1OTRiNjljNzJmNWE4YTRlYTJcIiB9IGZyb20gXCIvVXNlcnMva2FydGhpa25hZGFyL0Rlc2t0b3AvcGRmc3QvbGliL2VtYmVkZGluZ3MudHNcIlxuZXhwb3J0IHsgZ2VuZXJhdGVSZXNwb25zZUZyb21Eb2N1bWVudCBhcyBcIjYwNjFiNGIwMjY2YTYzMzY3ZjQzM2Q1MjRiZTliZmI4NjVlYWUwMWQ2ZlwiIH0gZnJvbSBcIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9saWIvZW1iZWRkaW5ncy50c1wiXG5leHBvcnQgeyBwcm9jZXNzRG9jdW1lbnRRdWVyeSBhcyBcIjYwYzk2MTlkYTAyNTFhMzEzYjE3NmYxMjUyNWE5Y2Q4MTBkZGJkOTA0M1wiIH0gZnJvbSBcIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9saWIvZW1iZWRkaW5ncy50c1wiXG5leHBvcnQgeyBzZWFyY2hWZWN0b3JEYXRhYmFzZSBhcyBcIjcwNDY2MTkzNGVhNzQyMjBiOWVmNzM1MjUzNWQxMDBiODU1OGE0ZjcwOFwiIH0gZnJvbSBcIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9saWIvZW1iZWRkaW5ncy50c1wiXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-action-entry-loader.js?actions=%5B%5B%22%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst%2Flib%2Fembeddings.ts%22%2C%5B%5B%2240b75191ffba29d42d184cac594b69c72f5a8a4ea2%22%2C%22generateQueryEmbedding%22%5D%2C%5B%226061b4b0266a63367f433d524be9bfb865eae01d6f%22%2C%22generateResponseFromDocument%22%5D%2C%5B%2260c9619da0251a313b176f12525a9cd810ddbd9043%22%2C%22processDocumentQuery%22%5D%2C%5B%22704661934ea74220b9ef7352535d100b8558a4f708%22%2C%22searchVectorDatabase%22%5D%5D%5D%5D&__client_imported__=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/chat/[documentId]/route.ts":
/*!********************************************!*\
  !*** ./app/api/chat/[documentId]/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _configs_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/configs/db */ \"(rsc)/./configs/db.ts\");\n/* harmony import */ var _configs_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/configs/schema */ \"(rsc)/./configs/schema.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var _clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @clerk/nextjs/server */ \"(rsc)/./node_modules/@clerk/nextjs/dist/esm/server/createGetAuth.js\");\n/* harmony import */ var _lib_embeddings__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/embeddings */ \"(rsc)/./lib/embeddings.ts\");\n\n\n\n\n\n\nasync function POST(request, { params }) {\n    try {\n        const { userId } = (0,_clerk_nextjs_server__WEBPACK_IMPORTED_MODULE_4__.getAuth)(request);\n        if (!userId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 401\n            });\n        }\n        // Get document ID from params\n        const { documentId: documentIdStr } = params;\n        const documentId = parseInt(documentIdStr);\n        if (isNaN(documentId)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid document ID\"\n            }, {\n                status: 400\n            });\n        }\n        // Get the user's ID from the database\n        const user = await _configs_db__WEBPACK_IMPORTED_MODULE_1__.db.query.users.findFirst({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_configs_schema__WEBPACK_IMPORTED_MODULE_2__.users.clerkId, userId)\n        });\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"User not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Get the document\n        const document = await _configs_db__WEBPACK_IMPORTED_MODULE_1__.db.query.documents.findFirst({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_5__.eq)(_configs_schema__WEBPACK_IMPORTED_MODULE_2__.documents.id, documentId)\n        });\n        if (!document) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Document not found\"\n            }, {\n                status: 404\n            });\n        }\n        // Check if the document belongs to the user\n        if (document.userId !== user.id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Unauthorized\"\n            }, {\n                status: 403\n            });\n        }\n        // Parse the request body\n        const body = await request.json();\n        const { message } = body;\n        if (!message || typeof message !== 'string') {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Message is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Generate a response based on the document content\n        const response = await (0,_lib_embeddings__WEBPACK_IMPORTED_MODULE_3__.generateResponseFromDocument)(message, documentId);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: response.message,\n            sources: response.sources,\n            referencedPages: response.referencedPages\n        });\n    } catch (error) {\n        console.error(\"Error processing chat:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvW2RvY3VtZW50SWRdL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBd0Q7QUFDdEI7QUFDa0I7QUFDbkI7QUFDYztBQUNpQjtBQUV6RCxlQUFlTyxLQUNwQkMsT0FBb0IsRUFDcEIsRUFBRUMsTUFBTSxFQUFzQztJQUU5QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxNQUFNLEVBQUUsR0FBR0wsNkRBQU9BLENBQUNHO1FBRTNCLElBQUksQ0FBQ0UsUUFBUTtZQUNYLE9BQU9WLHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWUsR0FDeEI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLDhCQUE4QjtRQUM5QixNQUFNLEVBQUVDLFlBQVlDLGFBQWEsRUFBRSxHQUFHTjtRQUN0QyxNQUFNSyxhQUFhRSxTQUFTRDtRQUU1QixJQUFJRSxNQUFNSCxhQUFhO1lBQ3JCLE9BQU9kLHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXNCLEdBQy9CO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxzQ0FBc0M7UUFDdEMsTUFBTUssT0FBTyxNQUFNakIsMkNBQUVBLENBQUNrQixLQUFLLENBQUNoQixLQUFLLENBQUNpQixTQUFTLENBQUM7WUFDMUNDLE9BQU9qQiwrQ0FBRUEsQ0FBQ0Qsa0RBQUtBLENBQUNtQixPQUFPLEVBQUVaO1FBQzNCO1FBRUEsSUFBSSxDQUFDUSxNQUFNO1lBQ1QsT0FBT2xCLHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWlCLEdBQzFCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxtQkFBbUI7UUFDbkIsTUFBTVUsV0FBVyxNQUFNdEIsMkNBQUVBLENBQUNrQixLQUFLLENBQUNqQixTQUFTLENBQUNrQixTQUFTLENBQUM7WUFDbERDLE9BQU9qQiwrQ0FBRUEsQ0FBQ0Ysc0RBQVNBLENBQUNzQixFQUFFLEVBQUVWO1FBQzFCO1FBRUEsSUFBSSxDQUFDUyxVQUFVO1lBQ2IsT0FBT3ZCLHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXFCLEdBQzlCO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSw0Q0FBNEM7UUFDNUMsSUFBSVUsU0FBU2IsTUFBTSxLQUFLUSxLQUFLTSxFQUFFLEVBQUU7WUFDL0IsT0FBT3hCLHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQWUsR0FDeEI7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLHlCQUF5QjtRQUN6QixNQUFNWSxPQUFPLE1BQU1qQixRQUFRRyxJQUFJO1FBQy9CLE1BQU0sRUFBRWUsT0FBTyxFQUFFLEdBQUdEO1FBRXBCLElBQUksQ0FBQ0MsV0FBVyxPQUFPQSxZQUFZLFVBQVU7WUFDM0MsT0FBTzFCLHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXNCLEdBQy9CO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxvREFBb0Q7UUFDcEQsTUFBTWMsV0FBVyxNQUFNckIsNkVBQTRCQSxDQUFDb0IsU0FBU1o7UUFFN0QsT0FBT2QscURBQVlBLENBQUNXLElBQUksQ0FBQztZQUN2QmUsU0FBU0MsU0FBU0QsT0FBTztZQUN6QkUsU0FBU0QsU0FBU0MsT0FBTztZQUN6QkMsaUJBQWlCRixTQUFTRSxlQUFlO1FBQzNDO0lBQ0YsRUFBRSxPQUFPakIsT0FBTztRQUNka0IsUUFBUWxCLEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU9aLHFEQUFZQSxDQUFDVyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBd0IsR0FDakM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9hcHAvYXBpL2NoYXQvW2RvY3VtZW50SWRdL3JvdXRlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGRiIH0gZnJvbSBcIkAvY29uZmlncy9kYlwiO1xuaW1wb3J0IHsgZG9jdW1lbnRzLCB1c2VycyB9IGZyb20gXCJAL2NvbmZpZ3Mvc2NoZW1hXCI7XG5pbXBvcnQgeyBlcSB9IGZyb20gXCJkcml6emxlLW9ybVwiO1xuaW1wb3J0IHsgZ2V0QXV0aCB9IGZyb20gXCJAY2xlcmsvbmV4dGpzL3NlcnZlclwiO1xuaW1wb3J0IHsgZ2VuZXJhdGVSZXNwb25zZUZyb21Eb2N1bWVudCB9IGZyb20gXCJAL2xpYi9lbWJlZGRpbmdzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKFxuICByZXF1ZXN0OiBOZXh0UmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgZG9jdW1lbnRJZDogc3RyaW5nIH0gfVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyB1c2VySWQgfSA9IGdldEF1dGgocmVxdWVzdCk7XG4gICAgXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJVbmF1dGhvcml6ZWRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gR2V0IGRvY3VtZW50IElEIGZyb20gcGFyYW1zXG4gICAgY29uc3QgeyBkb2N1bWVudElkOiBkb2N1bWVudElkU3RyIH0gPSBwYXJhbXM7XG4gICAgY29uc3QgZG9jdW1lbnRJZCA9IHBhcnNlSW50KGRvY3VtZW50SWRTdHIpO1xuICAgIFxuICAgIGlmIChpc05hTihkb2N1bWVudElkKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIkludmFsaWQgZG9jdW1lbnQgSURcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSB1c2VyJ3MgSUQgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIucXVlcnkudXNlcnMuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiBlcSh1c2Vycy5jbGVya0lkLCB1c2VySWQpLFxuICAgIH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiVXNlciBub3QgZm91bmRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gR2V0IHRoZSBkb2N1bWVudFxuICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgZGIucXVlcnkuZG9jdW1lbnRzLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogZXEoZG9jdW1lbnRzLmlkLCBkb2N1bWVudElkKSxcbiAgICB9KTtcblxuICAgIGlmICghZG9jdW1lbnQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJEb2N1bWVudCBub3QgZm91bmRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDA0IH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIGRvY3VtZW50IGJlbG9uZ3MgdG8gdGhlIHVzZXJcbiAgICBpZiAoZG9jdW1lbnQudXNlcklkICE9PSB1c2VyLmlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6IFwiVW5hdXRob3JpemVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMyB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIHRoZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBtZXNzYWdlIH0gPSBib2R5O1xuXG4gICAgaWYgKCFtZXNzYWdlIHx8IHR5cGVvZiBtZXNzYWdlICE9PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiBcIk1lc3NhZ2UgaXMgcmVxdWlyZWRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gR2VuZXJhdGUgYSByZXNwb25zZSBiYXNlZCBvbiB0aGUgZG9jdW1lbnQgY29udGVudFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZ2VuZXJhdGVSZXNwb25zZUZyb21Eb2N1bWVudChtZXNzYWdlLCBkb2N1bWVudElkKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlLFxuICAgICAgc291cmNlczogcmVzcG9uc2Uuc291cmNlcyxcbiAgICAgIHJlZmVyZW5jZWRQYWdlczogcmVzcG9uc2UucmVmZXJlbmNlZFBhZ2VzXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHByb2Nlc3NpbmcgY2hhdDpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImRiIiwiZG9jdW1lbnRzIiwidXNlcnMiLCJlcSIsImdldEF1dGgiLCJnZW5lcmF0ZVJlc3BvbnNlRnJvbURvY3VtZW50IiwiUE9TVCIsInJlcXVlc3QiLCJwYXJhbXMiLCJ1c2VySWQiLCJqc29uIiwiZXJyb3IiLCJzdGF0dXMiLCJkb2N1bWVudElkIiwiZG9jdW1lbnRJZFN0ciIsInBhcnNlSW50IiwiaXNOYU4iLCJ1c2VyIiwicXVlcnkiLCJmaW5kRmlyc3QiLCJ3aGVyZSIsImNsZXJrSWQiLCJkb2N1bWVudCIsImlkIiwiYm9keSIsIm1lc3NhZ2UiLCJyZXNwb25zZSIsInNvdXJjZXMiLCJyZWZlcmVuY2VkUGFnZXMiLCJjb25zb2xlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/[documentId]/route.ts\n");

/***/ }),

/***/ "(rsc)/./configs/db.ts":
/*!***********************!*\
  !*** ./configs/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db)\n/* harmony export */ });\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.mjs\");\n/* harmony import */ var drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/neon-http */ \"(rsc)/./node_modules/drizzle-orm/neon-http/driver.js\");\n/* harmony import */ var _schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema */ \"(rsc)/./configs/schema.ts\");\n\n\n\nconst sql = (0,_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neon)(\"postgresql://karthiknadar1204:Fvph9DyfVm2L@ep-restless-credit-a1c7489o-pooler.ap-southeast-1.aws.neon.tech/pdfstudytest?sslmode=require\");\nconst db = (0,drizzle_orm_neon_http__WEBPACK_IMPORTED_MODULE_2__.drizzle)(sql, {\n    schema: _schema__WEBPACK_IMPORTED_MODULE_1__\n}); // const result = await db.select().from(...);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9jb25maWdzL2RiLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBZ0Q7QUFDQTtBQUNkO0FBRWxDLE1BQU1HLE1BQU1ILDhEQUFJQSxDQUFDSSx5SUFBNEM7QUFDdEQsTUFBTUcsS0FBS04sOERBQU9BLENBQUNFLEtBQUk7SUFBQ0QsTUFBTUEsc0NBQUFBO0FBQUEsR0FBRyxDQUV4Qyw4Q0FBOEMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9jb25maWdzL2RiLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG5lb24gfSBmcm9tICdAbmVvbmRhdGFiYXNlL3NlcnZlcmxlc3MnO1xuaW1wb3J0IHsgZHJpenpsZSB9IGZyb20gJ2RyaXp6bGUtb3JtL25lb24taHR0cCc7XG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSBcIi4vc2NoZW1hXCJcblxuY29uc3Qgc3FsID0gbmVvbihwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19EUklaWkxFX0RBVEFCQVNFX1VSTCk7XG5leHBvcnQgY29uc3QgZGIgPSBkcml6emxlKHNxbCx7c2NoZW1hfSk7XG5cbi8vIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiLnNlbGVjdCgpLmZyb20oLi4uKTsiXSwibmFtZXMiOlsibmVvbiIsImRyaXp6bGUiLCJzY2hlbWEiLCJzcWwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfRFJJWlpMRV9EQVRBQkFTRV9VUkwiLCJkYiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./configs/db.ts\n");

/***/ }),

/***/ "(rsc)/./configs/schema.ts":
/*!***************************!*\
  !*** ./configs/schema.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   chatMessages: () => (/* binding */ chatMessages),\n/* harmony export */   chatSessions: () => (/* binding */ chatSessions),\n/* harmony export */   documents: () => (/* binding */ documents),\n/* harmony export */   users: () => (/* binding */ users)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/serial.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/varchar.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n\n// Users table\nconst users = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('users', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    clerkId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('clerk_id', {\n        length: 255\n    }).notNull().unique(),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('email', {\n        length: 255\n    }).notNull(),\n    username: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('username', {\n        length: 255\n    }),\n    firstName: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('first_name', {\n        length: 255\n    }),\n    lastName: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('last_name', {\n        length: 255\n    }),\n    profileImageUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('profile_image_url'),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('created_at').defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('updated_at').defaultNow()\n});\n// PDF documents table\nconst documents = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('documents', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('user_id').references(()=>users.id),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('title', {\n        length: 255\n    }).notNull(),\n    fileName: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('file_name', {\n        length: 255\n    }).notNull(),\n    fileUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('file_url').notNull(),\n    fileKey: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('file_key', {\n        length: 255\n    }).notNull(),\n    fileSize: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('file_size').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('created_at').defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('updated_at').defaultNow()\n});\n// Chat sessions table\nconst chatSessions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('chat_sessions', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('user_id').references(()=>users.id),\n    documentId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('document_id').references(()=>documents.id),\n    title: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.varchar)('title', {\n        length: 255\n    }).notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('created_at').defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('updated_at').defaultNow()\n});\n// Chat messages table\nconst chatMessages = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_0__.pgTable)('chat_messages', {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('id').primaryKey(),\n    sessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.serial)('session_id').references(()=>chatSessions.id),\n    isUserMessage: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.boolean)('is_user_message').notNull(),\n    content: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)('content').notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.timestamp)('created_at').defaultNow()\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9jb25maWdzL3NjaGVtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXFIO0FBR3JILGNBQWM7QUFDUCxNQUFNTSxRQUFRTiw0REFBT0EsQ0FBQyxTQUFTO0lBQ3BDTyxJQUFJTiwyREFBTUEsQ0FBQyxNQUFNTyxVQUFVO0lBQzNCQyxTQUFTTCw0REFBT0EsQ0FBQyxZQUFZO1FBQUVNLFFBQVE7SUFBSSxHQUFHQyxPQUFPLEdBQUdDLE1BQU07SUFDOURDLE9BQU9ULDREQUFPQSxDQUFDLFNBQVM7UUFBRU0sUUFBUTtJQUFJLEdBQUdDLE9BQU87SUFDaERHLFVBQVVWLDREQUFPQSxDQUFDLFlBQVk7UUFBRU0sUUFBUTtJQUFJO0lBQzVDSyxXQUFXWCw0REFBT0EsQ0FBQyxjQUFjO1FBQUVNLFFBQVE7SUFBSTtJQUMvQ00sVUFBVVosNERBQU9BLENBQUMsYUFBYTtRQUFFTSxRQUFRO0lBQUk7SUFDN0NPLGlCQUFpQmYseURBQUlBLENBQUM7SUFDdEJnQixXQUFXZiw4REFBU0EsQ0FBQyxjQUFjZ0IsVUFBVTtJQUM3Q0MsV0FBV2pCLDhEQUFTQSxDQUFDLGNBQWNnQixVQUFVO0FBQy9DLEdBQUc7QUFFSCxzQkFBc0I7QUFDZixNQUFNRSxZQUFZckIsNERBQU9BLENBQUMsYUFBYTtJQUM1Q08sSUFBSU4sMkRBQU1BLENBQUMsTUFBTU8sVUFBVTtJQUMzQmMsUUFBUXJCLDJEQUFNQSxDQUFDLFdBQVdzQixVQUFVLENBQUMsSUFBTWpCLE1BQU1DLEVBQUU7SUFDbkRpQixPQUFPcEIsNERBQU9BLENBQUMsU0FBUztRQUFFTSxRQUFRO0lBQUksR0FBR0MsT0FBTztJQUNoRGMsVUFBVXJCLDREQUFPQSxDQUFDLGFBQWE7UUFBRU0sUUFBUTtJQUFJLEdBQUdDLE9BQU87SUFDdkRlLFNBQVN4Qix5REFBSUEsQ0FBQyxZQUFZUyxPQUFPO0lBQ2pDZ0IsU0FBU3ZCLDREQUFPQSxDQUFDLFlBQVk7UUFBRU0sUUFBUTtJQUFJLEdBQUdDLE9BQU87SUFDckRpQixVQUFVM0IsMkRBQU1BLENBQUMsYUFBYVUsT0FBTztJQUNyQ08sV0FBV2YsOERBQVNBLENBQUMsY0FBY2dCLFVBQVU7SUFDN0NDLFdBQVdqQiw4REFBU0EsQ0FBQyxjQUFjZ0IsVUFBVTtBQUMvQyxHQUFHO0FBRUgsc0JBQXNCO0FBQ2YsTUFBTVUsZUFBZTdCLDREQUFPQSxDQUFDLGlCQUFpQjtJQUNuRE8sSUFBSU4sMkRBQU1BLENBQUMsTUFBTU8sVUFBVTtJQUMzQmMsUUFBUXJCLDJEQUFNQSxDQUFDLFdBQVdzQixVQUFVLENBQUMsSUFBTWpCLE1BQU1DLEVBQUU7SUFDbkR1QixZQUFZN0IsMkRBQU1BLENBQUMsZUFBZXNCLFVBQVUsQ0FBQyxJQUFNRixVQUFVZCxFQUFFO0lBQy9EaUIsT0FBT3BCLDREQUFPQSxDQUFDLFNBQVM7UUFBRU0sUUFBUTtJQUFJLEdBQUdDLE9BQU87SUFDaERPLFdBQVdmLDhEQUFTQSxDQUFDLGNBQWNnQixVQUFVO0lBQzdDQyxXQUFXakIsOERBQVNBLENBQUMsY0FBY2dCLFVBQVU7QUFDL0MsR0FBRztBQUVILHNCQUFzQjtBQUNmLE1BQU1ZLGVBQWUvQiw0REFBT0EsQ0FBQyxpQkFBaUI7SUFDbkRPLElBQUlOLDJEQUFNQSxDQUFDLE1BQU1PLFVBQVU7SUFDM0J3QixXQUFXL0IsMkRBQU1BLENBQUMsY0FBY3NCLFVBQVUsQ0FBQyxJQUFNTSxhQUFhdEIsRUFBRTtJQUNoRTBCLGVBQWU1Qiw0REFBT0EsQ0FBQyxtQkFBbUJNLE9BQU87SUFDakR1QixTQUFTaEMseURBQUlBLENBQUMsV0FBV1MsT0FBTztJQUNoQ08sV0FBV2YsOERBQVNBLENBQUMsY0FBY2dCLFVBQVU7QUFDL0MsR0FBRyIsInNvdXJjZXMiOlsiL1VzZXJzL2thcnRoaWtuYWRhci9EZXNrdG9wL3BkZnN0L2NvbmZpZ3Mvc2NoZW1hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBnVGFibGUsIHNlcmlhbCwgdGV4dCwgdGltZXN0YW1wLCB2YXJjaGFyLCB1dWlkLCBqc29uLCBib29sZWFuLCBpbnRlZ2VyLCBqc29uYiB9IGZyb20gJ2RyaXp6bGUtb3JtL3BnLWNvcmUnO1xuaW1wb3J0IHsgcmVsYXRpb25zIH0gZnJvbSAnZHJpenpsZS1vcm0nO1xuXG4vLyBVc2VycyB0YWJsZVxuZXhwb3J0IGNvbnN0IHVzZXJzID0gcGdUYWJsZSgndXNlcnMnLCB7XG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxuICBjbGVya0lkOiB2YXJjaGFyKCdjbGVya19pZCcsIHsgbGVuZ3RoOiAyNTUgfSkubm90TnVsbCgpLnVuaXF1ZSgpLFxuICBlbWFpbDogdmFyY2hhcignZW1haWwnLCB7IGxlbmd0aDogMjU1IH0pLm5vdE51bGwoKSxcbiAgdXNlcm5hbWU6IHZhcmNoYXIoJ3VzZXJuYW1lJywgeyBsZW5ndGg6IDI1NSB9KSxcbiAgZmlyc3ROYW1lOiB2YXJjaGFyKCdmaXJzdF9uYW1lJywgeyBsZW5ndGg6IDI1NSB9KSxcbiAgbGFzdE5hbWU6IHZhcmNoYXIoJ2xhc3RfbmFtZScsIHsgbGVuZ3RoOiAyNTUgfSksXG4gIHByb2ZpbGVJbWFnZVVybDogdGV4dCgncHJvZmlsZV9pbWFnZV91cmwnKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5kZWZhdWx0Tm93KCksXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKCd1cGRhdGVkX2F0JykuZGVmYXVsdE5vdygpLFxufSk7XG5cbi8vIFBERiBkb2N1bWVudHMgdGFibGVcbmV4cG9ydCBjb25zdCBkb2N1bWVudHMgPSBwZ1RhYmxlKCdkb2N1bWVudHMnLCB7XG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxuICB1c2VySWQ6IHNlcmlhbCgndXNlcl9pZCcpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICB0aXRsZTogdmFyY2hhcigndGl0bGUnLCB7IGxlbmd0aDogMjU1IH0pLm5vdE51bGwoKSxcbiAgZmlsZU5hbWU6IHZhcmNoYXIoJ2ZpbGVfbmFtZScsIHsgbGVuZ3RoOiAyNTUgfSkubm90TnVsbCgpLFxuICBmaWxlVXJsOiB0ZXh0KCdmaWxlX3VybCcpLm5vdE51bGwoKSxcbiAgZmlsZUtleTogdmFyY2hhcignZmlsZV9rZXknLCB7IGxlbmd0aDogMjU1IH0pLm5vdE51bGwoKSxcbiAgZmlsZVNpemU6IHNlcmlhbCgnZmlsZV9zaXplJykubm90TnVsbCgpLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcCgnY3JlYXRlZF9hdCcpLmRlZmF1bHROb3coKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoJ3VwZGF0ZWRfYXQnKS5kZWZhdWx0Tm93KCksXG59KTtcblxuLy8gQ2hhdCBzZXNzaW9ucyB0YWJsZVxuZXhwb3J0IGNvbnN0IGNoYXRTZXNzaW9ucyA9IHBnVGFibGUoJ2NoYXRfc2Vzc2lvbnMnLCB7XG4gIGlkOiBzZXJpYWwoJ2lkJykucHJpbWFyeUtleSgpLFxuICB1c2VySWQ6IHNlcmlhbCgndXNlcl9pZCcpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICBkb2N1bWVudElkOiBzZXJpYWwoJ2RvY3VtZW50X2lkJykucmVmZXJlbmNlcygoKSA9PiBkb2N1bWVudHMuaWQpLFxuICB0aXRsZTogdmFyY2hhcigndGl0bGUnLCB7IGxlbmd0aDogMjU1IH0pLm5vdE51bGwoKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5kZWZhdWx0Tm93KCksXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKCd1cGRhdGVkX2F0JykuZGVmYXVsdE5vdygpLFxufSk7XG5cbi8vIENoYXQgbWVzc2FnZXMgdGFibGVcbmV4cG9ydCBjb25zdCBjaGF0TWVzc2FnZXMgPSBwZ1RhYmxlKCdjaGF0X21lc3NhZ2VzJywge1xuICBpZDogc2VyaWFsKCdpZCcpLnByaW1hcnlLZXkoKSxcbiAgc2Vzc2lvbklkOiBzZXJpYWwoJ3Nlc3Npb25faWQnKS5yZWZlcmVuY2VzKCgpID0+IGNoYXRTZXNzaW9ucy5pZCksXG4gIGlzVXNlck1lc3NhZ2U6IGJvb2xlYW4oJ2lzX3VzZXJfbWVzc2FnZScpLm5vdE51bGwoKSxcbiAgY29udGVudDogdGV4dCgnY29udGVudCcpLm5vdE51bGwoKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoJ2NyZWF0ZWRfYXQnKS5kZWZhdWx0Tm93KCksXG59KTtcblxuIl0sIm5hbWVzIjpbInBnVGFibGUiLCJzZXJpYWwiLCJ0ZXh0IiwidGltZXN0YW1wIiwidmFyY2hhciIsImJvb2xlYW4iLCJ1c2VycyIsImlkIiwicHJpbWFyeUtleSIsImNsZXJrSWQiLCJsZW5ndGgiLCJub3ROdWxsIiwidW5pcXVlIiwiZW1haWwiLCJ1c2VybmFtZSIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicHJvZmlsZUltYWdlVXJsIiwiY3JlYXRlZEF0IiwiZGVmYXVsdE5vdyIsInVwZGF0ZWRBdCIsImRvY3VtZW50cyIsInVzZXJJZCIsInJlZmVyZW5jZXMiLCJ0aXRsZSIsImZpbGVOYW1lIiwiZmlsZVVybCIsImZpbGVLZXkiLCJmaWxlU2l6ZSIsImNoYXRTZXNzaW9ucyIsImRvY3VtZW50SWQiLCJjaGF0TWVzc2FnZXMiLCJzZXNzaW9uSWQiLCJpc1VzZXJNZXNzYWdlIiwiY29udGVudCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./configs/schema.ts\n");

/***/ }),

/***/ "(rsc)/./lib/embeddings.ts":
/*!***************************!*\
  !*** ./lib/embeddings.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateQueryEmbedding: () => (/* binding */ generateQueryEmbedding),\n/* harmony export */   generateResponseFromDocument: () => (/* binding */ generateResponseFromDocument),\n/* harmony export */   processDocumentQuery: () => (/* binding */ processDocumentQuery),\n/* harmony export */   searchVectorDatabase: () => (/* binding */ searchVectorDatabase)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-server-reference */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/server-reference.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! private-next-rsc-action-encryption */ \"(rsc)/./node_modules/next/dist/server/app-render/encryption.js\");\n/* harmony import */ var private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_encryption__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @pinecone-database/pinecone */ \"(rsc)/./node_modules/@pinecone-database/pinecone/dist/index.js\");\n/* harmony import */ var _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-rsc-action-validate */ \"(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-validate.js\");\n/* __next_internal_action_entry_do_not_use__ {\"40b75191ffba29d42d184cac594b69c72f5a8a4ea2\":\"generateQueryEmbedding\",\"6061b4b0266a63367f433d524be9bfb865eae01d6f\":\"generateResponseFromDocument\",\"60c9619da0251a313b176f12525a9cd810ddbd9043\":\"processDocumentQuery\",\"704661934ea74220b9ef7352535d100b8558a4f708\":\"searchVectorDatabase\"} */ \n\n\n\n// Initialize OpenAI client\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\n// Initialize Pinecone client\nconst pinecone = new _pinecone_database_pinecone__WEBPACK_IMPORTED_MODULE_2__.Pinecone({\n    apiKey: process.env.PINECONE_API_KEY || ''\n});\n// Get Pinecone index\nconst getPineconeIndex = ()=>{\n    return pinecone.index('pdftest');\n};\n/**\n * Generate embeddings for a query string\n * @param query The user's query text\n * @returns An array of embedding values\n */ async function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ generateQueryEmbedding(query) {\n    try {\n        // Truncate query if it's too long (approximation for 4000 tokens)\n        const processedQuery = query.slice(0, 8000);\n        const response = await openai.embeddings.create({\n            input: processedQuery,\n            model: \"text-embedding-3-small\"\n        });\n        return response.data[0].embedding;\n    } catch (error) {\n        console.error(\"Error generating query embedding:\", error);\n        throw new Error(\"Failed to generate embedding for query\");\n    }\n}\n/**\n * Search for relevant content in the vector database\n * @param queryEmbedding The embedding vector for the query\n * @param documentId The ID of the document to search within\n * @param topK Number of results to return\n * @returns Array of matching results with their content and metadata\n */ async function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ searchVectorDatabase(queryEmbedding, documentId, topK = 5) {\n    try {\n        const index = getPineconeIndex();\n        // Query the vector database with document filter\n        const results = await index.query({\n            vector: queryEmbedding,\n            topK,\n            filter: {\n                documentId\n            },\n            includeMetadata: true\n        });\n        return results.matches.map((match)=>({\n                score: match.score,\n                pageNumber: match.metadata?.pageNumber,\n                content: match.metadata?.content,\n                documentId: match.metadata?.documentId,\n                totalChunks: match.metadata?.totalChunks\n            }));\n    } catch (error) {\n        console.error(\"Error searching vector database:\", error);\n        throw new Error(\"Failed to search document content\");\n    }\n}\n/**\n * Process a user query against a specific document\n * @param query The user's question\n * @param documentId The document ID to search within\n * @returns Relevant content from the document\n */ async function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ processDocumentQuery(query, documentId) {\n    try {\n        // Generate embedding for the query\n        const queryEmbedding = await generateQueryEmbedding(query);\n        // Search for relevant content\n        const searchResults = await searchVectorDatabase(queryEmbedding, documentId, 5);\n        // Return the search results\n        return {\n            query,\n            results: searchResults,\n            timestamp: new Date().toISOString()\n        };\n    } catch (error) {\n        console.error(\"Error processing document query:\", error);\n        throw new Error(\"Failed to process your query\");\n    }\n}\n/**\n * Generate a response to a user query using the document content and AI\n * @param query The user's question\n * @param documentId The document ID to search within\n * @returns AI-generated response based on document content\n */ async function /*#__TURBOPACK_DISABLE_EXPORT_MERGING__*/ generateResponseFromDocument(query, documentId) {\n    try {\n        // Process the query to get relevant document sections\n        const { results } = await processDocumentQuery(query, documentId);\n        if (!results || results.length === 0) {\n            return {\n                message: \"I couldn't find relevant information in this document to answer your question. Could you please rephrase or ask something else about the document?\",\n                sources: [],\n                referencedPages: []\n            };\n        }\n        // Prepare context from the search results\n        const context = results.map((result)=>`[Page ${result.pageNumber}]: ${result.content}`).join('\\n\\n');\n        // Get unique page numbers for references\n        const pageNumbers = [\n            ...new Set(results.map((result)=>result.pageNumber))\n        ].sort((a, b)=>a - b);\n        // Create a system prompt for the AI\n        const systemPrompt = `You are an AI assistant that helps users understand PDF documents. \nYou have access to specific sections of a document that are relevant to the user's query.\nAnswer the user's question based ONLY on the provided document sections.\nIf the information in the document sections is not sufficient to answer the question, \nacknowledge that and don't make up information.\n\nIMPORTANT: When referring to information, you MUST cite the specific page numbers using the format \"According to page X...\" or \"[Page X]\".\nBe sure to mention ALL relevant page numbers that contain information used in your answer.\nFormat your response using markdown for better readability.\n\nDocument sections:\n${context}`;\n        // Generate a response using the OpenAI API\n        const response = await openai.chat.completions.create({\n            model: \"gpt-4o\",\n            messages: [\n                {\n                    role: \"system\",\n                    content: systemPrompt\n                },\n                {\n                    role: \"user\",\n                    content: query\n                }\n            ],\n            temperature: 0.5,\n            max_tokens: 1000\n        });\n        // Extract the AI's response\n        const aiMessage = response.choices[0].message.content || \"I couldn't generate a response based on the document content.\";\n        // Return the response with source information and referenced pages\n        return {\n            message: aiMessage,\n            sources: results.map((result)=>({\n                    pageNumber: result.pageNumber,\n                    score: result.score,\n                    preview: result.content?.substring(0, 150) + \"...\"\n                })),\n            referencedPages: pageNumbers\n        };\n    } catch (error) {\n        console.error(\"Error generating response:\", error);\n        return {\n            message: \"I encountered an error while trying to answer your question. Please try again later.\",\n            sources: [],\n            referencedPages: []\n        };\n    }\n}\n\n(0,private_next_rsc_action_validate__WEBPACK_IMPORTED_MODULE_4__.ensureServerEntryExports)([\n    generateQueryEmbedding,\n    searchVectorDatabase,\n    processDocumentQuery,\n    generateResponseFromDocument\n]);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(generateQueryEmbedding, \"40b75191ffba29d42d184cac594b69c72f5a8a4ea2\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(searchVectorDatabase, \"704661934ea74220b9ef7352535d100b8558a4f708\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(processDocumentQuery, \"60c9619da0251a313b176f12525a9cd810ddbd9043\", null);\n(0,private_next_rsc_server_reference__WEBPACK_IMPORTED_MODULE_0__.registerServerReference)(generateResponseFromDocument, \"6061b4b0266a63367f433d524be9bfb865eae01d6f\", null);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUU7WUFDWEMsaUJBQWlCLEVBQUU7UUFDckI7SUFDRjtBQUNGOzs7SUF4SnNCdkM7SUF3QkFjO0lBbUNBZ0I7SUEwQkFLOztBQXJGQW5DLDBGQUFBQSxDQUFBQTtBQXdCQWMsMEZBQUFBLENBQUFBO0FBbUNBZ0IsMEZBQUFBLENBQUFBO0FBMEJBSywwRkFBQUEsQ0FBQUEiLCJzb3VyY2VzIjpbIi9Vc2Vycy9rYXJ0aGlrbmFkYXIvRGVza3RvcC9wZGZzdC9saWIvZW1iZWRkaW5ncy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHNlcnZlcidcblxuaW1wb3J0IE9wZW5BSSBmcm9tIFwib3BlbmFpXCI7XG5pbXBvcnQgeyBQaW5lY29uZSB9IGZyb20gXCJAcGluZWNvbmUtZGF0YWJhc2UvcGluZWNvbmVcIjtcblxuLy8gSW5pdGlhbGl6ZSBPcGVuQUkgY2xpZW50XG5jb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgYXBpS2V5OiBwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWSxcbn0pO1xuXG4vLyBJbml0aWFsaXplIFBpbmVjb25lIGNsaWVudFxuY29uc3QgcGluZWNvbmUgPSBuZXcgUGluZWNvbmUoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52LlBJTkVDT05FX0FQSV9LRVkgfHwgJycsXG59KTtcblxuLy8gR2V0IFBpbmVjb25lIGluZGV4XG5jb25zdCBnZXRQaW5lY29uZUluZGV4ID0gKCkgPT4ge1xuICByZXR1cm4gcGluZWNvbmUuaW5kZXgoJ3BkZnRlc3QnKTtcbn07XG5cbi8qKlxuICogR2VuZXJhdGUgZW1iZWRkaW5ncyBmb3IgYSBxdWVyeSBzdHJpbmdcbiAqIEBwYXJhbSBxdWVyeSBUaGUgdXNlcidzIHF1ZXJ5IHRleHRcbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIGVtYmVkZGluZyB2YWx1ZXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlFbWJlZGRpbmcocXVlcnk6IHN0cmluZyk6IFByb21pc2U8bnVtYmVyW10+IHtcbiAgdHJ5IHtcbiAgICAvLyBUcnVuY2F0ZSBxdWVyeSBpZiBpdCdzIHRvbyBsb25nIChhcHByb3hpbWF0aW9uIGZvciA0MDAwIHRva2VucylcbiAgICBjb25zdCBwcm9jZXNzZWRRdWVyeSA9IHF1ZXJ5LnNsaWNlKDAsIDgwMDApO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmVtYmVkZGluZ3MuY3JlYXRlKHtcbiAgICAgIGlucHV0OiBwcm9jZXNzZWRRdWVyeSxcbiAgICAgIG1vZGVsOiBcInRleHQtZW1iZWRkaW5nLTMtc21hbGxcIixcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YVswXS5lbWJlZGRpbmc7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgcXVlcnkgZW1iZWRkaW5nOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGdlbmVyYXRlIGVtYmVkZGluZyBmb3IgcXVlcnlcIik7XG4gIH1cbn1cblxuLyoqXG4gKiBTZWFyY2ggZm9yIHJlbGV2YW50IGNvbnRlbnQgaW4gdGhlIHZlY3RvciBkYXRhYmFzZVxuICogQHBhcmFtIHF1ZXJ5RW1iZWRkaW5nIFRoZSBlbWJlZGRpbmcgdmVjdG9yIGZvciB0aGUgcXVlcnlcbiAqIEBwYXJhbSBkb2N1bWVudElkIFRoZSBJRCBvZiB0aGUgZG9jdW1lbnQgdG8gc2VhcmNoIHdpdGhpblxuICogQHBhcmFtIHRvcEsgTnVtYmVyIG9mIHJlc3VsdHMgdG8gcmV0dXJuXG4gKiBAcmV0dXJucyBBcnJheSBvZiBtYXRjaGluZyByZXN1bHRzIHdpdGggdGhlaXIgY29udGVudCBhbmQgbWV0YWRhdGFcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFZlY3RvckRhdGFiYXNlKFxuICBxdWVyeUVtYmVkZGluZzogbnVtYmVyW10sXG4gIGRvY3VtZW50SWQ6IG51bWJlcixcbiAgdG9wSzogbnVtYmVyID0gNVxuKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgaW5kZXggPSBnZXRQaW5lY29uZUluZGV4KCk7XG4gICAgXG4gICAgLy8gUXVlcnkgdGhlIHZlY3RvciBkYXRhYmFzZSB3aXRoIGRvY3VtZW50IGZpbHRlclxuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBpbmRleC5xdWVyeSh7XG4gICAgICB2ZWN0b3I6IHF1ZXJ5RW1iZWRkaW5nLFxuICAgICAgdG9wSyxcbiAgICAgIGZpbHRlcjogeyBkb2N1bWVudElkIH0sXG4gICAgICBpbmNsdWRlTWV0YWRhdGE6IHRydWUsXG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIHJlc3VsdHMubWF0Y2hlcy5tYXAobWF0Y2ggPT4gKHtcbiAgICAgIHNjb3JlOiBtYXRjaC5zY29yZSxcbiAgICAgIHBhZ2VOdW1iZXI6IG1hdGNoLm1ldGFkYXRhPy5wYWdlTnVtYmVyLFxuICAgICAgY29udGVudDogbWF0Y2gubWV0YWRhdGE/LmNvbnRlbnQsXG4gICAgICBkb2N1bWVudElkOiBtYXRjaC5tZXRhZGF0YT8uZG9jdW1lbnRJZCxcbiAgICAgIHRvdGFsQ2h1bmtzOiBtYXRjaC5tZXRhZGF0YT8udG90YWxDaHVua3MsXG4gICAgfSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZWFyY2hpbmcgdmVjdG9yIGRhdGFiYXNlOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIHNlYXJjaCBkb2N1bWVudCBjb250ZW50XCIpO1xuICB9XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHVzZXIgcXVlcnkgYWdhaW5zdCBhIHNwZWNpZmljIGRvY3VtZW50XG4gKiBAcGFyYW0gcXVlcnkgVGhlIHVzZXIncyBxdWVzdGlvblxuICogQHBhcmFtIGRvY3VtZW50SWQgVGhlIGRvY3VtZW50IElEIHRvIHNlYXJjaCB3aXRoaW5cbiAqIEByZXR1cm5zIFJlbGV2YW50IGNvbnRlbnQgZnJvbSB0aGUgZG9jdW1lbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEb2N1bWVudFF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIGRvY3VtZW50SWQ6IG51bWJlcikge1xuICB0cnkge1xuICAgIC8vIEdlbmVyYXRlIGVtYmVkZGluZyBmb3IgdGhlIHF1ZXJ5XG4gICAgY29uc3QgcXVlcnlFbWJlZGRpbmcgPSBhd2FpdCBnZW5lcmF0ZVF1ZXJ5RW1iZWRkaW5nKHF1ZXJ5KTtcbiAgICBcbiAgICAvLyBTZWFyY2ggZm9yIHJlbGV2YW50IGNvbnRlbnRcbiAgICBjb25zdCBzZWFyY2hSZXN1bHRzID0gYXdhaXQgc2VhcmNoVmVjdG9yRGF0YWJhc2UocXVlcnlFbWJlZGRpbmcsIGRvY3VtZW50SWQsIDUpO1xuICAgIFxuICAgIC8vIFJldHVybiB0aGUgc2VhcmNoIHJlc3VsdHNcbiAgICByZXR1cm4ge1xuICAgICAgcXVlcnksXG4gICAgICByZXN1bHRzOiBzZWFyY2hSZXN1bHRzLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcHJvY2Vzc2luZyBkb2N1bWVudCBxdWVyeTpcIiwgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBwcm9jZXNzIHlvdXIgcXVlcnlcIik7XG4gIH1cbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHJlc3BvbnNlIHRvIGEgdXNlciBxdWVyeSB1c2luZyB0aGUgZG9jdW1lbnQgY29udGVudCBhbmQgQUlcbiAqIEBwYXJhbSBxdWVyeSBUaGUgdXNlcidzIHF1ZXN0aW9uXG4gKiBAcGFyYW0gZG9jdW1lbnRJZCBUaGUgZG9jdW1lbnQgSUQgdG8gc2VhcmNoIHdpdGhpblxuICogQHJldHVybnMgQUktZ2VuZXJhdGVkIHJlc3BvbnNlIGJhc2VkIG9uIGRvY3VtZW50IGNvbnRlbnRcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlUmVzcG9uc2VGcm9tRG9jdW1lbnQocXVlcnk6IHN0cmluZywgZG9jdW1lbnRJZDogbnVtYmVyKSB7XG4gIHRyeSB7XG4gICAgLy8gUHJvY2VzcyB0aGUgcXVlcnkgdG8gZ2V0IHJlbGV2YW50IGRvY3VtZW50IHNlY3Rpb25zXG4gICAgY29uc3QgeyByZXN1bHRzIH0gPSBhd2FpdCBwcm9jZXNzRG9jdW1lbnRRdWVyeShxdWVyeSwgZG9jdW1lbnRJZCk7XG4gICAgXG4gICAgaWYgKCFyZXN1bHRzIHx8IHJlc3VsdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtZXNzYWdlOiBcIkkgY291bGRuJ3QgZmluZCByZWxldmFudCBpbmZvcm1hdGlvbiBpbiB0aGlzIGRvY3VtZW50IHRvIGFuc3dlciB5b3VyIHF1ZXN0aW9uLiBDb3VsZCB5b3UgcGxlYXNlIHJlcGhyYXNlIG9yIGFzayBzb21ldGhpbmcgZWxzZSBhYm91dCB0aGUgZG9jdW1lbnQ/XCIsXG4gICAgICAgIHNvdXJjZXM6IFtdLFxuICAgICAgICByZWZlcmVuY2VkUGFnZXM6IFtdXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICAvLyBQcmVwYXJlIGNvbnRleHQgZnJvbSB0aGUgc2VhcmNoIHJlc3VsdHNcbiAgICBjb25zdCBjb250ZXh0ID0gcmVzdWx0c1xuICAgICAgLm1hcChyZXN1bHQgPT4gYFtQYWdlICR7cmVzdWx0LnBhZ2VOdW1iZXJ9XTogJHtyZXN1bHQuY29udGVudH1gKVxuICAgICAgLmpvaW4oJ1xcblxcbicpO1xuICAgIFxuICAgIC8vIEdldCB1bmlxdWUgcGFnZSBudW1iZXJzIGZvciByZWZlcmVuY2VzXG4gICAgY29uc3QgcGFnZU51bWJlcnMgPSBbLi4ubmV3IFNldChyZXN1bHRzLm1hcChyZXN1bHQgPT4gcmVzdWx0LnBhZ2VOdW1iZXIpKV0uc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhIHN5c3RlbSBwcm9tcHQgZm9yIHRoZSBBSVxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIGFuIEFJIGFzc2lzdGFudCB0aGF0IGhlbHBzIHVzZXJzIHVuZGVyc3RhbmQgUERGIGRvY3VtZW50cy4gXG5Zb3UgaGF2ZSBhY2Nlc3MgdG8gc3BlY2lmaWMgc2VjdGlvbnMgb2YgYSBkb2N1bWVudCB0aGF0IGFyZSByZWxldmFudCB0byB0aGUgdXNlcidzIHF1ZXJ5LlxuQW5zd2VyIHRoZSB1c2VyJ3MgcXVlc3Rpb24gYmFzZWQgT05MWSBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgc2VjdGlvbnMuXG5JZiB0aGUgaW5mb3JtYXRpb24gaW4gdGhlIGRvY3VtZW50IHNlY3Rpb25zIGlzIG5vdCBzdWZmaWNpZW50IHRvIGFuc3dlciB0aGUgcXVlc3Rpb24sIFxuYWNrbm93bGVkZ2UgdGhhdCBhbmQgZG9uJ3QgbWFrZSB1cCBpbmZvcm1hdGlvbi5cblxuSU1QT1JUQU5UOiBXaGVuIHJlZmVycmluZyB0byBpbmZvcm1hdGlvbiwgeW91IE1VU1QgY2l0ZSB0aGUgc3BlY2lmaWMgcGFnZSBudW1iZXJzIHVzaW5nIHRoZSBmb3JtYXQgXCJBY2NvcmRpbmcgdG8gcGFnZSBYLi4uXCIgb3IgXCJbUGFnZSBYXVwiLlxuQmUgc3VyZSB0byBtZW50aW9uIEFMTCByZWxldmFudCBwYWdlIG51bWJlcnMgdGhhdCBjb250YWluIGluZm9ybWF0aW9uIHVzZWQgaW4geW91ciBhbnN3ZXIuXG5Gb3JtYXQgeW91ciByZXNwb25zZSB1c2luZyBtYXJrZG93biBmb3IgYmV0dGVyIHJlYWRhYmlsaXR5LlxuXG5Eb2N1bWVudCBzZWN0aW9uczpcbiR7Y29udGV4dH1gO1xuXG4gICAgLy8gR2VuZXJhdGUgYSByZXNwb25zZSB1c2luZyB0aGUgT3BlbkFJIEFQSVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBcImdwdC00b1wiLFxuICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBzeXN0ZW1Qcm9tcHQgfSxcbiAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogcXVlcnkgfVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjUsXG4gICAgICBtYXhfdG9rZW5zOiAxMDAwLFxuICAgIH0pO1xuICAgIFxuICAgIC8vIEV4dHJhY3QgdGhlIEFJJ3MgcmVzcG9uc2VcbiAgICBjb25zdCBhaU1lc3NhZ2UgPSByZXNwb25zZS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudCB8fCBcIkkgY291bGRuJ3QgZ2VuZXJhdGUgYSByZXNwb25zZSBiYXNlZCBvbiB0aGUgZG9jdW1lbnQgY29udGVudC5cIjtcbiAgICBcbiAgICAvLyBSZXR1cm4gdGhlIHJlc3BvbnNlIHdpdGggc291cmNlIGluZm9ybWF0aW9uIGFuZCByZWZlcmVuY2VkIHBhZ2VzXG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2U6IGFpTWVzc2FnZSxcbiAgICAgIHNvdXJjZXM6IHJlc3VsdHMubWFwKHJlc3VsdCA9PiAoe1xuICAgICAgICBwYWdlTnVtYmVyOiByZXN1bHQucGFnZU51bWJlcixcbiAgICAgICAgc2NvcmU6IHJlc3VsdC5zY29yZSxcbiAgICAgICAgcHJldmlldzogcmVzdWx0LmNvbnRlbnQ/LnN1YnN0cmluZygwLCAxNTApICsgXCIuLi5cIlxuICAgICAgfSkpLFxuICAgICAgcmVmZXJlbmNlZFBhZ2VzOiBwYWdlTnVtYmVyc1xuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdlbmVyYXRpbmcgcmVzcG9uc2U6XCIsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgbWVzc2FnZTogXCJJIGVuY291bnRlcmVkIGFuIGVycm9yIHdoaWxlIHRyeWluZyB0byBhbnN3ZXIgeW91ciBxdWVzdGlvbi4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIixcbiAgICAgIHNvdXJjZXM6IFtdLFxuICAgICAgcmVmZXJlbmNlZFBhZ2VzOiBbXVxuICAgIH07XG4gIH1cbn0gIl0sIm5hbWVzIjpbIk9wZW5BSSIsIlBpbmVjb25lIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwicGluZWNvbmUiLCJQSU5FQ09ORV9BUElfS0VZIiwiZ2V0UGluZWNvbmVJbmRleCIsImluZGV4IiwiZ2VuZXJhdGVRdWVyeUVtYmVkZGluZyIsInF1ZXJ5IiwicHJvY2Vzc2VkUXVlcnkiLCJzbGljZSIsInJlc3BvbnNlIiwiZW1iZWRkaW5ncyIsImNyZWF0ZSIsImlucHV0IiwibW9kZWwiLCJkYXRhIiwiZW1iZWRkaW5nIiwiZXJyb3IiLCJjb25zb2xlIiwiRXJyb3IiLCJzZWFyY2hWZWN0b3JEYXRhYmFzZSIsInF1ZXJ5RW1iZWRkaW5nIiwiZG9jdW1lbnRJZCIsInRvcEsiLCJyZXN1bHRzIiwidmVjdG9yIiwiZmlsdGVyIiwiaW5jbHVkZU1ldGFkYXRhIiwibWF0Y2hlcyIsIm1hcCIsIm1hdGNoIiwic2NvcmUiLCJwYWdlTnVtYmVyIiwibWV0YWRhdGEiLCJjb250ZW50IiwidG90YWxDaHVua3MiLCJwcm9jZXNzRG9jdW1lbnRRdWVyeSIsInNlYXJjaFJlc3VsdHMiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJnZW5lcmF0ZVJlc3BvbnNlRnJvbURvY3VtZW50IiwibGVuZ3RoIiwibWVzc2FnZSIsInNvdXJjZXMiLCJyZWZlcmVuY2VkUGFnZXMiLCJjb250ZXh0IiwicmVzdWx0Iiwiam9pbiIsInBhZ2VOdW1iZXJzIiwiU2V0Iiwic29ydCIsImEiLCJiIiwic3lzdGVtUHJvbXB0IiwiY2hhdCIsImNvbXBsZXRpb25zIiwibWVzc2FnZXMiLCJyb2xlIiwidGVtcGVyYXR1cmUiLCJtYXhfdG9rZW5zIiwiYWlNZXNzYWdlIiwiY2hvaWNlcyIsInByZXZpZXciLCJzdWJzdHJpbmciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/embeddings.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@clerk","vendor-chunks/next","vendor-chunks/drizzle-orm","vendor-chunks/@neondatabase","vendor-chunks/@opentelemetry","vendor-chunks/crypto-js","vendor-chunks/tslib","vendor-chunks/cookie","vendor-chunks/map-obj","vendor-chunks/no-case","vendor-chunks/lower-case","vendor-chunks/snakecase-keys","vendor-chunks/snake-case","vendor-chunks/dot-case","vendor-chunks/formdata-node","vendor-chunks/ms","vendor-chunks/@pinecone-database","vendor-chunks/openai","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/whatwg-url","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/webidl-conversions","vendor-chunks/abort-controller","vendor-chunks/humanize-ms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&page=%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fchat%2F%5BdocumentId%5D%2Froute.ts&appDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkarthiknadar%2FDesktop%2Fpdfst&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();